import type { TranslationResource, LanguageCode, CardTranslation, CounterTranslation } from '@/locales/types'
import { ru } from '@/locales/ru'
import { sr } from '@/locales/sr'
import { cardDatabase, tokenDatabase, countersDatabase } from '@/content'

// --- Static English UI & Rules Definitions ---

const enUI = {
  startGame: 'Start Game',
  joinGame: 'Join Game',
  deckBuilding: 'Deck Building',
  rules: 'Rules & Tutorial',
  settings: 'Settings',
  language: 'Language',
  serverAddress: 'Server Address',
  saveApply: 'Save & Apply',
  cancel: 'Cancel',
  close: 'Close',
  tokens: 'Tokens',
  counters: 'Counters',
  phase: 'Phase',
  scoring: 'SCORING...',
  autoAbility: 'Auto-Ability',
  autoDraw: 'Auto-Draw',
  newGame: 'New Game',
  exit: 'Exit',
  surrender: 'Surrender',
  mode: 'Mode',
  size: 'Size',
  dummies: 'Dummies',
  spectatorMode: 'Spectator Mode',
  spectatorMsg: 'You are watching the game.',
  readyCheck: 'Ready to Start?',
  imReady: 'I\'m Ready',
  waiting: 'Waiting...',
  cancelStart: 'Cancel Start',
  assignTeams: 'Assign Teams',
  confirmTeams: 'Confirm Teams & Start',
  unassigned: 'Unassigned Players',
  team: 'Team',
  deck: 'DECK',
  discard: 'DISCARD',
  showcase: 'Showcase',
  customDeck: 'Custom Deck',
  loadDeck: 'Load',
  clear: 'Clear',
  save: 'Save',
  filter: 'Filter',
  currentDeck: 'Current Deck',
  emptyDeck: 'Your deck is empty.',
  clickToAdd: 'Click cards on the left to add them.',
  view: 'View',
  play: 'Play',
  playFaceDown: 'Play Face Down',
  toHand: 'To Hand',
  toDiscard: 'To Discard',
  revealToAll: 'Reveal to All',
  requestReveal: 'Request Reveal',
  flipUp: 'Flip Face Up',
  flipDown: 'Flip Face Down',
  connected: 'Connected',
  disconnected: 'Disconnected',
  hiddenGameTooltip: 'Hidden games do not appear in the \'Join Game\' list',
  gameOver: 'Game Over',
  roundComplete: 'Round Complete',
  winner: 'Winner',
  roundWinner: 'Round Winner',
  move: 'Move',
  moveToBottom: 'Move to Bottom',
  selectCard: 'Select Card',
  deckView: 'Deck',
  topDeckView: 'Top Deck',
  discardView: 'Discard Pile',
  selectFromDeck: 'Select Card from Deck',
  selectFromDiscard: 'Select Card from Discard',
  power: 'Power',
  owner: 'Owner',
  noDescription: 'No description available',
  comingSoon: 'Coming Soon',
  revealed: 'Revealed',
  reconnecting: 'Reconnecting...',
  error: 'Error',
  loading: 'Loading...',
  create: 'Create',
  createGame: 'Create Game',
  gameCode: 'Game Code',
  playerName: 'Player Name',
  join: 'Join',
  back: 'Back',
  customGame: 'Custom Game',
  privateGame: 'Private Game',
  publicGame: 'Public Game',
  freeForAll: 'Free For All',
  teamBattle: 'Team Battle',
  startingPlayer: 'Starting Player',
  turn: 'Turn',
  round: 'Round',
  score: 'Score',
  hand: 'HAND',
  announced: 'ANNOUNCED',
  effects: 'Effects',
  status: 'Status',
  deploy: 'Deploy',
  ability: 'Ability',
  recover: 'Recover',
  resurrect: 'Resurrect',
  destroy: 'Destroy',
  returnToHand: 'Return to Hand',
  shuffle: 'Shuffle',
  drawCard: 'Draw Card',
  drawStartingHand: 'Draw Starting Hand (6)',
  viewTopCards: 'View Top Cards',
  highlight: 'Highlight',
  highlightCell: 'Highlight Cell',
  highlightRow: 'Highlight Row',
  highlightColumn: 'Highlight Column',
  emptyHand: 'Empty Hand',
  hidden: 'Hidden',
  newAvalon: 'New Avalon',
  cards: 'Cards',
  scorePoints: 'points',
  toWinRound: 'to win round.',
  checkedAtFirstPlayer: 'Checked at First Player\'s Setup Phase.',
  roundVictoryCondition: 'Round Victory Condition',
  reach: 'Reach',
  ffa: 'FFA',
  team2v2: '2v2',
  team3v1: '3v1',
  drawCards: 'Draw Card',
  activeGames: 'Active Games',
  noActiveGames: 'No active games found.',
  createOne: 'Why not create one?',
  orJoinWithCode: 'Or Join with Code',
  enterGameId: 'Enter Game ID',
  dragToReorder: 'Drag to reorder.',
  rightClickForActions: 'Right click for actions.',
  deckEmpty: 'Deck is empty.',
  done: 'Done',
  remove: 'Remove',
  toDeckTop: 'To Deck Top',
  toDeckBottom: 'To Deck Bottom',
  storyMode: 'Story Mode',
  puzzles: 'Puzzles',
  changeColor: 'Change Color',
  firstPlayer: 'First Player',
  activePlayer: 'Active Player',
  clearSearch: 'Clear Search',
  resetPowerFilter: 'Reset Power Filter',
  clearTypes: 'Clear Types',
  resetFaction: 'Reset Faction',
  removeOne: 'Remove one',
  waitingForOthers: 'Waiting for others...',
  deckNamePlaceholder: 'Deck Name',
  searchPlaceholder: 'Search...',
  myCustomDeck: 'My Custom Deck',
  untitledDeck: 'Untitled Deck',
  max1RarityHero: 'Max 1 (Rarity/Hero)',
  max2Command: 'Max 2 (Command)',
  finalRoundMaxTurns: 'Final Round! Max 10 Turns.',
  max5Rounds: 'Max 5 Rounds.',
  selectCardFromDeck: 'Select Card from Deck',
  selectCardFromDiscard: 'Select Card from Discard',
  noTarget: 'No Target',
  confirmClearDeck: 'Are you sure you want to clear the current deck?',
  languageDisabled: 'Language selection is currently disabled.',
  autoAbilitiesTooltip: 'Auto-Abilities: Enable automatic ability activation',
  autoDrawTooltip: 'Auto-Draw: Enable automatic card drawing (6 card starting hand + draw at Setup phase)',
  endedOnTurn: 'Ended on Turn',
  nextRound: 'Next:',
  victoryCondition: 'Victory Condition:',
  win2RoundsMatch: '* Win 2 rounds to win the match. ',
  max5RoundsInfo: 'Max 5 Rounds.',
  matchComplete: 'Match Complete',
  thankYouPlaying: 'Thank you for playing New Avalon: Skirmish.',
  returnToMenu: 'Return to Menu',
  continueGame: 'Continue Game',
  startRound: 'Start Round',
  youLabel: '(You)',
  readyToStart: 'Ready to Start?',
  gameWillBegin: 'The game will begin once all players are ready. You can still change your name and deck.',
  dragCardsReorder: 'Drag cards to reorder. Drag outside to move card to another zone.',
  dragOutsideAnotherZone: 'Drag outside to move card to another zone.',
  ready: 'Ready',
  dragOutsideToMove: 'Drag outside to move card to another zone.',
  empty: 'Empty',
  dragOutsideToPlaceToken: 'Drag outside to place token on the board.',
  holdRightClickViewHints: 'Hold right click to view hints',
}

const enRules = {
  title: 'New Avalon: Skirmish Game Rules',
  conceptTitle: 'I. Basic Concept',
  conceptText: '**Genre and Player Role:** New Avalon: Skirmish is a dynamic tactical card game played on a limited grid field. Players take on the roles of faction leaders, deploying Units and Commands to capture control over key battle lines.\n\n**Explanation:** The game focuses on positional control and ability activation timing, not just direct attacks. Victory is achieved by earning Victory Points (VP), based on the strength of units in selected lines.',
  winConditionTitle: 'II. Victory Conditions',
  winConditionText: '**Match Victory Conditions:** The match is played to 2 round wins. The first player to achieve 2 round wins immediately wins the match.\n**Draw Explanation:** If, at the end of any round, multiple players simultaneously reach 2 round wins, all are declared match winners.\n\n**Round Victory Conditions (Thresholds and Turn Limit):** A round ends as soon as one or more players reach the Victory Point (VP) threshold or after completion of turn 5.\n**Turn Limit:** Each round is limited to 5 full turns per player. If the VP threshold is not reached, final scoring occurs at the end of turn 5.\n\n**Threshold Values:**\n- Round 1: 20 Victory Points (VP).\n- Round 2: 30 Victory Points (VP).\n- Round 3 onwards: Threshold increases by +10 VP relative to previous round (e.g., Round 3 — 40 VP).\n\n**Determining Round Winner and Draw:** The round winner is the player who reached the threshold value or the player with the most VPs after the turn limit.\n**Round Draw Explanation:** If, at the end of the round, two or more players have the same and highest point total, all are declared round winners.',
  fieldTitle: 'III. Battlefield and Components',
  fieldText: '**Battlefield (Grid):** The game is played on a square grid whose size changes based on total participants.\n**Size Explanation:**\n- 2 players: 5x5 cell field.\n- 3 players: 6x6 cell field.\n- 4 players: 7x7 cell field.\n\n**Position Determination:**\n- **Line:** An entire horizontal row or vertical column. Used for scoring mechanics.\n- **Adjacency:** Cells are considered adjacent only horizontally and vertically (orthogonally). Diagonal adjacency is not considered unless otherwise stated on a card.\n\n**Cards:** The game uses two main card types played from Hand:\n- **Units:** Basic combat units with Power and Abilities. Remain on battlefield until destroyed.\n- **Commands:** Instant action cards. Played, execute effect (often offering "2 of 3 options"), and go to Discard.\n\n**Play Zones:**\n- **Hand:** Cards hidden from opponents.\n- **Discard:** Zone where destroyed Units and played Commands go.\n- **Showcase (Announced):** Temporary zone where a Command card is placed before being played.',
  setupTitle: 'IV. Game Start (Setup)',
  setupText: '**Deck Formation:** Before match start, each player chooses a faction or builds a deck according to building rules (minimum 30 cards).\n**Explanation:** Cards in deck are shuffled.\n\n**Starting Hand:** Each player draws 6 cards from their deck, forming the starting hand.\n**Hidden Information Explanation:** Cards in hand are hidden from opponents.\n\n**Mulligan:** At game start, after receiving starting hand (6 cards), player has the right to shuffle any number of cards from hand back into deck and draw same number of new cards from top.\n\n**Determining First Player:** Determine first active player by any convenient method (e.g., coin toss).\n**Explanation:** Play proceeds alternately, starting with first player. First player begins their first turn immediately with Setup Phase.',
  abilitiesTitle: 'V. Card Abilities',
  abilitiesText: '**Ability Types:**\n- **Deploy:** Activates automatically and immediately when card is placed from hand onto field face-up.\n- **Setup:** Activates automatically at start of Setup Phase of each of your turns (before drawing), if card already lies on field face-up.\n- **Commit:** Activates automatically at start of Commit Phase of each of your turns, if card already lies on field face-up.\n- **Pass (Passive):** Effect applies continuously while card is on field in face-up state.\n\n**Execution Conditions (⇒):**\nMany abilities have requirement marked by arrow (e.g., **Support ⇒ Deploy:** ...).\n- This means "CONDITION CHECK ⇒ EFFECT".\n- If condition left of arrow (e.g., presence of Support status) is not met at activation time, ability **does not activate** at all.\n\n**Important Rules:**\n- **Stun:** Stunned cards (with Stun token) **do not activate** their abilities (neither Deploy, nor phase, nor passive).\n- **Face-down:** Cards lying face-down have no abilities.\n- **Obligation:** If ability activated (conditions met), you **must** apply its effect if legal targets exist. If no legal targets, ability applies fruitlessly (burns).',
  statusesTitle: 'VI. Dynamic Statuses (Positioning)',
  statusesText: 'Dynamic statuses are calculated automatically and continuously upon any board change. Units with Stun status cannot give or participate in calculation of these statuses.\n\n**Support:** Unit has Support status if in at least one adjacent cell (horizontally or vertically) there is an allied unit.\n**Stun/Support Explanation:** Unit with Stun token is not considered in Support calculation for adjacent allies.\n**Value:** Presence of Support is condition for activating many powerful abilities, marked by syntax Support ⇒ [Effect].\n\n**Threat:** Unit gains Threat status if located in dangerous position created by enemy units.\n**Condition Explanation:** Threat status is assigned in one of two situations:\n1. **Pincers:** Unit is caught by cards of one opponent from any two sides (two adjacent or two opposite).\n2. **Pressure:** Unit is on battlefield edge and has at least one opponent card adjacent.\n**Stun/Threat Explanation:** Unit with Stun token is not considered in Threat calculation for adjacent enemies.\n**Value:** Units under Threat are vulnerable targets for powerful control and destruction abilities.',
  countersTitle: 'VII. Tokens (Counters)',
  countersText: 'Tokens are permanent markers placed by card abilities. Remain on unit until removed or unit destroyed.\n\n**Stun:**\n- **Effect:** Unit with Stun gives 0 Victory Points in scoring phase, cannot activate its abilities and cannot be moved by its owner (but can be moved by opponents).\n- **Removal:** At end of Commit phase, 1 Stun token is automatically removed from each unit of active player.\n\n**Shield:**\n- **Effect:** If ability attempts to Destroy this unit, destruction effect is prevented, and 1 Shield token is removed from unit instead. Unit remains on field.\n\n**Revealed and Face-down Cards:**\n- **Revealed:** Enables token owner to see hidden card information.\n- **Face-down Explanation:** Card played face-down has no Power or Abilities and gives 0 points. If such card receives Revealed token, its information (face) becomes visible to opponent, but card is still considered face-down for all game purposes (power, abilities).\n\n**Special Tokens (Aim, Exploit):**\n- **Aim and Exploit:** These tokens are markers for faction ability interaction (e.g., snipers or hackers). Have no gameplay effect by themselves.\n\n**Last Played:**\n- **Effect:** Temporary status automatically assigned to card last played onto field by active player in current turn. This status determines line player must choose for scoring.',
  turnTitle: 'VIII. Turn Structure and Timing',
  turnText: 'Turn passes from player to player. Card abilities activate only in their owner\'s turn. Active player\'s turn consists of four sequential phases:\n\n**1. Setup Phase:**\n- **Draw:** Active player draws 1 card from deck into hand.\n- **Abilities:** Activate abilities of all cards on field with keyword **Setup:**.\n**Explanation:** This phase is for hand replenishment and initial unit positioning.\n\n**2. Main Phase (Action/Deployment):**\n- **Main Action:** Active player may perform one of following actions:\n  - Play Unit card (**Deploy:**) from hand onto any free field cell. Immediately activates its Deploy: ability.\n  - Play Command card from hand.\n  - Pass.\n**Command Explanation:** Command cards can be played in any number during this phase — before, after, or between unit deployments.\n\n**3. Commit Phase (Finalization):**\n- **Abilities:** Activate abilities of all cards on field with keyword **Commit:**.\n- **Stun Removal:** At end of this phase, 1 Stun token is automatically removed from each unit of active player.\n**Explanation:** Phase used for applying control effects and gaining resources before scoring.\n\n**4. Scoring Phase:**\n- **Line Selection:** Active player must choose one Line (Row or Column) passing through their card with **Last Played** status.\n- **Calculation:** Sum Power of all active player\'s units in selected line and add total to player\'s overall score.',
  mechanicsTitle: 'IX. Conflict Resolution and Key Mechanics',
  mechanicsText: '**Stun and Scoring:**\n- **Effect:** Unit with Stun status or lying Face-down gives 0 points in scoring phase, regardless of its base Power, permanent power modifiers, or passive abilities that give points (e.g., Spotter).\n\n**Last Played Status Transfer:**\n- **Destruction:** If card with Last Played status leaves battlefield (destroyed, returned to hand/deck) before Scoring Phase, status transfers to previous played card of this player (the one that was Last Played in previous turn).\n- **Movement:** If card with Last Played moves to another cell, player chooses its new lines in Scoring Phase.\n- **Absence:** If player has no card with Last Played status, player cannot choose line and gets no points this turn.\n\n**Unit Movement (Push, Swap):**\n- **Push:** Unit forces another card to move to adjacent cell. Push is blocked (does not happen) if target cell is occupied or field edge. Other ability effects apply to target.\n- **Swap:** Enables two cards to exchange places, even if both cells are occupied.\n\n**Resurrection:**\n- **"Burning" Mechanic:** Card returned to battlefield from Discard (resurrected) immediately gains **Resurrected** status at moment of Deploy. At start of next phase (on phase change) this status is removed and card receives two Stun tokens.',
  creditsTitle: 'X. Game Authors',
  creditsText: '**Author:** Nikita Anahoret\n\n**Used:**\n- Google AI Studio\n- Gemini\n- ChatGPT\n\n**Special Thanks:**\n- Vasilisa Versus\n- Kirill Tomaščuk\n- Andrej Markosov\n- Mića Šepelin\n\nFor questions and suggestions write on Telegram or Discord.\nYou can support game development and authors through DonationAlerts and Patreon.',
}

// Build English Card Translations
const enCards: Record<string, CardTranslation> = {}
cardDatabase.forEach((def, id) => {
  enCards[id] = {
    name: def.name,
    ability: def.ability,
    flavorText: def.flavorText,
  }
})
tokenDatabase.forEach((def, id) => {
  enCards[id] = {
    name: def.name,
    ability: def.ability,
    flavorText: def.flavorText,
  }
})

// Build English Counter Translations
const enCounters: Record<string, CounterTranslation> = {}
Object.entries(countersDatabase).forEach(([key, def]) => {
  enCounters[key] = {
    name: def.name,
    description: def.description,
  }
})

const enAbilityKeywords = {
  deploy: 'Deploy',
  setup: 'Setup',
  commit: 'Commit',
  support: 'Support',
  threat: 'Threat',
  pass: 'Pass',
  aim: 'Aim',
  exploit: 'Exploit',
  stun: 'Stun',
  shield: 'Shield',
  gain: 'Gain',
  point: 'Point',
  points: 'Points',
  reveal: 'Reveal',
  move: 'Move',
  draw: 'Draw',
  push: 'Push',
  sacrifice: 'Sacrifice',
  discard: 'Discard',
}

const enCardTypes = {
  unit: 'Unit',
  command: 'Command',
  hero: 'Hero',
  rarity: 'Rarity',
  structure: 'Structure',
  gear: 'Gear',
  event: 'Event',
  attachment: 'Attachment',
}

const enDeckNames = {
  SynchroTech: 'SynchroTech',
  Hoods: 'Hoods',
  Optimates: 'Optimates',
  Fusion: 'Fusion',
}

const en: TranslationResource = {
  abilityKeywords: enAbilityKeywords,
  cardTypes: enCardTypes,
  ui: enUI,
  rules: enRules,
  cards: enCards,
  counters: enCounters,
  deckNames: enDeckNames,
}

export const resources: Record<LanguageCode, TranslationResource> = {
  en,
  ru,
  sr,
  de: en, fr: en, it: en, pt: en, zh: en, hi: en, es: en, ar: en, uk: en, be: en, tt: en,
}

// Only languages with complete translations
export const AVAILABLE_LANGUAGES: LanguageCode[] = ['en', 'ru', 'sr']

export const LANGUAGE_NAMES: Record<LanguageCode, string> = {
  en: 'English',
  ru: 'Русский',
  de: 'Deutsch',
  fr: 'Français',
  it: 'Italiano',
  pt: 'Português',
  zh: '中文',
  hi: 'हिन्दी',
  es: 'Español',
  ar: 'العربية',
  uk: 'Українська',
  be: 'Беларуская',
  tt: 'Татарча',
  sr: 'Srpski',
}
