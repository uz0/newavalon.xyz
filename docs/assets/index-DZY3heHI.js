(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function Jp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Yc={exports:{}},ys={},qc={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var el=Symbol.for("react.element"),Yp=Symbol.for("react.portal"),qp=Symbol.for("react.fragment"),Qp=Symbol.for("react.strict_mode"),Xp=Symbol.for("react.profiler"),Zp=Symbol.for("react.provider"),em=Symbol.for("react.context"),tm=Symbol.for("react.forward_ref"),nm=Symbol.for("react.suspense"),rm=Symbol.for("react.memo"),om=Symbol.for("react.lazy"),Ou=Symbol.iterator;function lm(e){return e===null||typeof e!="object"?null:(e=Ou&&e[Ou]||e["@@iterator"],typeof e=="function"?e:null)}var Qc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xc=Object.assign,Zc={};function no(e,t,n){this.props=e,this.context=t,this.refs=Zc,this.updater=n||Qc}no.prototype.isReactComponent={};no.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};no.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ed(){}ed.prototype=no.prototype;function Ci(e,t,n){this.props=e,this.context=t,this.refs=Zc,this.updater=n||Qc}var Ei=Ci.prototype=new ed;Ei.constructor=Ci;Xc(Ei,no.prototype);Ei.isPureReactComponent=!0;var Pu=Array.isArray,td=Object.prototype.hasOwnProperty,Si={current:null},nd={key:!0,ref:!0,__self:!0,__source:!0};function rd(e,t,n){var r,o={},l=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(l=""+t.key),t)td.call(t,r)&&!nd.hasOwnProperty(r)&&(o[r]=t[r]);var i=arguments.length-2;if(i===1)o.children=n;else if(1<i){for(var u=Array(i),c=0;c<i;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)o[r]===void 0&&(o[r]=i[r]);return{$$typeof:el,type:e,key:l,ref:a,props:o,_owner:Si.current}}function sm(e,t){return{$$typeof:el,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ti(e){return typeof e=="object"&&e!==null&&e.$$typeof===el}function am(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Au=/\/+/g;function Vs(e,t){return typeof e=="object"&&e!==null&&e.key!=null?am(""+e.key):t.toString(36)}function Dl(e,t,n,r,o){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(l){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case el:case Yp:a=!0}}if(a)return a=e,o=o(a),e=r===""?"."+Vs(a,0):r,Pu(o)?(n="",e!=null&&(n=e.replace(Au,"$&/")+"/"),Dl(o,t,n,"",function(c){return c})):o!=null&&(Ti(o)&&(o=sm(o,n+(!o.key||a&&a.key===o.key?"":(""+o.key).replace(Au,"$&/")+"/")+e)),t.push(o)),1;if(a=0,r=r===""?".":r+":",Pu(e))for(var i=0;i<e.length;i++){l=e[i];var u=r+Vs(l,i);a+=Dl(l,t,n,u,o)}else if(u=lm(e),typeof u=="function")for(e=u.call(e),i=0;!(l=e.next()).done;)l=l.value,u=r+Vs(l,i++),a+=Dl(l,t,n,u,o);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function ml(e,t,n){if(e==null)return e;var r=[],o=0;return Dl(e,r,"","",function(l){return t.call(n,l,o++)}),r}function im(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var wt={current:null},Rl={transition:null},um={ReactCurrentDispatcher:wt,ReactCurrentBatchConfig:Rl,ReactCurrentOwner:Si};function od(){throw Error("act(...) is not supported in production builds of React.")}De.Children={map:ml,forEach:function(e,t,n){ml(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ml(e,function(){t++}),t},toArray:function(e){return ml(e,function(t){return t})||[]},only:function(e){if(!Ti(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};De.Component=no;De.Fragment=qp;De.Profiler=Xp;De.PureComponent=Ci;De.StrictMode=Qp;De.Suspense=nm;De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=um;De.act=od;De.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Xc({},e.props),o=e.key,l=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,a=Si.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(u in t)td.call(t,u)&&!nd.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&i!==void 0?i[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){i=Array(u);for(var c=0;c<u;c++)i[c]=arguments[c+2];r.children=i}return{$$typeof:el,type:e.type,key:o,ref:l,props:r,_owner:a}};De.createContext=function(e){return e={$$typeof:em,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Zp,_context:e},e.Consumer=e};De.createElement=rd;De.createFactory=function(e){var t=rd.bind(null,e);return t.type=e,t};De.createRef=function(){return{current:null}};De.forwardRef=function(e){return{$$typeof:tm,render:e}};De.isValidElement=Ti;De.lazy=function(e){return{$$typeof:om,_payload:{_status:-1,_result:e},_init:im}};De.memo=function(e,t){return{$$typeof:rm,type:e,compare:t===void 0?null:t}};De.startTransition=function(e){var t=Rl.transition;Rl.transition={};try{e()}finally{Rl.transition=t}};De.unstable_act=od;De.useCallback=function(e,t){return wt.current.useCallback(e,t)};De.useContext=function(e){return wt.current.useContext(e)};De.useDebugValue=function(){};De.useDeferredValue=function(e){return wt.current.useDeferredValue(e)};De.useEffect=function(e,t){return wt.current.useEffect(e,t)};De.useId=function(){return wt.current.useId()};De.useImperativeHandle=function(e,t,n){return wt.current.useImperativeHandle(e,t,n)};De.useInsertionEffect=function(e,t){return wt.current.useInsertionEffect(e,t)};De.useLayoutEffect=function(e,t){return wt.current.useLayoutEffect(e,t)};De.useMemo=function(e,t){return wt.current.useMemo(e,t)};De.useReducer=function(e,t,n){return wt.current.useReducer(e,t,n)};De.useRef=function(e){return wt.current.useRef(e)};De.useState=function(e){return wt.current.useState(e)};De.useSyncExternalStore=function(e,t,n){return wt.current.useSyncExternalStore(e,t,n)};De.useTransition=function(){return wt.current.useTransition()};De.version="18.3.1";qc.exports=De;var E=qc.exports;const Fn=Jp(E);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cm=E,dm=Symbol.for("react.element"),fm=Symbol.for("react.fragment"),pm=Object.prototype.hasOwnProperty,mm=cm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hm={key:!0,ref:!0,__self:!0,__source:!0};function ld(e,t,n){var r,o={},l=null,a=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)pm.call(t,r)&&!hm.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:dm,type:e,key:l,ref:a,props:o,_owner:mm.current}}ys.Fragment=fm;ys.jsx=ld;ys.jsxs=ld;Yc.exports=ys;var s=Yc.exports,Ta={},sd={exports:{}},At={},ad={exports:{}},id={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,U){var ne=A.length;A.push(U);e:for(;0<ne;){var te=ne-1>>>1,_=A[te];if(0<o(_,U))A[te]=U,A[ne]=_,ne=te;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var U=A[0],ne=A.pop();if(ne!==U){A[0]=ne;e:for(var te=0,_=A.length,O=_>>>1;te<O;){var K=2*(te+1)-1,V=A[K],L=K+1,oe=A[L];if(0>o(V,ne))L<_&&0>o(oe,V)?(A[te]=oe,A[L]=ne,te=L):(A[te]=V,A[K]=ne,te=K);else if(L<_&&0>o(oe,ne))A[te]=oe,A[L]=ne,te=L;else break e}}return U}function o(A,U){var ne=A.sortIndex-U.sortIndex;return ne!==0?ne:A.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var a=Date,i=a.now();e.unstable_now=function(){return a.now()-i}}var u=[],c=[],x=1,f=null,p=3,T=!1,S=!1,I=!1,z=typeof setTimeout=="function"?setTimeout:null,d=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(A){for(var U=n(c);U!==null;){if(U.callback===null)r(c);else if(U.startTime<=A)r(c),U.sortIndex=U.expirationTime,t(u,U);else break;U=n(c)}}function C(A){if(I=!1,g(A),!S)if(n(u)!==null)S=!0,W(N);else{var U=n(c);U!==null&&le(C,U.startTime-A)}}function N(A,U){S=!1,I&&(I=!1,d(B),B=-1),T=!0;var ne=p;try{for(g(U),f=n(u);f!==null&&(!(f.expirationTime>U)||A&&!fe());){var te=f.callback;if(typeof te=="function"){f.callback=null,p=f.priorityLevel;var _=te(f.expirationTime<=U);U=e.unstable_now(),typeof _=="function"?f.callback=_:f===n(u)&&r(u),g(U)}else r(u);f=n(u)}if(f!==null)var O=!0;else{var K=n(c);K!==null&&le(C,K.startTime-U),O=!1}return O}finally{f=null,p=ne,T=!1}}var P=!1,j=null,B=-1,ie=5,$=-1;function fe(){return!(e.unstable_now()-$<ie)}function ke(){if(j!==null){var A=e.unstable_now();$=A;var U=!0;try{U=j(!0,A)}finally{U?be():(P=!1,j=null)}}else P=!1}var be;if(typeof m=="function")be=function(){m(ke)};else if(typeof MessageChannel<"u"){var Te=new MessageChannel,Ie=Te.port2;Te.port1.onmessage=ke,be=function(){Ie.postMessage(null)}}else be=function(){z(ke,0)};function W(A){j=A,P||(P=!0,be())}function le(A,U){B=z(function(){A(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){S||T||(S=!0,W(N))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ie=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(A){switch(p){case 1:case 2:case 3:var U=3;break;default:U=p}var ne=p;p=U;try{return A()}finally{p=ne}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,U){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var ne=p;p=A;try{return U()}finally{p=ne}},e.unstable_scheduleCallback=function(A,U,ne){var te=e.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?te+ne:te):ne=te,A){case 1:var _=-1;break;case 2:_=250;break;case 5:_=1073741823;break;case 4:_=1e4;break;default:_=5e3}return _=ne+_,A={id:x++,callback:U,priorityLevel:A,startTime:ne,expirationTime:_,sortIndex:-1},ne>te?(A.sortIndex=ne,t(c,A),n(u)===null&&A===n(c)&&(I?(d(B),B=-1):I=!0,le(C,ne-te))):(A.sortIndex=_,t(u,A),S||T||(S=!0,W(N))),A},e.unstable_shouldYield=fe,e.unstable_wrapCallback=function(A){var U=p;return function(){var ne=p;p=U;try{return A.apply(this,arguments)}finally{p=ne}}}})(id);ad.exports=id;var ym=ad.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gm=E,Pt=ym;function J(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ud=new Set,Lo={};function xr(e,t){Yr(e,t),Yr(e+"Capture",t)}function Yr(e,t){for(Lo[e]=t,e=0;e<t.length;e++)ud.add(t[e])}var En=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ka=Object.prototype.hasOwnProperty,xm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Lu={},Mu={};function vm(e){return ka.call(Mu,e)?!0:ka.call(Lu,e)?!1:xm.test(e)?Mu[e]=!0:(Lu[e]=!0,!1)}function wm(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Cm(e,t,n,r){if(t===null||typeof t>"u"||wm(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ct(e,t,n,r,o,l,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=a}var ft={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ft[e]=new Ct(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ft[t]=new Ct(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ft[e]=new Ct(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ft[e]=new Ct(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ft[e]=new Ct(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ft[e]=new Ct(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ft[e]=new Ct(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ft[e]=new Ct(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ft[e]=new Ct(e,5,!1,e.toLowerCase(),null,!1,!1)});var ki=/[\-:]([a-z])/g;function bi(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ki,bi);ft[t]=new Ct(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ki,bi);ft[t]=new Ct(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ki,bi);ft[t]=new Ct(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ft[e]=new Ct(e,1,!1,e.toLowerCase(),null,!1,!1)});ft.xlinkHref=new Ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ft[e]=new Ct(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ni(e,t,n,r){var o=ft.hasOwnProperty(t)?ft[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Cm(t,n,o,r)&&(n=null),r||o===null?vm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var bn=gm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hl=Symbol.for("react.element"),_r=Symbol.for("react.portal"),Ir=Symbol.for("react.fragment"),ji=Symbol.for("react.strict_mode"),ba=Symbol.for("react.profiler"),cd=Symbol.for("react.provider"),dd=Symbol.for("react.context"),_i=Symbol.for("react.forward_ref"),Na=Symbol.for("react.suspense"),ja=Symbol.for("react.suspense_list"),Ii=Symbol.for("react.memo"),Pn=Symbol.for("react.lazy"),fd=Symbol.for("react.offscreen"),Uu=Symbol.iterator;function mo(e){return e===null||typeof e!="object"?null:(e=Uu&&e[Uu]||e["@@iterator"],typeof e=="function"?e:null)}var Je=Object.assign,Hs;function Eo(e){if(Hs===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Hs=t&&t[1]||""}return`
`+Hs+e}var Ks=!1;function Js(e,t){if(!e||Ks)return"";Ks=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var o=c.stack.split(`
`),l=r.stack.split(`
`),a=o.length-1,i=l.length-1;1<=a&&0<=i&&o[a]!==l[i];)i--;for(;1<=a&&0<=i;a--,i--)if(o[a]!==l[i]){if(a!==1||i!==1)do if(a--,i--,0>i||o[a]!==l[i]){var u=`
`+o[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=a&&0<=i);break}}}finally{Ks=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Eo(e):""}function Em(e){switch(e.tag){case 5:return Eo(e.type);case 16:return Eo("Lazy");case 13:return Eo("Suspense");case 19:return Eo("SuspenseList");case 0:case 2:case 15:return e=Js(e.type,!1),e;case 11:return e=Js(e.type.render,!1),e;case 1:return e=Js(e.type,!0),e;default:return""}}function _a(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ir:return"Fragment";case _r:return"Portal";case ba:return"Profiler";case ji:return"StrictMode";case Na:return"Suspense";case ja:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case dd:return(e.displayName||"Context")+".Consumer";case cd:return(e._context.displayName||"Context")+".Provider";case _i:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ii:return t=e.displayName||null,t!==null?t:_a(e.type)||"Memo";case Pn:t=e._payload,e=e._init;try{return _a(e(t))}catch{}}return null}function Sm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _a(t);case 8:return t===ji?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Yn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function pd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Tm(e){var t=pd(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(a){r=""+a,l.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function yl(e){e._valueTracker||(e._valueTracker=Tm(e))}function md(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=pd(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Wl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ia(e,t){var n=t.checked;return Je({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function zu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Yn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function hd(e,t){t=t.checked,t!=null&&Ni(e,"checked",t,!1)}function Da(e,t){hd(e,t);var n=Yn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ra(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ra(e,t.type,Yn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Fu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ra(e,t,n){(t!=="number"||Wl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var So=Array.isArray;function Gr(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Yn(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Oa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(J(91));return Je({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Bu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(J(92));if(So(n)){if(1<n.length)throw Error(J(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Yn(n)}}function yd(e,t){var n=Yn(t.value),r=Yn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function $u(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function gd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pa(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?gd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var gl,xd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(gl=gl||document.createElement("div"),gl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=gl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Mo(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var No={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},km=["Webkit","ms","Moz","O"];Object.keys(No).forEach(function(e){km.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),No[t]=No[e]})});function vd(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||No.hasOwnProperty(e)&&No[e]?(""+t).trim():t+"px"}function wd(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=vd(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var bm=Je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Aa(e,t){if(t){if(bm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(J(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(J(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(J(61))}if(t.style!=null&&typeof t.style!="object")throw Error(J(62))}}function La(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ma=null;function Di(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ua=null,Wr=null,Vr=null;function Gu(e){if(e=rl(e)){if(typeof Ua!="function")throw Error(J(280));var t=e.stateNode;t&&(t=Cs(t),Ua(e.stateNode,e.type,t))}}function Cd(e){Wr?Vr?Vr.push(e):Vr=[e]:Wr=e}function Ed(){if(Wr){var e=Wr,t=Vr;if(Vr=Wr=null,Gu(e),t)for(e=0;e<t.length;e++)Gu(t[e])}}function Sd(e,t){return e(t)}function Td(){}var Ys=!1;function kd(e,t,n){if(Ys)return e(t,n);Ys=!0;try{return Sd(e,t,n)}finally{Ys=!1,(Wr!==null||Vr!==null)&&(Td(),Ed())}}function Uo(e,t){var n=e.stateNode;if(n===null)return null;var r=Cs(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(J(231,t,typeof n));return n}var za=!1;if(En)try{var ho={};Object.defineProperty(ho,"passive",{get:function(){za=!0}}),window.addEventListener("test",ho,ho),window.removeEventListener("test",ho,ho)}catch{za=!1}function Nm(e,t,n,r,o,l,a,i,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(x){this.onError(x)}}var jo=!1,Vl=null,Hl=!1,Fa=null,jm={onError:function(e){jo=!0,Vl=e}};function _m(e,t,n,r,o,l,a,i,u){jo=!1,Vl=null,Nm.apply(jm,arguments)}function Im(e,t,n,r,o,l,a,i,u){if(_m.apply(this,arguments),jo){if(jo){var c=Vl;jo=!1,Vl=null}else throw Error(J(198));Hl||(Hl=!0,Fa=c)}}function vr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function bd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Wu(e){if(vr(e)!==e)throw Error(J(188))}function Dm(e){var t=e.alternate;if(!t){if(t=vr(e),t===null)throw Error(J(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var l=o.alternate;if(l===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===n)return Wu(o),e;if(l===r)return Wu(o),t;l=l.sibling}throw Error(J(188))}if(n.return!==r.return)n=o,r=l;else{for(var a=!1,i=o.child;i;){if(i===n){a=!0,n=o,r=l;break}if(i===r){a=!0,r=o,n=l;break}i=i.sibling}if(!a){for(i=l.child;i;){if(i===n){a=!0,n=l,r=o;break}if(i===r){a=!0,r=l,n=o;break}i=i.sibling}if(!a)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?e:t}function Nd(e){return e=Dm(e),e!==null?jd(e):null}function jd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=jd(e);if(t!==null)return t;e=e.sibling}return null}var _d=Pt.unstable_scheduleCallback,Vu=Pt.unstable_cancelCallback,Rm=Pt.unstable_shouldYield,Om=Pt.unstable_requestPaint,Ze=Pt.unstable_now,Pm=Pt.unstable_getCurrentPriorityLevel,Ri=Pt.unstable_ImmediatePriority,Id=Pt.unstable_UserBlockingPriority,Kl=Pt.unstable_NormalPriority,Am=Pt.unstable_LowPriority,Dd=Pt.unstable_IdlePriority,gs=null,cn=null;function Lm(e){if(cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(gs,e,void 0,(e.current.flags&128)===128)}catch{}}var nn=Math.clz32?Math.clz32:zm,Mm=Math.log,Um=Math.LN2;function zm(e){return e>>>=0,e===0?32:31-(Mm(e)/Um|0)|0}var xl=64,vl=4194304;function To(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Jl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,l=e.pingedLanes,a=n&268435455;if(a!==0){var i=a&~o;i!==0?r=To(i):(l&=a,l!==0&&(r=To(l)))}else a=n&~o,a!==0?r=To(a):l!==0&&(r=To(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,l=t&-t,o>=l||o===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-nn(t),o=1<<n,r|=e[n],t&=~o;return r}function Fm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bm(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,l=e.pendingLanes;0<l;){var a=31-nn(l),i=1<<a,u=o[a];u===-1?(!(i&n)||i&r)&&(o[a]=Fm(i,t)):u<=t&&(e.expiredLanes|=i),l&=~i}}function Ba(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Rd(){var e=xl;return xl<<=1,!(xl&4194240)&&(xl=64),e}function qs(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function tl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-nn(t),e[t]=n}function $m(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-nn(n),l=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~l}}function Oi(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-nn(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var Ae=0;function Od(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Pd,Pi,Ad,Ld,Md,$a=!1,wl=[],Bn=null,$n=null,Gn=null,zo=new Map,Fo=new Map,Ln=[],Gm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hu(e,t){switch(e){case"focusin":case"focusout":Bn=null;break;case"dragenter":case"dragleave":$n=null;break;case"mouseover":case"mouseout":Gn=null;break;case"pointerover":case"pointerout":zo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fo.delete(t.pointerId)}}function yo(e,t,n,r,o,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[o]},t!==null&&(t=rl(t),t!==null&&Pi(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Wm(e,t,n,r,o){switch(t){case"focusin":return Bn=yo(Bn,e,t,n,r,o),!0;case"dragenter":return $n=yo($n,e,t,n,r,o),!0;case"mouseover":return Gn=yo(Gn,e,t,n,r,o),!0;case"pointerover":var l=o.pointerId;return zo.set(l,yo(zo.get(l)||null,e,t,n,r,o)),!0;case"gotpointercapture":return l=o.pointerId,Fo.set(l,yo(Fo.get(l)||null,e,t,n,r,o)),!0}return!1}function Ud(e){var t=ir(e.target);if(t!==null){var n=vr(t);if(n!==null){if(t=n.tag,t===13){if(t=bd(n),t!==null){e.blockedOn=t,Md(e.priority,function(){Ad(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ol(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ga(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ma=r,n.target.dispatchEvent(r),Ma=null}else return t=rl(n),t!==null&&Pi(t),e.blockedOn=n,!1;t.shift()}return!0}function Ku(e,t,n){Ol(e)&&n.delete(t)}function Vm(){$a=!1,Bn!==null&&Ol(Bn)&&(Bn=null),$n!==null&&Ol($n)&&($n=null),Gn!==null&&Ol(Gn)&&(Gn=null),zo.forEach(Ku),Fo.forEach(Ku)}function go(e,t){e.blockedOn===t&&(e.blockedOn=null,$a||($a=!0,Pt.unstable_scheduleCallback(Pt.unstable_NormalPriority,Vm)))}function Bo(e){function t(o){return go(o,e)}if(0<wl.length){go(wl[0],e);for(var n=1;n<wl.length;n++){var r=wl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Bn!==null&&go(Bn,e),$n!==null&&go($n,e),Gn!==null&&go(Gn,e),zo.forEach(t),Fo.forEach(t),n=0;n<Ln.length;n++)r=Ln[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ln.length&&(n=Ln[0],n.blockedOn===null);)Ud(n),n.blockedOn===null&&Ln.shift()}var Hr=bn.ReactCurrentBatchConfig,Yl=!0;function Hm(e,t,n,r){var o=Ae,l=Hr.transition;Hr.transition=null;try{Ae=1,Ai(e,t,n,r)}finally{Ae=o,Hr.transition=l}}function Km(e,t,n,r){var o=Ae,l=Hr.transition;Hr.transition=null;try{Ae=4,Ai(e,t,n,r)}finally{Ae=o,Hr.transition=l}}function Ai(e,t,n,r){if(Yl){var o=Ga(e,t,n,r);if(o===null)sa(e,t,r,ql,n),Hu(e,r);else if(Wm(o,e,t,n,r))r.stopPropagation();else if(Hu(e,r),t&4&&-1<Gm.indexOf(e)){for(;o!==null;){var l=rl(o);if(l!==null&&Pd(l),l=Ga(e,t,n,r),l===null&&sa(e,t,r,ql,n),l===o)break;o=l}o!==null&&r.stopPropagation()}else sa(e,t,r,null,n)}}var ql=null;function Ga(e,t,n,r){if(ql=null,e=Di(r),e=ir(e),e!==null)if(t=vr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=bd(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ql=e,null}function zd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Pm()){case Ri:return 1;case Id:return 4;case Kl:case Am:return 16;case Dd:return 536870912;default:return 16}default:return 16}}var Un=null,Li=null,Pl=null;function Fd(){if(Pl)return Pl;var e,t=Li,n=t.length,r,o="value"in Un?Un.value:Un.textContent,l=o.length;for(e=0;e<n&&t[e]===o[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===o[l-r];r++);return Pl=o.slice(e,1<r?1-r:void 0)}function Al(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Cl(){return!0}function Ju(){return!1}function Lt(e){function t(n,r,o,l,a){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=l,this.target=a,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(l):l[i]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Cl:Ju,this.isPropagationStopped=Ju,this}return Je(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Cl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Cl)},persist:function(){},isPersistent:Cl}),t}var ro={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mi=Lt(ro),nl=Je({},ro,{view:0,detail:0}),Jm=Lt(nl),Qs,Xs,xo,xs=Je({},nl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ui,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xo&&(xo&&e.type==="mousemove"?(Qs=e.screenX-xo.screenX,Xs=e.screenY-xo.screenY):Xs=Qs=0,xo=e),Qs)},movementY:function(e){return"movementY"in e?e.movementY:Xs}}),Yu=Lt(xs),Ym=Je({},xs,{dataTransfer:0}),qm=Lt(Ym),Qm=Je({},nl,{relatedTarget:0}),Zs=Lt(Qm),Xm=Je({},ro,{animationName:0,elapsedTime:0,pseudoElement:0}),Zm=Lt(Xm),eh=Je({},ro,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),th=Lt(eh),nh=Je({},ro,{data:0}),qu=Lt(nh),rh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=lh[e])?!!t[e]:!1}function Ui(){return sh}var ah=Je({},nl,{key:function(e){if(e.key){var t=rh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Al(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?oh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ui,charCode:function(e){return e.type==="keypress"?Al(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Al(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ih=Lt(ah),uh=Je({},xs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qu=Lt(uh),ch=Je({},nl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ui}),dh=Lt(ch),fh=Je({},ro,{propertyName:0,elapsedTime:0,pseudoElement:0}),ph=Lt(fh),mh=Je({},xs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),hh=Lt(mh),yh=[9,13,27,32],zi=En&&"CompositionEvent"in window,_o=null;En&&"documentMode"in document&&(_o=document.documentMode);var gh=En&&"TextEvent"in window&&!_o,Bd=En&&(!zi||_o&&8<_o&&11>=_o),Xu=" ",Zu=!1;function $d(e,t){switch(e){case"keyup":return yh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Dr=!1;function xh(e,t){switch(e){case"compositionend":return Gd(t);case"keypress":return t.which!==32?null:(Zu=!0,Xu);case"textInput":return e=t.data,e===Xu&&Zu?null:e;default:return null}}function vh(e,t){if(Dr)return e==="compositionend"||!zi&&$d(e,t)?(e=Fd(),Pl=Li=Un=null,Dr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bd&&t.locale!=="ko"?null:t.data;default:return null}}var wh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ec(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!wh[e.type]:t==="textarea"}function Wd(e,t,n,r){Cd(r),t=Ql(t,"onChange"),0<t.length&&(n=new Mi("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Io=null,$o=null;function Ch(e){tf(e,0)}function vs(e){var t=Pr(e);if(md(t))return e}function Eh(e,t){if(e==="change")return t}var Vd=!1;if(En){var ea;if(En){var ta="oninput"in document;if(!ta){var tc=document.createElement("div");tc.setAttribute("oninput","return;"),ta=typeof tc.oninput=="function"}ea=ta}else ea=!1;Vd=ea&&(!document.documentMode||9<document.documentMode)}function nc(){Io&&(Io.detachEvent("onpropertychange",Hd),$o=Io=null)}function Hd(e){if(e.propertyName==="value"&&vs($o)){var t=[];Wd(t,$o,e,Di(e)),kd(Ch,t)}}function Sh(e,t,n){e==="focusin"?(nc(),Io=t,$o=n,Io.attachEvent("onpropertychange",Hd)):e==="focusout"&&nc()}function Th(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return vs($o)}function kh(e,t){if(e==="click")return vs(t)}function bh(e,t){if(e==="input"||e==="change")return vs(t)}function Nh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var on=typeof Object.is=="function"?Object.is:Nh;function Go(e,t){if(on(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!ka.call(t,o)||!on(e[o],t[o]))return!1}return!0}function rc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function oc(e,t){var n=rc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=rc(n)}}function Kd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Kd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Jd(){for(var e=window,t=Wl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Wl(e.document)}return t}function Fi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function jh(e){var t=Jd(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Kd(n.ownerDocument.documentElement,n)){if(r!==null&&Fi(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,l=Math.min(r.start,o);r=r.end===void 0?l:Math.min(r.end,o),!e.extend&&l>r&&(o=r,r=l,l=o),o=oc(n,l);var a=oc(n,r);o&&a&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var _h=En&&"documentMode"in document&&11>=document.documentMode,Rr=null,Wa=null,Do=null,Va=!1;function lc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Va||Rr==null||Rr!==Wl(r)||(r=Rr,"selectionStart"in r&&Fi(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Do&&Go(Do,r)||(Do=r,r=Ql(Wa,"onSelect"),0<r.length&&(t=new Mi("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Rr)))}function El(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Or={animationend:El("Animation","AnimationEnd"),animationiteration:El("Animation","AnimationIteration"),animationstart:El("Animation","AnimationStart"),transitionend:El("Transition","TransitionEnd")},na={},Yd={};En&&(Yd=document.createElement("div").style,"AnimationEvent"in window||(delete Or.animationend.animation,delete Or.animationiteration.animation,delete Or.animationstart.animation),"TransitionEvent"in window||delete Or.transitionend.transition);function ws(e){if(na[e])return na[e];if(!Or[e])return e;var t=Or[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Yd)return na[e]=t[n];return e}var qd=ws("animationend"),Qd=ws("animationiteration"),Xd=ws("animationstart"),Zd=ws("transitionend"),ef=new Map,sc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qn(e,t){ef.set(e,t),xr(t,[e])}for(var ra=0;ra<sc.length;ra++){var oa=sc[ra],Ih=oa.toLowerCase(),Dh=oa[0].toUpperCase()+oa.slice(1);Qn(Ih,"on"+Dh)}Qn(qd,"onAnimationEnd");Qn(Qd,"onAnimationIteration");Qn(Xd,"onAnimationStart");Qn("dblclick","onDoubleClick");Qn("focusin","onFocus");Qn("focusout","onBlur");Qn(Zd,"onTransitionEnd");Yr("onMouseEnter",["mouseout","mouseover"]);Yr("onMouseLeave",["mouseout","mouseover"]);Yr("onPointerEnter",["pointerout","pointerover"]);Yr("onPointerLeave",["pointerout","pointerover"]);xr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xr("onBeforeInput",["compositionend","keypress","textInput","paste"]);xr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ko="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rh=new Set("cancel close invalid load scroll toggle".split(" ").concat(ko));function ac(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Im(r,t,void 0,e),e.currentTarget=null}function tf(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var a=r.length-1;0<=a;a--){var i=r[a],u=i.instance,c=i.currentTarget;if(i=i.listener,u!==l&&o.isPropagationStopped())break e;ac(o,i,c),l=u}else for(a=0;a<r.length;a++){if(i=r[a],u=i.instance,c=i.currentTarget,i=i.listener,u!==l&&o.isPropagationStopped())break e;ac(o,i,c),l=u}}}if(Hl)throw e=Fa,Hl=!1,Fa=null,e}function Be(e,t){var n=t[qa];n===void 0&&(n=t[qa]=new Set);var r=e+"__bubble";n.has(r)||(nf(t,e,2,!1),n.add(r))}function la(e,t,n){var r=0;t&&(r|=4),nf(n,e,r,t)}var Sl="_reactListening"+Math.random().toString(36).slice(2);function Wo(e){if(!e[Sl]){e[Sl]=!0,ud.forEach(function(n){n!=="selectionchange"&&(Rh.has(n)||la(n,!1,e),la(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Sl]||(t[Sl]=!0,la("selectionchange",!1,t))}}function nf(e,t,n,r){switch(zd(t)){case 1:var o=Hm;break;case 4:o=Km;break;default:o=Ai}n=o.bind(null,t,n,e),o=void 0,!za||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function sa(e,t,n,r,o){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var i=r.stateNode.containerInfo;if(i===o||i.nodeType===8&&i.parentNode===o)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===o||u.nodeType===8&&u.parentNode===o))return;a=a.return}for(;i!==null;){if(a=ir(i),a===null)return;if(u=a.tag,u===5||u===6){r=l=a;continue e}i=i.parentNode}}r=r.return}kd(function(){var c=l,x=Di(n),f=[];e:{var p=ef.get(e);if(p!==void 0){var T=Mi,S=e;switch(e){case"keypress":if(Al(n)===0)break e;case"keydown":case"keyup":T=ih;break;case"focusin":S="focus",T=Zs;break;case"focusout":S="blur",T=Zs;break;case"beforeblur":case"afterblur":T=Zs;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Yu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=qm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=dh;break;case qd:case Qd:case Xd:T=Zm;break;case Zd:T=ph;break;case"scroll":T=Jm;break;case"wheel":T=hh;break;case"copy":case"cut":case"paste":T=th;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Qu}var I=(t&4)!==0,z=!I&&e==="scroll",d=I?p!==null?p+"Capture":null:p;I=[];for(var m=c,g;m!==null;){g=m;var C=g.stateNode;if(g.tag===5&&C!==null&&(g=C,d!==null&&(C=Uo(m,d),C!=null&&I.push(Vo(m,C,g)))),z)break;m=m.return}0<I.length&&(p=new T(p,S,null,n,x),f.push({event:p,listeners:I}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",T=e==="mouseout"||e==="pointerout",p&&n!==Ma&&(S=n.relatedTarget||n.fromElement)&&(ir(S)||S[Sn]))break e;if((T||p)&&(p=x.window===x?x:(p=x.ownerDocument)?p.defaultView||p.parentWindow:window,T?(S=n.relatedTarget||n.toElement,T=c,S=S?ir(S):null,S!==null&&(z=vr(S),S!==z||S.tag!==5&&S.tag!==6)&&(S=null)):(T=null,S=c),T!==S)){if(I=Yu,C="onMouseLeave",d="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(I=Qu,C="onPointerLeave",d="onPointerEnter",m="pointer"),z=T==null?p:Pr(T),g=S==null?p:Pr(S),p=new I(C,m+"leave",T,n,x),p.target=z,p.relatedTarget=g,C=null,ir(x)===c&&(I=new I(d,m+"enter",S,n,x),I.target=g,I.relatedTarget=z,C=I),z=C,T&&S)t:{for(I=T,d=S,m=0,g=I;g;g=jr(g))m++;for(g=0,C=d;C;C=jr(C))g++;for(;0<m-g;)I=jr(I),m--;for(;0<g-m;)d=jr(d),g--;for(;m--;){if(I===d||d!==null&&I===d.alternate)break t;I=jr(I),d=jr(d)}I=null}else I=null;T!==null&&ic(f,p,T,I,!1),S!==null&&z!==null&&ic(f,z,S,I,!0)}}e:{if(p=c?Pr(c):window,T=p.nodeName&&p.nodeName.toLowerCase(),T==="select"||T==="input"&&p.type==="file")var N=Eh;else if(ec(p))if(Vd)N=bh;else{N=Th;var P=Sh}else(T=p.nodeName)&&T.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(N=kh);if(N&&(N=N(e,c))){Wd(f,N,n,x);break e}P&&P(e,p,c),e==="focusout"&&(P=p._wrapperState)&&P.controlled&&p.type==="number"&&Ra(p,"number",p.value)}switch(P=c?Pr(c):window,e){case"focusin":(ec(P)||P.contentEditable==="true")&&(Rr=P,Wa=c,Do=null);break;case"focusout":Do=Wa=Rr=null;break;case"mousedown":Va=!0;break;case"contextmenu":case"mouseup":case"dragend":Va=!1,lc(f,n,x);break;case"selectionchange":if(_h)break;case"keydown":case"keyup":lc(f,n,x)}var j;if(zi)e:{switch(e){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else Dr?$d(e,n)&&(B="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(B="onCompositionStart");B&&(Bd&&n.locale!=="ko"&&(Dr||B!=="onCompositionStart"?B==="onCompositionEnd"&&Dr&&(j=Fd()):(Un=x,Li="value"in Un?Un.value:Un.textContent,Dr=!0)),P=Ql(c,B),0<P.length&&(B=new qu(B,e,null,n,x),f.push({event:B,listeners:P}),j?B.data=j:(j=Gd(n),j!==null&&(B.data=j)))),(j=gh?xh(e,n):vh(e,n))&&(c=Ql(c,"onBeforeInput"),0<c.length&&(x=new qu("onBeforeInput","beforeinput",null,n,x),f.push({event:x,listeners:c}),x.data=j))}tf(f,t)})}function Vo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ql(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,l=o.stateNode;o.tag===5&&l!==null&&(o=l,l=Uo(e,n),l!=null&&r.unshift(Vo(e,l,o)),l=Uo(e,t),l!=null&&r.push(Vo(e,l,o))),e=e.return}return r}function jr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ic(e,t,n,r,o){for(var l=t._reactName,a=[];n!==null&&n!==r;){var i=n,u=i.alternate,c=i.stateNode;if(u!==null&&u===r)break;i.tag===5&&c!==null&&(i=c,o?(u=Uo(n,l),u!=null&&a.unshift(Vo(n,u,i))):o||(u=Uo(n,l),u!=null&&a.push(Vo(n,u,i)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Oh=/\r\n?/g,Ph=/\u0000|\uFFFD/g;function uc(e){return(typeof e=="string"?e:""+e).replace(Oh,`
`).replace(Ph,"")}function Tl(e,t,n){if(t=uc(t),uc(e)!==t&&n)throw Error(J(425))}function Xl(){}var Ha=null,Ka=null;function Ja(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ya=typeof setTimeout=="function"?setTimeout:void 0,Ah=typeof clearTimeout=="function"?clearTimeout:void 0,cc=typeof Promise=="function"?Promise:void 0,Lh=typeof queueMicrotask=="function"?queueMicrotask:typeof cc<"u"?function(e){return cc.resolve(null).then(e).catch(Mh)}:Ya;function Mh(e){setTimeout(function(){throw e})}function aa(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),Bo(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);Bo(t)}function Wn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function dc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var oo=Math.random().toString(36).slice(2),un="__reactFiber$"+oo,Ho="__reactProps$"+oo,Sn="__reactContainer$"+oo,qa="__reactEvents$"+oo,Uh="__reactListeners$"+oo,zh="__reactHandles$"+oo;function ir(e){var t=e[un];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Sn]||n[un]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=dc(e);e!==null;){if(n=e[un])return n;e=dc(e)}return t}e=n,n=e.parentNode}return null}function rl(e){return e=e[un]||e[Sn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Pr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(J(33))}function Cs(e){return e[Ho]||null}var Qa=[],Ar=-1;function Xn(e){return{current:e}}function $e(e){0>Ar||(e.current=Qa[Ar],Qa[Ar]=null,Ar--)}function ze(e,t){Ar++,Qa[Ar]=e.current,e.current=t}var qn={},gt=Xn(qn),kt=Xn(!1),pr=qn;function qr(e,t){var n=e.type.contextTypes;if(!n)return qn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},l;for(l in n)o[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function bt(e){return e=e.childContextTypes,e!=null}function Zl(){$e(kt),$e(gt)}function fc(e,t,n){if(gt.current!==qn)throw Error(J(168));ze(gt,t),ze(kt,n)}function rf(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(J(108,Sm(e)||"Unknown",o));return Je({},n,r)}function es(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||qn,pr=gt.current,ze(gt,e),ze(kt,kt.current),!0}function pc(e,t,n){var r=e.stateNode;if(!r)throw Error(J(169));n?(e=rf(e,t,pr),r.__reactInternalMemoizedMergedChildContext=e,$e(kt),$e(gt),ze(gt,e)):$e(kt),ze(kt,n)}var gn=null,Es=!1,ia=!1;function of(e){gn===null?gn=[e]:gn.push(e)}function Fh(e){Es=!0,of(e)}function Zn(){if(!ia&&gn!==null){ia=!0;var e=0,t=Ae;try{var n=gn;for(Ae=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}gn=null,Es=!1}catch(o){throw gn!==null&&(gn=gn.slice(e+1)),_d(Ri,Zn),o}finally{Ae=t,ia=!1}}return null}var Lr=[],Mr=0,ts=null,ns=0,Bt=[],$t=0,mr=null,xn=1,vn="";function sr(e,t){Lr[Mr++]=ns,Lr[Mr++]=ts,ts=e,ns=t}function lf(e,t,n){Bt[$t++]=xn,Bt[$t++]=vn,Bt[$t++]=mr,mr=e;var r=xn;e=vn;var o=32-nn(r)-1;r&=~(1<<o),n+=1;var l=32-nn(t)+o;if(30<l){var a=o-o%5;l=(r&(1<<a)-1).toString(32),r>>=a,o-=a,xn=1<<32-nn(t)+o|n<<o|r,vn=l+e}else xn=1<<l|n<<o|r,vn=e}function Bi(e){e.return!==null&&(sr(e,1),lf(e,1,0))}function $i(e){for(;e===ts;)ts=Lr[--Mr],Lr[Mr]=null,ns=Lr[--Mr],Lr[Mr]=null;for(;e===mr;)mr=Bt[--$t],Bt[$t]=null,vn=Bt[--$t],Bt[$t]=null,xn=Bt[--$t],Bt[$t]=null}var Ot=null,Dt=null,We=!1,tn=null;function sf(e,t){var n=Gt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function mc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ot=e,Dt=Wn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ot=e,Dt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=mr!==null?{id:xn,overflow:vn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Gt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ot=e,Dt=null,!0):!1;default:return!1}}function Xa(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Za(e){if(We){var t=Dt;if(t){var n=t;if(!mc(e,t)){if(Xa(e))throw Error(J(418));t=Wn(n.nextSibling);var r=Ot;t&&mc(e,t)?sf(r,n):(e.flags=e.flags&-4097|2,We=!1,Ot=e)}}else{if(Xa(e))throw Error(J(418));e.flags=e.flags&-4097|2,We=!1,Ot=e}}}function hc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ot=e}function kl(e){if(e!==Ot)return!1;if(!We)return hc(e),We=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ja(e.type,e.memoizedProps)),t&&(t=Dt)){if(Xa(e))throw af(),Error(J(418));for(;t;)sf(e,t),t=Wn(t.nextSibling)}if(hc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(J(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Dt=Wn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Dt=null}}else Dt=Ot?Wn(e.stateNode.nextSibling):null;return!0}function af(){for(var e=Dt;e;)e=Wn(e.nextSibling)}function Qr(){Dt=Ot=null,We=!1}function Gi(e){tn===null?tn=[e]:tn.push(e)}var Bh=bn.ReactCurrentBatchConfig;function vo(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var r=n.stateNode}if(!r)throw Error(J(147,e));var o=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(a){var i=o.refs;a===null?delete i[l]:i[l]=a},t._stringRef=l,t)}if(typeof e!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,e))}return e}function bl(e,t){throw e=Object.prototype.toString.call(t),Error(J(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yc(e){var t=e._init;return t(e._payload)}function uf(e){function t(d,m){if(e){var g=d.deletions;g===null?(d.deletions=[m],d.flags|=16):g.push(m)}}function n(d,m){if(!e)return null;for(;m!==null;)t(d,m),m=m.sibling;return null}function r(d,m){for(d=new Map;m!==null;)m.key!==null?d.set(m.key,m):d.set(m.index,m),m=m.sibling;return d}function o(d,m){return d=Jn(d,m),d.index=0,d.sibling=null,d}function l(d,m,g){return d.index=g,e?(g=d.alternate,g!==null?(g=g.index,g<m?(d.flags|=2,m):g):(d.flags|=2,m)):(d.flags|=1048576,m)}function a(d){return e&&d.alternate===null&&(d.flags|=2),d}function i(d,m,g,C){return m===null||m.tag!==6?(m=ha(g,d.mode,C),m.return=d,m):(m=o(m,g),m.return=d,m)}function u(d,m,g,C){var N=g.type;return N===Ir?x(d,m,g.props.children,C,g.key):m!==null&&(m.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Pn&&yc(N)===m.type)?(C=o(m,g.props),C.ref=vo(d,m,g),C.return=d,C):(C=$l(g.type,g.key,g.props,null,d.mode,C),C.ref=vo(d,m,g),C.return=d,C)}function c(d,m,g,C){return m===null||m.tag!==4||m.stateNode.containerInfo!==g.containerInfo||m.stateNode.implementation!==g.implementation?(m=ya(g,d.mode,C),m.return=d,m):(m=o(m,g.children||[]),m.return=d,m)}function x(d,m,g,C,N){return m===null||m.tag!==7?(m=fr(g,d.mode,C,N),m.return=d,m):(m=o(m,g),m.return=d,m)}function f(d,m,g){if(typeof m=="string"&&m!==""||typeof m=="number")return m=ha(""+m,d.mode,g),m.return=d,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case hl:return g=$l(m.type,m.key,m.props,null,d.mode,g),g.ref=vo(d,null,m),g.return=d,g;case _r:return m=ya(m,d.mode,g),m.return=d,m;case Pn:var C=m._init;return f(d,C(m._payload),g)}if(So(m)||mo(m))return m=fr(m,d.mode,g,null),m.return=d,m;bl(d,m)}return null}function p(d,m,g,C){var N=m!==null?m.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return N!==null?null:i(d,m,""+g,C);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case hl:return g.key===N?u(d,m,g,C):null;case _r:return g.key===N?c(d,m,g,C):null;case Pn:return N=g._init,p(d,m,N(g._payload),C)}if(So(g)||mo(g))return N!==null?null:x(d,m,g,C,null);bl(d,g)}return null}function T(d,m,g,C,N){if(typeof C=="string"&&C!==""||typeof C=="number")return d=d.get(g)||null,i(m,d,""+C,N);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case hl:return d=d.get(C.key===null?g:C.key)||null,u(m,d,C,N);case _r:return d=d.get(C.key===null?g:C.key)||null,c(m,d,C,N);case Pn:var P=C._init;return T(d,m,g,P(C._payload),N)}if(So(C)||mo(C))return d=d.get(g)||null,x(m,d,C,N,null);bl(m,C)}return null}function S(d,m,g,C){for(var N=null,P=null,j=m,B=m=0,ie=null;j!==null&&B<g.length;B++){j.index>B?(ie=j,j=null):ie=j.sibling;var $=p(d,j,g[B],C);if($===null){j===null&&(j=ie);break}e&&j&&$.alternate===null&&t(d,j),m=l($,m,B),P===null?N=$:P.sibling=$,P=$,j=ie}if(B===g.length)return n(d,j),We&&sr(d,B),N;if(j===null){for(;B<g.length;B++)j=f(d,g[B],C),j!==null&&(m=l(j,m,B),P===null?N=j:P.sibling=j,P=j);return We&&sr(d,B),N}for(j=r(d,j);B<g.length;B++)ie=T(j,d,B,g[B],C),ie!==null&&(e&&ie.alternate!==null&&j.delete(ie.key===null?B:ie.key),m=l(ie,m,B),P===null?N=ie:P.sibling=ie,P=ie);return e&&j.forEach(function(fe){return t(d,fe)}),We&&sr(d,B),N}function I(d,m,g,C){var N=mo(g);if(typeof N!="function")throw Error(J(150));if(g=N.call(g),g==null)throw Error(J(151));for(var P=N=null,j=m,B=m=0,ie=null,$=g.next();j!==null&&!$.done;B++,$=g.next()){j.index>B?(ie=j,j=null):ie=j.sibling;var fe=p(d,j,$.value,C);if(fe===null){j===null&&(j=ie);break}e&&j&&fe.alternate===null&&t(d,j),m=l(fe,m,B),P===null?N=fe:P.sibling=fe,P=fe,j=ie}if($.done)return n(d,j),We&&sr(d,B),N;if(j===null){for(;!$.done;B++,$=g.next())$=f(d,$.value,C),$!==null&&(m=l($,m,B),P===null?N=$:P.sibling=$,P=$);return We&&sr(d,B),N}for(j=r(d,j);!$.done;B++,$=g.next())$=T(j,d,B,$.value,C),$!==null&&(e&&$.alternate!==null&&j.delete($.key===null?B:$.key),m=l($,m,B),P===null?N=$:P.sibling=$,P=$);return e&&j.forEach(function(ke){return t(d,ke)}),We&&sr(d,B),N}function z(d,m,g,C){if(typeof g=="object"&&g!==null&&g.type===Ir&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case hl:e:{for(var N=g.key,P=m;P!==null;){if(P.key===N){if(N=g.type,N===Ir){if(P.tag===7){n(d,P.sibling),m=o(P,g.props.children),m.return=d,d=m;break e}}else if(P.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Pn&&yc(N)===P.type){n(d,P.sibling),m=o(P,g.props),m.ref=vo(d,P,g),m.return=d,d=m;break e}n(d,P);break}else t(d,P);P=P.sibling}g.type===Ir?(m=fr(g.props.children,d.mode,C,g.key),m.return=d,d=m):(C=$l(g.type,g.key,g.props,null,d.mode,C),C.ref=vo(d,m,g),C.return=d,d=C)}return a(d);case _r:e:{for(P=g.key;m!==null;){if(m.key===P)if(m.tag===4&&m.stateNode.containerInfo===g.containerInfo&&m.stateNode.implementation===g.implementation){n(d,m.sibling),m=o(m,g.children||[]),m.return=d,d=m;break e}else{n(d,m);break}else t(d,m);m=m.sibling}m=ya(g,d.mode,C),m.return=d,d=m}return a(d);case Pn:return P=g._init,z(d,m,P(g._payload),C)}if(So(g))return S(d,m,g,C);if(mo(g))return I(d,m,g,C);bl(d,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,m!==null&&m.tag===6?(n(d,m.sibling),m=o(m,g),m.return=d,d=m):(n(d,m),m=ha(g,d.mode,C),m.return=d,d=m),a(d)):n(d,m)}return z}var Xr=uf(!0),cf=uf(!1),rs=Xn(null),os=null,Ur=null,Wi=null;function Vi(){Wi=Ur=os=null}function Hi(e){var t=rs.current;$e(rs),e._currentValue=t}function ei(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Kr(e,t){os=e,Wi=Ur=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Tt=!0),e.firstContext=null)}function Vt(e){var t=e._currentValue;if(Wi!==e)if(e={context:e,memoizedValue:t,next:null},Ur===null){if(os===null)throw Error(J(308));Ur=e,os.dependencies={lanes:0,firstContext:e}}else Ur=Ur.next=e;return t}var ur=null;function Ki(e){ur===null?ur=[e]:ur.push(e)}function df(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,Ki(t)):(n.next=o.next,o.next=n),t.interleaved=n,Tn(e,r)}function Tn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var An=!1;function Ji(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ff(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function wn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Oe&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Tn(e,n)}return o=r.interleaved,o===null?(t.next=t,Ki(r)):(t.next=o.next,o.next=t),r.interleaved=t,Tn(e,n)}function Ll(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Oi(e,n)}}function gc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?o=l=a:l=l.next=a,n=n.next}while(n!==null);l===null?o=l=t:l=l.next=t}else o=l=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ls(e,t,n,r){var o=e.updateQueue;An=!1;var l=o.firstBaseUpdate,a=o.lastBaseUpdate,i=o.shared.pending;if(i!==null){o.shared.pending=null;var u=i,c=u.next;u.next=null,a===null?l=c:a.next=c,a=u;var x=e.alternate;x!==null&&(x=x.updateQueue,i=x.lastBaseUpdate,i!==a&&(i===null?x.firstBaseUpdate=c:i.next=c,x.lastBaseUpdate=u))}if(l!==null){var f=o.baseState;a=0,x=c=u=null,i=l;do{var p=i.lane,T=i.eventTime;if((r&p)===p){x!==null&&(x=x.next={eventTime:T,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var S=e,I=i;switch(p=t,T=n,I.tag){case 1:if(S=I.payload,typeof S=="function"){f=S.call(T,f,p);break e}f=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=I.payload,p=typeof S=="function"?S.call(T,f,p):S,p==null)break e;f=Je({},f,p);break e;case 2:An=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,p=o.effects,p===null?o.effects=[i]:p.push(i))}else T={eventTime:T,lane:p,tag:i.tag,payload:i.payload,callback:i.callback,next:null},x===null?(c=x=T,u=f):x=x.next=T,a|=p;if(i=i.next,i===null){if(i=o.shared.pending,i===null)break;p=i,i=p.next,p.next=null,o.lastBaseUpdate=p,o.shared.pending=null}}while(!0);if(x===null&&(u=f),o.baseState=u,o.firstBaseUpdate=c,o.lastBaseUpdate=x,t=o.shared.interleaved,t!==null){o=t;do a|=o.lane,o=o.next;while(o!==t)}else l===null&&(o.shared.lanes=0);yr|=a,e.lanes=a,e.memoizedState=f}}function xc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(J(191,o));o.call(r)}}}var ol={},dn=Xn(ol),Ko=Xn(ol),Jo=Xn(ol);function cr(e){if(e===ol)throw Error(J(174));return e}function Yi(e,t){switch(ze(Jo,t),ze(Ko,e),ze(dn,ol),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Pa(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Pa(t,e)}$e(dn),ze(dn,t)}function Zr(){$e(dn),$e(Ko),$e(Jo)}function pf(e){cr(Jo.current);var t=cr(dn.current),n=Pa(t,e.type);t!==n&&(ze(Ko,e),ze(dn,n))}function qi(e){Ko.current===e&&($e(dn),$e(Ko))}var He=Xn(0);function ss(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ua=[];function Qi(){for(var e=0;e<ua.length;e++)ua[e]._workInProgressVersionPrimary=null;ua.length=0}var Ml=bn.ReactCurrentDispatcher,ca=bn.ReactCurrentBatchConfig,hr=0,Ke=null,rt=null,st=null,as=!1,Ro=!1,Yo=0,$h=0;function mt(){throw Error(J(321))}function Xi(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!on(e[n],t[n]))return!1;return!0}function Zi(e,t,n,r,o,l){if(hr=l,Ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ml.current=e===null||e.memoizedState===null?Hh:Kh,e=n(r,o),Ro){l=0;do{if(Ro=!1,Yo=0,25<=l)throw Error(J(301));l+=1,st=rt=null,t.updateQueue=null,Ml.current=Jh,e=n(r,o)}while(Ro)}if(Ml.current=is,t=rt!==null&&rt.next!==null,hr=0,st=rt=Ke=null,as=!1,t)throw Error(J(300));return e}function eu(){var e=Yo!==0;return Yo=0,e}function an(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?Ke.memoizedState=st=e:st=st.next=e,st}function Ht(){if(rt===null){var e=Ke.alternate;e=e!==null?e.memoizedState:null}else e=rt.next;var t=st===null?Ke.memoizedState:st.next;if(t!==null)st=t,rt=e;else{if(e===null)throw Error(J(310));rt=e,e={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},st===null?Ke.memoizedState=st=e:st=st.next=e}return st}function qo(e,t){return typeof t=="function"?t(e):t}function da(e){var t=Ht(),n=t.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=e;var r=rt,o=r.baseQueue,l=n.pending;if(l!==null){if(o!==null){var a=o.next;o.next=l.next,l.next=a}r.baseQueue=o=l,n.pending=null}if(o!==null){l=o.next,r=r.baseState;var i=a=null,u=null,c=l;do{var x=c.lane;if((hr&x)===x)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:x,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(i=u=f,a=r):u=u.next=f,Ke.lanes|=x,yr|=x}c=c.next}while(c!==null&&c!==l);u===null?a=r:u.next=i,on(r,t.memoizedState)||(Tt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do l=o.lane,Ke.lanes|=l,yr|=l,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function fa(e){var t=Ht(),n=t.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,l=t.memoizedState;if(o!==null){n.pending=null;var a=o=o.next;do l=e(l,a.action),a=a.next;while(a!==o);on(l,t.memoizedState)||(Tt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function mf(){}function hf(e,t){var n=Ke,r=Ht(),o=t(),l=!on(r.memoizedState,o);if(l&&(r.memoizedState=o,Tt=!0),r=r.queue,tu(xf.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||st!==null&&st.memoizedState.tag&1){if(n.flags|=2048,Qo(9,gf.bind(null,n,r,o,t),void 0,null),at===null)throw Error(J(349));hr&30||yf(n,t,o)}return o}function yf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ke.updateQueue,t===null?(t={lastEffect:null,stores:null},Ke.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function gf(e,t,n,r){t.value=n,t.getSnapshot=r,vf(t)&&wf(e)}function xf(e,t,n){return n(function(){vf(t)&&wf(e)})}function vf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!on(e,n)}catch{return!0}}function wf(e){var t=Tn(e,1);t!==null&&rn(t,e,1,-1)}function vc(e){var t=an();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qo,lastRenderedState:e},t.queue=e,e=e.dispatch=Vh.bind(null,Ke,e),[t.memoizedState,e]}function Qo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ke.updateQueue,t===null?(t={lastEffect:null,stores:null},Ke.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Cf(){return Ht().memoizedState}function Ul(e,t,n,r){var o=an();Ke.flags|=e,o.memoizedState=Qo(1|t,n,void 0,r===void 0?null:r)}function Ss(e,t,n,r){var o=Ht();r=r===void 0?null:r;var l=void 0;if(rt!==null){var a=rt.memoizedState;if(l=a.destroy,r!==null&&Xi(r,a.deps)){o.memoizedState=Qo(t,n,l,r);return}}Ke.flags|=e,o.memoizedState=Qo(1|t,n,l,r)}function wc(e,t){return Ul(8390656,8,e,t)}function tu(e,t){return Ss(2048,8,e,t)}function Ef(e,t){return Ss(4,2,e,t)}function Sf(e,t){return Ss(4,4,e,t)}function Tf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function kf(e,t,n){return n=n!=null?n.concat([e]):null,Ss(4,4,Tf.bind(null,t,e),n)}function nu(){}function bf(e,t){var n=Ht();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Xi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Nf(e,t){var n=Ht();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Xi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function jf(e,t,n){return hr&21?(on(n,t)||(n=Rd(),Ke.lanes|=n,yr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Tt=!0),e.memoizedState=n)}function Gh(e,t){var n=Ae;Ae=n!==0&&4>n?n:4,e(!0);var r=ca.transition;ca.transition={};try{e(!1),t()}finally{Ae=n,ca.transition=r}}function _f(){return Ht().memoizedState}function Wh(e,t,n){var r=Kn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},If(e))Df(t,n);else if(n=df(e,t,n,r),n!==null){var o=vt();rn(n,e,r,o),Rf(n,t,r)}}function Vh(e,t,n){var r=Kn(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(If(e))Df(t,o);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var a=t.lastRenderedState,i=l(a,n);if(o.hasEagerState=!0,o.eagerState=i,on(i,a)){var u=t.interleaved;u===null?(o.next=o,Ki(t)):(o.next=u.next,u.next=o),t.interleaved=o;return}}catch{}finally{}n=df(e,t,o,r),n!==null&&(o=vt(),rn(n,e,r,o),Rf(n,t,r))}}function If(e){var t=e.alternate;return e===Ke||t!==null&&t===Ke}function Df(e,t){Ro=as=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Rf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Oi(e,n)}}var is={readContext:Vt,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useInsertionEffect:mt,useLayoutEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useMutableSource:mt,useSyncExternalStore:mt,useId:mt,unstable_isNewReconciler:!1},Hh={readContext:Vt,useCallback:function(e,t){return an().memoizedState=[e,t===void 0?null:t],e},useContext:Vt,useEffect:wc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ul(4194308,4,Tf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ul(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ul(4,2,e,t)},useMemo:function(e,t){var n=an();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=an();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Wh.bind(null,Ke,e),[r.memoizedState,e]},useRef:function(e){var t=an();return e={current:e},t.memoizedState=e},useState:vc,useDebugValue:nu,useDeferredValue:function(e){return an().memoizedState=e},useTransition:function(){var e=vc(!1),t=e[0];return e=Gh.bind(null,e[1]),an().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ke,o=an();if(We){if(n===void 0)throw Error(J(407));n=n()}else{if(n=t(),at===null)throw Error(J(349));hr&30||yf(r,t,n)}o.memoizedState=n;var l={value:n,getSnapshot:t};return o.queue=l,wc(xf.bind(null,r,l,e),[e]),r.flags|=2048,Qo(9,gf.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=an(),t=at.identifierPrefix;if(We){var n=vn,r=xn;n=(r&~(1<<32-nn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Yo++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=$h++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Kh={readContext:Vt,useCallback:bf,useContext:Vt,useEffect:tu,useImperativeHandle:kf,useInsertionEffect:Ef,useLayoutEffect:Sf,useMemo:Nf,useReducer:da,useRef:Cf,useState:function(){return da(qo)},useDebugValue:nu,useDeferredValue:function(e){var t=Ht();return jf(t,rt.memoizedState,e)},useTransition:function(){var e=da(qo)[0],t=Ht().memoizedState;return[e,t]},useMutableSource:mf,useSyncExternalStore:hf,useId:_f,unstable_isNewReconciler:!1},Jh={readContext:Vt,useCallback:bf,useContext:Vt,useEffect:tu,useImperativeHandle:kf,useInsertionEffect:Ef,useLayoutEffect:Sf,useMemo:Nf,useReducer:fa,useRef:Cf,useState:function(){return fa(qo)},useDebugValue:nu,useDeferredValue:function(e){var t=Ht();return rt===null?t.memoizedState=e:jf(t,rt.memoizedState,e)},useTransition:function(){var e=fa(qo)[0],t=Ht().memoizedState;return[e,t]},useMutableSource:mf,useSyncExternalStore:hf,useId:_f,unstable_isNewReconciler:!1};function Zt(e,t){if(e&&e.defaultProps){t=Je({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ti(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Je({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ts={isMounted:function(e){return(e=e._reactInternals)?vr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=vt(),o=Kn(e),l=wn(r,o);l.payload=t,n!=null&&(l.callback=n),t=Vn(e,l,o),t!==null&&(rn(t,e,o,r),Ll(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=vt(),o=Kn(e),l=wn(r,o);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=Vn(e,l,o),t!==null&&(rn(t,e,o,r),Ll(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=vt(),r=Kn(e),o=wn(n,r);o.tag=2,t!=null&&(o.callback=t),t=Vn(e,o,r),t!==null&&(rn(t,e,r,n),Ll(t,e,r))}};function Cc(e,t,n,r,o,l,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,a):t.prototype&&t.prototype.isPureReactComponent?!Go(n,r)||!Go(o,l):!0}function Of(e,t,n){var r=!1,o=qn,l=t.contextType;return typeof l=="object"&&l!==null?l=Vt(l):(o=bt(t)?pr:gt.current,r=t.contextTypes,l=(r=r!=null)?qr(e,o):qn),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ts,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=l),t}function Ec(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ts.enqueueReplaceState(t,t.state,null)}function ni(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Ji(e);var l=t.contextType;typeof l=="object"&&l!==null?o.context=Vt(l):(l=bt(t)?pr:gt.current,o.context=qr(e,l)),o.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(ti(e,t,l,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&Ts.enqueueReplaceState(o,o.state,null),ls(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function eo(e,t){try{var n="",r=t;do n+=Em(r),r=r.return;while(r);var o=n}catch(l){o=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:o,digest:null}}function pa(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ri(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Yh=typeof WeakMap=="function"?WeakMap:Map;function Pf(e,t,n){n=wn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){cs||(cs=!0,pi=r),ri(e,t)},n}function Af(e,t,n){n=wn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){ri(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){ri(e,t),typeof r!="function"&&(Hn===null?Hn=new Set([this]):Hn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Sc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Yh;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=uy.bind(null,e,t,n),t.then(e,e))}function Tc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function kc(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=wn(-1,1),t.tag=2,Vn(n,t,1))),n.lanes|=1),e)}var qh=bn.ReactCurrentOwner,Tt=!1;function xt(e,t,n,r){t.child=e===null?cf(t,null,n,r):Xr(t,e.child,n,r)}function bc(e,t,n,r,o){n=n.render;var l=t.ref;return Kr(t,o),r=Zi(e,t,n,r,l,o),n=eu(),e!==null&&!Tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,kn(e,t,o)):(We&&n&&Bi(t),t.flags|=1,xt(e,t,r,o),t.child)}function Nc(e,t,n,r,o){if(e===null){var l=n.type;return typeof l=="function"&&!cu(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,Lf(e,t,l,r,o)):(e=$l(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&o)){var a=l.memoizedProps;if(n=n.compare,n=n!==null?n:Go,n(a,r)&&e.ref===t.ref)return kn(e,t,o)}return t.flags|=1,e=Jn(l,r),e.ref=t.ref,e.return=t,t.child=e}function Lf(e,t,n,r,o){if(e!==null){var l=e.memoizedProps;if(Go(l,r)&&e.ref===t.ref)if(Tt=!1,t.pendingProps=r=l,(e.lanes&o)!==0)e.flags&131072&&(Tt=!0);else return t.lanes=e.lanes,kn(e,t,o)}return oi(e,t,n,r,o)}function Mf(e,t,n){var r=t.pendingProps,o=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(Fr,_t),_t|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ze(Fr,_t),_t|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,ze(Fr,_t),_t|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,ze(Fr,_t),_t|=r;return xt(e,t,o,n),t.child}function Uf(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function oi(e,t,n,r,o){var l=bt(n)?pr:gt.current;return l=qr(t,l),Kr(t,o),n=Zi(e,t,n,r,l,o),r=eu(),e!==null&&!Tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,kn(e,t,o)):(We&&r&&Bi(t),t.flags|=1,xt(e,t,n,o),t.child)}function jc(e,t,n,r,o){if(bt(n)){var l=!0;es(t)}else l=!1;if(Kr(t,o),t.stateNode===null)zl(e,t),Of(t,n,r),ni(t,n,r,o),r=!0;else if(e===null){var a=t.stateNode,i=t.memoizedProps;a.props=i;var u=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=Vt(c):(c=bt(n)?pr:gt.current,c=qr(t,c));var x=n.getDerivedStateFromProps,f=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==r||u!==c)&&Ec(t,a,r,c),An=!1;var p=t.memoizedState;a.state=p,ls(t,r,a,o),u=t.memoizedState,i!==r||p!==u||kt.current||An?(typeof x=="function"&&(ti(t,n,x,r),u=t.memoizedState),(i=An||Cc(t,n,i,r,p,u,c))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,r=i):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,ff(e,t),i=t.memoizedProps,c=t.type===t.elementType?i:Zt(t.type,i),a.props=c,f=t.pendingProps,p=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Vt(u):(u=bt(n)?pr:gt.current,u=qr(t,u));var T=n.getDerivedStateFromProps;(x=typeof T=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==f||p!==u)&&Ec(t,a,r,u),An=!1,p=t.memoizedState,a.state=p,ls(t,r,a,o);var S=t.memoizedState;i!==f||p!==S||kt.current||An?(typeof T=="function"&&(ti(t,n,T,r),S=t.memoizedState),(c=An||Cc(t,n,c,r,p,S,u)||!1)?(x||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,S,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,S,u)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=S),a.props=r,a.state=S,a.context=u,r=c):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return li(e,t,n,r,l,o)}function li(e,t,n,r,o,l){Uf(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return o&&pc(t,n,!1),kn(e,t,l);r=t.stateNode,qh.current=t;var i=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Xr(t,e.child,null,l),t.child=Xr(t,null,i,l)):xt(e,t,i,l),t.memoizedState=r.state,o&&pc(t,n,!0),t.child}function zf(e){var t=e.stateNode;t.pendingContext?fc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&fc(e,t.context,!1),Yi(e,t.containerInfo)}function _c(e,t,n,r,o){return Qr(),Gi(o),t.flags|=256,xt(e,t,n,r),t.child}var si={dehydrated:null,treeContext:null,retryLane:0};function ai(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ff(e,t,n){var r=t.pendingProps,o=He.current,l=!1,a=(t.flags&128)!==0,i;if((i=a)||(i=e!==null&&e.memoizedState===null?!1:(o&2)!==0),i?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),ze(He,o&1),e===null)return Za(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,l?(r=t.mode,l=t.child,a={mode:"hidden",children:a},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=a):l=Ns(a,r,0,null),e=fr(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=ai(n),t.memoizedState=si,e):ru(t,a));if(o=e.memoizedState,o!==null&&(i=o.dehydrated,i!==null))return Qh(e,t,a,r,i,o,n);if(l){l=r.fallback,a=t.mode,o=e.child,i=o.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=Jn(o,u),r.subtreeFlags=o.subtreeFlags&14680064),i!==null?l=Jn(i,l):(l=fr(l,a,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,a=e.child.memoizedState,a=a===null?ai(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},l.memoizedState=a,l.childLanes=e.childLanes&~n,t.memoizedState=si,r}return l=e.child,e=l.sibling,r=Jn(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ru(e,t){return t=Ns({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Nl(e,t,n,r){return r!==null&&Gi(r),Xr(t,e.child,null,n),e=ru(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Qh(e,t,n,r,o,l,a){if(n)return t.flags&256?(t.flags&=-257,r=pa(Error(J(422))),Nl(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,o=t.mode,r=Ns({mode:"visible",children:r.children},o,0,null),l=fr(l,o,a,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&Xr(t,e.child,null,a),t.child.memoizedState=ai(a),t.memoizedState=si,l);if(!(t.mode&1))return Nl(e,t,a,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var i=r.dgst;return r=i,l=Error(J(419)),r=pa(l,r,void 0),Nl(e,t,a,r)}if(i=(a&e.childLanes)!==0,Tt||i){if(r=at,r!==null){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|a)?0:o,o!==0&&o!==l.retryLane&&(l.retryLane=o,Tn(e,o),rn(r,e,o,-1))}return uu(),r=pa(Error(J(421))),Nl(e,t,a,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=cy.bind(null,e),o._reactRetry=t,null):(e=l.treeContext,Dt=Wn(o.nextSibling),Ot=t,We=!0,tn=null,e!==null&&(Bt[$t++]=xn,Bt[$t++]=vn,Bt[$t++]=mr,xn=e.id,vn=e.overflow,mr=t),t=ru(t,r.children),t.flags|=4096,t)}function Ic(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ei(e.return,t,n)}function ma(e,t,n,r,o){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=o)}function Bf(e,t,n){var r=t.pendingProps,o=r.revealOrder,l=r.tail;if(xt(e,t,r.children,n),r=He.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ic(e,n,t);else if(e.tag===19)Ic(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ze(He,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&ss(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),ma(t,!1,o,n,l);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&ss(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}ma(t,!0,n,null,l);break;case"together":ma(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function kn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),yr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(J(153));if(t.child!==null){for(e=t.child,n=Jn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Jn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Xh(e,t,n){switch(t.tag){case 3:zf(t),Qr();break;case 5:pf(t);break;case 1:bt(t.type)&&es(t);break;case 4:Yi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;ze(rs,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ze(He,He.current&1),t.flags|=128,null):n&t.child.childLanes?Ff(e,t,n):(ze(He,He.current&1),e=kn(e,t,n),e!==null?e.sibling:null);ze(He,He.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Bf(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ze(He,He.current),r)break;return null;case 22:case 23:return t.lanes=0,Mf(e,t,n)}return kn(e,t,n)}var $f,ii,Gf,Wf;$f=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ii=function(){};Gf=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,cr(dn.current);var l=null;switch(n){case"input":o=Ia(e,o),r=Ia(e,r),l=[];break;case"select":o=Je({},o,{value:void 0}),r=Je({},r,{value:void 0}),l=[];break;case"textarea":o=Oa(e,o),r=Oa(e,r),l=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Xl)}Aa(n,r);var a;n=null;for(c in o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var i=o[c];for(a in i)i.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Lo.hasOwnProperty(c)?l||(l=[]):(l=l||[]).push(c,null));for(c in r){var u=r[c];if(i=o!=null?o[c]:void 0,r.hasOwnProperty(c)&&u!==i&&(u!=null||i!=null))if(c==="style")if(i){for(a in i)!i.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&i[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(l||(l=[]),l.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,i=i?i.__html:void 0,u!=null&&i!==u&&(l=l||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(l=l||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Lo.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Be("scroll",e),l||i===u||(l=[])):(l=l||[]).push(c,u))}n&&(l=l||[]).push("style",n);var c=l;(t.updateQueue=c)&&(t.flags|=4)}};Wf=function(e,t,n,r){n!==r&&(t.flags|=4)};function wo(e,t){if(!We)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ht(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Zh(e,t,n){var r=t.pendingProps;switch($i(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(t),null;case 1:return bt(t.type)&&Zl(),ht(t),null;case 3:return r=t.stateNode,Zr(),$e(kt),$e(gt),Qi(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(kl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,tn!==null&&(yi(tn),tn=null))),ii(e,t),ht(t),null;case 5:qi(t);var o=cr(Jo.current);if(n=t.type,e!==null&&t.stateNode!=null)Gf(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(J(166));return ht(t),null}if(e=cr(dn.current),kl(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[un]=t,r[Ho]=l,e=(t.mode&1)!==0,n){case"dialog":Be("cancel",r),Be("close",r);break;case"iframe":case"object":case"embed":Be("load",r);break;case"video":case"audio":for(o=0;o<ko.length;o++)Be(ko[o],r);break;case"source":Be("error",r);break;case"img":case"image":case"link":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"input":zu(r,l),Be("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Be("invalid",r);break;case"textarea":Bu(r,l),Be("invalid",r)}Aa(n,l),o=null;for(var a in l)if(l.hasOwnProperty(a)){var i=l[a];a==="children"?typeof i=="string"?r.textContent!==i&&(l.suppressHydrationWarning!==!0&&Tl(r.textContent,i,e),o=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(l.suppressHydrationWarning!==!0&&Tl(r.textContent,i,e),o=["children",""+i]):Lo.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&Be("scroll",r)}switch(n){case"input":yl(r),Fu(r,l,!0);break;case"textarea":yl(r),$u(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=Xl)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=gd(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[un]=t,e[Ho]=r,$f(e,t,!1,!1),t.stateNode=e;e:{switch(a=La(n,r),n){case"dialog":Be("cancel",e),Be("close",e),o=r;break;case"iframe":case"object":case"embed":Be("load",e),o=r;break;case"video":case"audio":for(o=0;o<ko.length;o++)Be(ko[o],e);o=r;break;case"source":Be("error",e),o=r;break;case"img":case"image":case"link":Be("error",e),Be("load",e),o=r;break;case"details":Be("toggle",e),o=r;break;case"input":zu(e,r),o=Ia(e,r),Be("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=Je({},r,{value:void 0}),Be("invalid",e);break;case"textarea":Bu(e,r),o=Oa(e,r),Be("invalid",e);break;default:o=r}Aa(n,o),i=o;for(l in i)if(i.hasOwnProperty(l)){var u=i[l];l==="style"?wd(e,u):l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&xd(e,u)):l==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Mo(e,u):typeof u=="number"&&Mo(e,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Lo.hasOwnProperty(l)?u!=null&&l==="onScroll"&&Be("scroll",e):u!=null&&Ni(e,l,u,a))}switch(n){case"input":yl(e),Fu(e,r,!1);break;case"textarea":yl(e),$u(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Yn(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?Gr(e,!!r.multiple,l,!1):r.defaultValue!=null&&Gr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Xl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ht(t),null;case 6:if(e&&t.stateNode!=null)Wf(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(J(166));if(n=cr(Jo.current),cr(dn.current),kl(t)){if(r=t.stateNode,n=t.memoizedProps,r[un]=t,(l=r.nodeValue!==n)&&(e=Ot,e!==null))switch(e.tag){case 3:Tl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Tl(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[un]=t,t.stateNode=r}return ht(t),null;case 13:if($e(He),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(We&&Dt!==null&&t.mode&1&&!(t.flags&128))af(),Qr(),t.flags|=98560,l=!1;else if(l=kl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(J(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(J(317));l[un]=t}else Qr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ht(t),l=!1}else tn!==null&&(yi(tn),tn=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||He.current&1?ot===0&&(ot=3):uu())),t.updateQueue!==null&&(t.flags|=4),ht(t),null);case 4:return Zr(),ii(e,t),e===null&&Wo(t.stateNode.containerInfo),ht(t),null;case 10:return Hi(t.type._context),ht(t),null;case 17:return bt(t.type)&&Zl(),ht(t),null;case 19:if($e(He),l=t.memoizedState,l===null)return ht(t),null;if(r=(t.flags&128)!==0,a=l.rendering,a===null)if(r)wo(l,!1);else{if(ot!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=ss(e),a!==null){for(t.flags|=128,wo(l,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,a=l.alternate,a===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,l.type=a.type,e=a.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ze(He,He.current&1|2),t.child}e=e.sibling}l.tail!==null&&Ze()>to&&(t.flags|=128,r=!0,wo(l,!1),t.lanes=4194304)}else{if(!r)if(e=ss(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),wo(l,!0),l.tail===null&&l.tailMode==="hidden"&&!a.alternate&&!We)return ht(t),null}else 2*Ze()-l.renderingStartTime>to&&n!==1073741824&&(t.flags|=128,r=!0,wo(l,!1),t.lanes=4194304);l.isBackwards?(a.sibling=t.child,t.child=a):(n=l.last,n!==null?n.sibling=a:t.child=a,l.last=a)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Ze(),t.sibling=null,n=He.current,ze(He,r?n&1|2:n&1),t):(ht(t),null);case 22:case 23:return iu(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?_t&1073741824&&(ht(t),t.subtreeFlags&6&&(t.flags|=8192)):ht(t),null;case 24:return null;case 25:return null}throw Error(J(156,t.tag))}function ey(e,t){switch($i(t),t.tag){case 1:return bt(t.type)&&Zl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Zr(),$e(kt),$e(gt),Qi(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return qi(t),null;case 13:if($e(He),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(J(340));Qr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return $e(He),null;case 4:return Zr(),null;case 10:return Hi(t.type._context),null;case 22:case 23:return iu(),null;case 24:return null;default:return null}}var jl=!1,yt=!1,ty=typeof WeakSet=="function"?WeakSet:Set,ue=null;function zr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Qe(e,t,r)}else n.current=null}function ui(e,t,n){try{n()}catch(r){Qe(e,t,r)}}var Dc=!1;function ny(e,t){if(Ha=Yl,e=Jd(),Fi(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var a=0,i=-1,u=-1,c=0,x=0,f=e,p=null;t:for(;;){for(var T;f!==n||o!==0&&f.nodeType!==3||(i=a+o),f!==l||r!==0&&f.nodeType!==3||(u=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(T=f.firstChild)!==null;)p=f,f=T;for(;;){if(f===e)break t;if(p===n&&++c===o&&(i=a),p===l&&++x===r&&(u=a),(T=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=T}n=i===-1||u===-1?null:{start:i,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ka={focusedElem:e,selectionRange:n},Yl=!1,ue=t;ue!==null;)if(t=ue,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ue=e;else for(;ue!==null;){t=ue;try{var S=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var I=S.memoizedProps,z=S.memoizedState,d=t.stateNode,m=d.getSnapshotBeforeUpdate(t.elementType===t.type?I:Zt(t.type,I),z);d.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(C){Qe(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,ue=e;break}ue=t.return}return S=Dc,Dc=!1,S}function Oo(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var l=o.destroy;o.destroy=void 0,l!==void 0&&ui(t,n,l)}o=o.next}while(o!==r)}}function ks(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ci(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Vf(e){var t=e.alternate;t!==null&&(e.alternate=null,Vf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[un],delete t[Ho],delete t[qa],delete t[Uh],delete t[zh])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Hf(e){return e.tag===5||e.tag===3||e.tag===4}function Rc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Hf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function di(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Xl));else if(r!==4&&(e=e.child,e!==null))for(di(e,t,n),e=e.sibling;e!==null;)di(e,t,n),e=e.sibling}function fi(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(fi(e,t,n),e=e.sibling;e!==null;)fi(e,t,n),e=e.sibling}var ct=null,en=!1;function Rn(e,t,n){for(n=n.child;n!==null;)Kf(e,t,n),n=n.sibling}function Kf(e,t,n){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(gs,n)}catch{}switch(n.tag){case 5:yt||zr(n,t);case 6:var r=ct,o=en;ct=null,Rn(e,t,n),ct=r,en=o,ct!==null&&(en?(e=ct,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ct.removeChild(n.stateNode));break;case 18:ct!==null&&(en?(e=ct,n=n.stateNode,e.nodeType===8?aa(e.parentNode,n):e.nodeType===1&&aa(e,n),Bo(e)):aa(ct,n.stateNode));break;case 4:r=ct,o=en,ct=n.stateNode.containerInfo,en=!0,Rn(e,t,n),ct=r,en=o;break;case 0:case 11:case 14:case 15:if(!yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var l=o,a=l.destroy;l=l.tag,a!==void 0&&(l&2||l&4)&&ui(n,t,a),o=o.next}while(o!==r)}Rn(e,t,n);break;case 1:if(!yt&&(zr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){Qe(n,t,i)}Rn(e,t,n);break;case 21:Rn(e,t,n);break;case 22:n.mode&1?(yt=(r=yt)||n.memoizedState!==null,Rn(e,t,n),yt=r):Rn(e,t,n);break;default:Rn(e,t,n)}}function Oc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new ty),t.forEach(function(r){var o=dy.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Qt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var l=e,a=t,i=a;e:for(;i!==null;){switch(i.tag){case 5:ct=i.stateNode,en=!1;break e;case 3:ct=i.stateNode.containerInfo,en=!0;break e;case 4:ct=i.stateNode.containerInfo,en=!0;break e}i=i.return}if(ct===null)throw Error(J(160));Kf(l,a,o),ct=null,en=!1;var u=o.alternate;u!==null&&(u.return=null),o.return=null}catch(c){Qe(o,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Jf(t,e),t=t.sibling}function Jf(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Qt(t,e),sn(e),r&4){try{Oo(3,e,e.return),ks(3,e)}catch(I){Qe(e,e.return,I)}try{Oo(5,e,e.return)}catch(I){Qe(e,e.return,I)}}break;case 1:Qt(t,e),sn(e),r&512&&n!==null&&zr(n,n.return);break;case 5:if(Qt(t,e),sn(e),r&512&&n!==null&&zr(n,n.return),e.flags&32){var o=e.stateNode;try{Mo(o,"")}catch(I){Qe(e,e.return,I)}}if(r&4&&(o=e.stateNode,o!=null)){var l=e.memoizedProps,a=n!==null?n.memoizedProps:l,i=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{i==="input"&&l.type==="radio"&&l.name!=null&&hd(o,l),La(i,a);var c=La(i,l);for(a=0;a<u.length;a+=2){var x=u[a],f=u[a+1];x==="style"?wd(o,f):x==="dangerouslySetInnerHTML"?xd(o,f):x==="children"?Mo(o,f):Ni(o,x,f,c)}switch(i){case"input":Da(o,l);break;case"textarea":yd(o,l);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!l.multiple;var T=l.value;T!=null?Gr(o,!!l.multiple,T,!1):p!==!!l.multiple&&(l.defaultValue!=null?Gr(o,!!l.multiple,l.defaultValue,!0):Gr(o,!!l.multiple,l.multiple?[]:"",!1))}o[Ho]=l}catch(I){Qe(e,e.return,I)}}break;case 6:if(Qt(t,e),sn(e),r&4){if(e.stateNode===null)throw Error(J(162));o=e.stateNode,l=e.memoizedProps;try{o.nodeValue=l}catch(I){Qe(e,e.return,I)}}break;case 3:if(Qt(t,e),sn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Bo(t.containerInfo)}catch(I){Qe(e,e.return,I)}break;case 4:Qt(t,e),sn(e);break;case 13:Qt(t,e),sn(e),o=e.child,o.flags&8192&&(l=o.memoizedState!==null,o.stateNode.isHidden=l,!l||o.alternate!==null&&o.alternate.memoizedState!==null||(su=Ze())),r&4&&Oc(e);break;case 22:if(x=n!==null&&n.memoizedState!==null,e.mode&1?(yt=(c=yt)||x,Qt(t,e),yt=c):Qt(t,e),sn(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!x&&e.mode&1)for(ue=e,x=e.child;x!==null;){for(f=ue=x;ue!==null;){switch(p=ue,T=p.child,p.tag){case 0:case 11:case 14:case 15:Oo(4,p,p.return);break;case 1:zr(p,p.return);var S=p.stateNode;if(typeof S.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,S.props=t.memoizedProps,S.state=t.memoizedState,S.componentWillUnmount()}catch(I){Qe(r,n,I)}}break;case 5:zr(p,p.return);break;case 22:if(p.memoizedState!==null){Ac(f);continue}}T!==null?(T.return=p,ue=T):Ac(f)}x=x.sibling}e:for(x=null,f=e;;){if(f.tag===5){if(x===null){x=f;try{o=f.stateNode,c?(l=o.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(i=f.stateNode,u=f.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,i.style.display=vd("display",a))}catch(I){Qe(e,e.return,I)}}}else if(f.tag===6){if(x===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(I){Qe(e,e.return,I)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;x===f&&(x=null),f=f.return}x===f&&(x=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Qt(t,e),sn(e),r&4&&Oc(e);break;case 21:break;default:Qt(t,e),sn(e)}}function sn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Hf(n)){var r=n;break e}n=n.return}throw Error(J(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Mo(o,""),r.flags&=-33);var l=Rc(e);fi(e,l,o);break;case 3:case 4:var a=r.stateNode.containerInfo,i=Rc(e);di(e,i,a);break;default:throw Error(J(161))}}catch(u){Qe(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ry(e,t,n){ue=e,Yf(e)}function Yf(e,t,n){for(var r=(e.mode&1)!==0;ue!==null;){var o=ue,l=o.child;if(o.tag===22&&r){var a=o.memoizedState!==null||jl;if(!a){var i=o.alternate,u=i!==null&&i.memoizedState!==null||yt;i=jl;var c=yt;if(jl=a,(yt=u)&&!c)for(ue=o;ue!==null;)a=ue,u=a.child,a.tag===22&&a.memoizedState!==null?Lc(o):u!==null?(u.return=a,ue=u):Lc(o);for(;l!==null;)ue=l,Yf(l),l=l.sibling;ue=o,jl=i,yt=c}Pc(e)}else o.subtreeFlags&8772&&l!==null?(l.return=o,ue=l):Pc(e)}}function Pc(e){for(;ue!==null;){var t=ue;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:yt||ks(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!yt)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:Zt(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&xc(t,l,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}xc(t,a,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var x=c.memoizedState;if(x!==null){var f=x.dehydrated;f!==null&&Bo(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}yt||t.flags&512&&ci(t)}catch(p){Qe(t,t.return,p)}}if(t===e){ue=null;break}if(n=t.sibling,n!==null){n.return=t.return,ue=n;break}ue=t.return}}function Ac(e){for(;ue!==null;){var t=ue;if(t===e){ue=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ue=n;break}ue=t.return}}function Lc(e){for(;ue!==null;){var t=ue;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ks(4,t)}catch(u){Qe(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(u){Qe(t,o,u)}}var l=t.return;try{ci(t)}catch(u){Qe(t,l,u)}break;case 5:var a=t.return;try{ci(t)}catch(u){Qe(t,a,u)}}}catch(u){Qe(t,t.return,u)}if(t===e){ue=null;break}var i=t.sibling;if(i!==null){i.return=t.return,ue=i;break}ue=t.return}}var oy=Math.ceil,us=bn.ReactCurrentDispatcher,ou=bn.ReactCurrentOwner,Wt=bn.ReactCurrentBatchConfig,Oe=0,at=null,nt=null,dt=0,_t=0,Fr=Xn(0),ot=0,Xo=null,yr=0,bs=0,lu=0,Po=null,St=null,su=0,to=1/0,yn=null,cs=!1,pi=null,Hn=null,_l=!1,zn=null,ds=0,Ao=0,mi=null,Fl=-1,Bl=0;function vt(){return Oe&6?Ze():Fl!==-1?Fl:Fl=Ze()}function Kn(e){return e.mode&1?Oe&2&&dt!==0?dt&-dt:Bh.transition!==null?(Bl===0&&(Bl=Rd()),Bl):(e=Ae,e!==0||(e=window.event,e=e===void 0?16:zd(e.type)),e):1}function rn(e,t,n,r){if(50<Ao)throw Ao=0,mi=null,Error(J(185));tl(e,n,r),(!(Oe&2)||e!==at)&&(e===at&&(!(Oe&2)&&(bs|=n),ot===4&&Mn(e,dt)),Nt(e,r),n===1&&Oe===0&&!(t.mode&1)&&(to=Ze()+500,Es&&Zn()))}function Nt(e,t){var n=e.callbackNode;Bm(e,t);var r=Jl(e,e===at?dt:0);if(r===0)n!==null&&Vu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Vu(n),t===1)e.tag===0?Fh(Mc.bind(null,e)):of(Mc.bind(null,e)),Lh(function(){!(Oe&6)&&Zn()}),n=null;else{switch(Od(r)){case 1:n=Ri;break;case 4:n=Id;break;case 16:n=Kl;break;case 536870912:n=Dd;break;default:n=Kl}n=rp(n,qf.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function qf(e,t){if(Fl=-1,Bl=0,Oe&6)throw Error(J(327));var n=e.callbackNode;if(Jr()&&e.callbackNode!==n)return null;var r=Jl(e,e===at?dt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=fs(e,r);else{t=r;var o=Oe;Oe|=2;var l=Xf();(at!==e||dt!==t)&&(yn=null,to=Ze()+500,dr(e,t));do try{ay();break}catch(i){Qf(e,i)}while(!0);Vi(),us.current=l,Oe=o,nt!==null?t=0:(at=null,dt=0,t=ot)}if(t!==0){if(t===2&&(o=Ba(e),o!==0&&(r=o,t=hi(e,o))),t===1)throw n=Xo,dr(e,0),Mn(e,r),Nt(e,Ze()),n;if(t===6)Mn(e,r);else{if(o=e.current.alternate,!(r&30)&&!ly(o)&&(t=fs(e,r),t===2&&(l=Ba(e),l!==0&&(r=l,t=hi(e,l))),t===1))throw n=Xo,dr(e,0),Mn(e,r),Nt(e,Ze()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(J(345));case 2:ar(e,St,yn);break;case 3:if(Mn(e,r),(r&130023424)===r&&(t=su+500-Ze(),10<t)){if(Jl(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){vt(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Ya(ar.bind(null,e,St,yn),t);break}ar(e,St,yn);break;case 4:if(Mn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var a=31-nn(r);l=1<<a,a=t[a],a>o&&(o=a),r&=~l}if(r=o,r=Ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*oy(r/1960))-r,10<r){e.timeoutHandle=Ya(ar.bind(null,e,St,yn),r);break}ar(e,St,yn);break;case 5:ar(e,St,yn);break;default:throw Error(J(329))}}}return Nt(e,Ze()),e.callbackNode===n?qf.bind(null,e):null}function hi(e,t){var n=Po;return e.current.memoizedState.isDehydrated&&(dr(e,t).flags|=256),e=fs(e,t),e!==2&&(t=St,St=n,t!==null&&yi(t)),e}function yi(e){St===null?St=e:St.push.apply(St,e)}function ly(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],l=o.getSnapshot;o=o.value;try{if(!on(l(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Mn(e,t){for(t&=~lu,t&=~bs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-nn(t),r=1<<n;e[n]=-1,t&=~r}}function Mc(e){if(Oe&6)throw Error(J(327));Jr();var t=Jl(e,0);if(!(t&1))return Nt(e,Ze()),null;var n=fs(e,t);if(e.tag!==0&&n===2){var r=Ba(e);r!==0&&(t=r,n=hi(e,r))}if(n===1)throw n=Xo,dr(e,0),Mn(e,t),Nt(e,Ze()),n;if(n===6)throw Error(J(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ar(e,St,yn),Nt(e,Ze()),null}function au(e,t){var n=Oe;Oe|=1;try{return e(t)}finally{Oe=n,Oe===0&&(to=Ze()+500,Es&&Zn())}}function gr(e){zn!==null&&zn.tag===0&&!(Oe&6)&&Jr();var t=Oe;Oe|=1;var n=Wt.transition,r=Ae;try{if(Wt.transition=null,Ae=1,e)return e()}finally{Ae=r,Wt.transition=n,Oe=t,!(Oe&6)&&Zn()}}function iu(){_t=Fr.current,$e(Fr)}function dr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Ah(n)),nt!==null)for(n=nt.return;n!==null;){var r=n;switch($i(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Zl();break;case 3:Zr(),$e(kt),$e(gt),Qi();break;case 5:qi(r);break;case 4:Zr();break;case 13:$e(He);break;case 19:$e(He);break;case 10:Hi(r.type._context);break;case 22:case 23:iu()}n=n.return}if(at=e,nt=e=Jn(e.current,null),dt=_t=t,ot=0,Xo=null,lu=bs=yr=0,St=Po=null,ur!==null){for(t=0;t<ur.length;t++)if(n=ur[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,l=n.pending;if(l!==null){var a=l.next;l.next=o,r.next=a}n.pending=r}ur=null}return e}function Qf(e,t){do{var n=nt;try{if(Vi(),Ml.current=is,as){for(var r=Ke.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}as=!1}if(hr=0,st=rt=Ke=null,Ro=!1,Yo=0,ou.current=null,n===null||n.return===null){ot=1,Xo=t,nt=null;break}e:{var l=e,a=n.return,i=n,u=t;if(t=dt,i.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,x=i,f=x.tag;if(!(x.mode&1)&&(f===0||f===11||f===15)){var p=x.alternate;p?(x.updateQueue=p.updateQueue,x.memoizedState=p.memoizedState,x.lanes=p.lanes):(x.updateQueue=null,x.memoizedState=null)}var T=Tc(a);if(T!==null){T.flags&=-257,kc(T,a,i,l,t),T.mode&1&&Sc(l,c,t),t=T,u=c;var S=t.updateQueue;if(S===null){var I=new Set;I.add(u),t.updateQueue=I}else S.add(u);break e}else{if(!(t&1)){Sc(l,c,t),uu();break e}u=Error(J(426))}}else if(We&&i.mode&1){var z=Tc(a);if(z!==null){!(z.flags&65536)&&(z.flags|=256),kc(z,a,i,l,t),Gi(eo(u,i));break e}}l=u=eo(u,i),ot!==4&&(ot=2),Po===null?Po=[l]:Po.push(l),l=a;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var d=Pf(l,u,t);gc(l,d);break e;case 1:i=u;var m=l.type,g=l.stateNode;if(!(l.flags&128)&&(typeof m.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Hn===null||!Hn.has(g)))){l.flags|=65536,t&=-t,l.lanes|=t;var C=Af(l,i,t);gc(l,C);break e}}l=l.return}while(l!==null)}ep(n)}catch(N){t=N,nt===n&&n!==null&&(nt=n=n.return);continue}break}while(!0)}function Xf(){var e=us.current;return us.current=is,e===null?is:e}function uu(){(ot===0||ot===3||ot===2)&&(ot=4),at===null||!(yr&268435455)&&!(bs&268435455)||Mn(at,dt)}function fs(e,t){var n=Oe;Oe|=2;var r=Xf();(at!==e||dt!==t)&&(yn=null,dr(e,t));do try{sy();break}catch(o){Qf(e,o)}while(!0);if(Vi(),Oe=n,us.current=r,nt!==null)throw Error(J(261));return at=null,dt=0,ot}function sy(){for(;nt!==null;)Zf(nt)}function ay(){for(;nt!==null&&!Rm();)Zf(nt)}function Zf(e){var t=np(e.alternate,e,_t);e.memoizedProps=e.pendingProps,t===null?ep(e):nt=t,ou.current=null}function ep(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=ey(n,t),n!==null){n.flags&=32767,nt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ot=6,nt=null;return}}else if(n=Zh(n,t,_t),n!==null){nt=n;return}if(t=t.sibling,t!==null){nt=t;return}nt=t=e}while(t!==null);ot===0&&(ot=5)}function ar(e,t,n){var r=Ae,o=Wt.transition;try{Wt.transition=null,Ae=1,iy(e,t,n,r)}finally{Wt.transition=o,Ae=r}return null}function iy(e,t,n,r){do Jr();while(zn!==null);if(Oe&6)throw Error(J(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(J(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if($m(e,l),e===at&&(nt=at=null,dt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||_l||(_l=!0,rp(Kl,function(){return Jr(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Wt.transition,Wt.transition=null;var a=Ae;Ae=1;var i=Oe;Oe|=4,ou.current=null,ny(e,n),Jf(n,e),jh(Ka),Yl=!!Ha,Ka=Ha=null,e.current=n,ry(n),Om(),Oe=i,Ae=a,Wt.transition=l}else e.current=n;if(_l&&(_l=!1,zn=e,ds=o),l=e.pendingLanes,l===0&&(Hn=null),Lm(n.stateNode),Nt(e,Ze()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(cs)throw cs=!1,e=pi,pi=null,e;return ds&1&&e.tag!==0&&Jr(),l=e.pendingLanes,l&1?e===mi?Ao++:(Ao=0,mi=e):Ao=0,Zn(),null}function Jr(){if(zn!==null){var e=Od(ds),t=Wt.transition,n=Ae;try{if(Wt.transition=null,Ae=16>e?16:e,zn===null)var r=!1;else{if(e=zn,zn=null,ds=0,Oe&6)throw Error(J(331));var o=Oe;for(Oe|=4,ue=e.current;ue!==null;){var l=ue,a=l.child;if(ue.flags&16){var i=l.deletions;if(i!==null){for(var u=0;u<i.length;u++){var c=i[u];for(ue=c;ue!==null;){var x=ue;switch(x.tag){case 0:case 11:case 15:Oo(8,x,l)}var f=x.child;if(f!==null)f.return=x,ue=f;else for(;ue!==null;){x=ue;var p=x.sibling,T=x.return;if(Vf(x),x===c){ue=null;break}if(p!==null){p.return=T,ue=p;break}ue=T}}}var S=l.alternate;if(S!==null){var I=S.child;if(I!==null){S.child=null;do{var z=I.sibling;I.sibling=null,I=z}while(I!==null)}}ue=l}}if(l.subtreeFlags&2064&&a!==null)a.return=l,ue=a;else e:for(;ue!==null;){if(l=ue,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Oo(9,l,l.return)}var d=l.sibling;if(d!==null){d.return=l.return,ue=d;break e}ue=l.return}}var m=e.current;for(ue=m;ue!==null;){a=ue;var g=a.child;if(a.subtreeFlags&2064&&g!==null)g.return=a,ue=g;else e:for(a=m;ue!==null;){if(i=ue,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:ks(9,i)}}catch(N){Qe(i,i.return,N)}if(i===a){ue=null;break e}var C=i.sibling;if(C!==null){C.return=i.return,ue=C;break e}ue=i.return}}if(Oe=o,Zn(),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(gs,e)}catch{}r=!0}return r}finally{Ae=n,Wt.transition=t}}return!1}function Uc(e,t,n){t=eo(n,t),t=Pf(e,t,1),e=Vn(e,t,1),t=vt(),e!==null&&(tl(e,1,t),Nt(e,t))}function Qe(e,t,n){if(e.tag===3)Uc(e,e,n);else for(;t!==null;){if(t.tag===3){Uc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Hn===null||!Hn.has(r))){e=eo(n,e),e=Af(t,e,1),t=Vn(t,e,1),e=vt(),t!==null&&(tl(t,1,e),Nt(t,e));break}}t=t.return}}function uy(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=vt(),e.pingedLanes|=e.suspendedLanes&n,at===e&&(dt&n)===n&&(ot===4||ot===3&&(dt&130023424)===dt&&500>Ze()-su?dr(e,0):lu|=n),Nt(e,t)}function tp(e,t){t===0&&(e.mode&1?(t=vl,vl<<=1,!(vl&130023424)&&(vl=4194304)):t=1);var n=vt();e=Tn(e,t),e!==null&&(tl(e,t,n),Nt(e,n))}function cy(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),tp(e,n)}function dy(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(t),tp(e,n)}var np;np=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||kt.current)Tt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Tt=!1,Xh(e,t,n);Tt=!!(e.flags&131072)}else Tt=!1,We&&t.flags&1048576&&lf(t,ns,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;zl(e,t),e=t.pendingProps;var o=qr(t,gt.current);Kr(t,n),o=Zi(null,t,r,e,o,n);var l=eu();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,bt(r)?(l=!0,es(t)):l=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Ji(t),o.updater=Ts,t.stateNode=o,o._reactInternals=t,ni(t,r,e,n),t=li(null,t,r,!0,l,n)):(t.tag=0,We&&l&&Bi(t),xt(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(zl(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=py(r),e=Zt(r,e),o){case 0:t=oi(null,t,r,e,n);break e;case 1:t=jc(null,t,r,e,n);break e;case 11:t=bc(null,t,r,e,n);break e;case 14:t=Nc(null,t,r,Zt(r.type,e),n);break e}throw Error(J(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Zt(r,o),oi(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Zt(r,o),jc(e,t,r,o,n);case 3:e:{if(zf(t),e===null)throw Error(J(387));r=t.pendingProps,l=t.memoizedState,o=l.element,ff(e,t),ls(t,r,null,n);var a=t.memoizedState;if(r=a.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){o=eo(Error(J(423)),t),t=_c(e,t,r,n,o);break e}else if(r!==o){o=eo(Error(J(424)),t),t=_c(e,t,r,n,o);break e}else for(Dt=Wn(t.stateNode.containerInfo.firstChild),Ot=t,We=!0,tn=null,n=cf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qr(),r===o){t=kn(e,t,n);break e}xt(e,t,r,n)}t=t.child}return t;case 5:return pf(t),e===null&&Za(t),r=t.type,o=t.pendingProps,l=e!==null?e.memoizedProps:null,a=o.children,Ja(r,o)?a=null:l!==null&&Ja(r,l)&&(t.flags|=32),Uf(e,t),xt(e,t,a,n),t.child;case 6:return e===null&&Za(t),null;case 13:return Ff(e,t,n);case 4:return Yi(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Xr(t,null,r,n):xt(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Zt(r,o),bc(e,t,r,o,n);case 7:return xt(e,t,t.pendingProps,n),t.child;case 8:return xt(e,t,t.pendingProps.children,n),t.child;case 12:return xt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,l=t.memoizedProps,a=o.value,ze(rs,r._currentValue),r._currentValue=a,l!==null)if(on(l.value,a)){if(l.children===o.children&&!kt.current){t=kn(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var i=l.dependencies;if(i!==null){a=l.child;for(var u=i.firstContext;u!==null;){if(u.context===r){if(l.tag===1){u=wn(-1,n&-n),u.tag=2;var c=l.updateQueue;if(c!==null){c=c.shared;var x=c.pending;x===null?u.next=u:(u.next=x.next,x.next=u),c.pending=u}}l.lanes|=n,u=l.alternate,u!==null&&(u.lanes|=n),ei(l.return,n,t),i.lanes|=n;break}u=u.next}}else if(l.tag===10)a=l.type===t.type?null:l.child;else if(l.tag===18){if(a=l.return,a===null)throw Error(J(341));a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),ei(a,n,t),a=l.sibling}else a=l.child;if(a!==null)a.return=l;else for(a=l;a!==null;){if(a===t){a=null;break}if(l=a.sibling,l!==null){l.return=a.return,a=l;break}a=a.return}l=a}xt(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Kr(t,n),o=Vt(o),r=r(o),t.flags|=1,xt(e,t,r,n),t.child;case 14:return r=t.type,o=Zt(r,t.pendingProps),o=Zt(r.type,o),Nc(e,t,r,o,n);case 15:return Lf(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Zt(r,o),zl(e,t),t.tag=1,bt(r)?(e=!0,es(t)):e=!1,Kr(t,n),Of(t,r,o),ni(t,r,o,n),li(null,t,r,!0,e,n);case 19:return Bf(e,t,n);case 22:return Mf(e,t,n)}throw Error(J(156,t.tag))};function rp(e,t){return _d(e,t)}function fy(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(e,t,n,r){return new fy(e,t,n,r)}function cu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function py(e){if(typeof e=="function")return cu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===_i)return 11;if(e===Ii)return 14}return 2}function Jn(e,t){var n=e.alternate;return n===null?(n=Gt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function $l(e,t,n,r,o,l){var a=2;if(r=e,typeof e=="function")cu(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Ir:return fr(n.children,o,l,t);case ji:a=8,o|=8;break;case ba:return e=Gt(12,n,t,o|2),e.elementType=ba,e.lanes=l,e;case Na:return e=Gt(13,n,t,o),e.elementType=Na,e.lanes=l,e;case ja:return e=Gt(19,n,t,o),e.elementType=ja,e.lanes=l,e;case fd:return Ns(n,o,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case cd:a=10;break e;case dd:a=9;break e;case _i:a=11;break e;case Ii:a=14;break e;case Pn:a=16,r=null;break e}throw Error(J(130,e==null?e:typeof e,""))}return t=Gt(a,n,t,o),t.elementType=e,t.type=r,t.lanes=l,t}function fr(e,t,n,r){return e=Gt(7,e,r,t),e.lanes=n,e}function Ns(e,t,n,r){return e=Gt(22,e,r,t),e.elementType=fd,e.lanes=n,e.stateNode={isHidden:!1},e}function ha(e,t,n){return e=Gt(6,e,null,t),e.lanes=n,e}function ya(e,t,n){return t=Gt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function my(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qs(0),this.expirationTimes=qs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qs(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function du(e,t,n,r,o,l,a,i,u){return e=new my(e,t,n,i,u),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Gt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ji(l),e}function hy(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_r,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function op(e){if(!e)return qn;e=e._reactInternals;e:{if(vr(e)!==e||e.tag!==1)throw Error(J(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(bt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(J(171))}if(e.tag===1){var n=e.type;if(bt(n))return rf(e,n,t)}return t}function lp(e,t,n,r,o,l,a,i,u){return e=du(n,r,!0,e,o,l,a,i,u),e.context=op(null),n=e.current,r=vt(),o=Kn(n),l=wn(r,o),l.callback=t??null,Vn(n,l,o),e.current.lanes=o,tl(e,o,r),Nt(e,r),e}function js(e,t,n,r){var o=t.current,l=vt(),a=Kn(o);return n=op(n),t.context===null?t.context=n:t.pendingContext=n,t=wn(l,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Vn(o,t,a),e!==null&&(rn(e,o,a,l),Ll(e,o,a)),a}function ps(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function zc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function fu(e,t){zc(e,t),(e=e.alternate)&&zc(e,t)}function yy(){return null}var sp=typeof reportError=="function"?reportError:function(e){console.error(e)};function pu(e){this._internalRoot=e}_s.prototype.render=pu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(J(409));js(e,t,null,null)};_s.prototype.unmount=pu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;gr(function(){js(null,e,null,null)}),t[Sn]=null}};function _s(e){this._internalRoot=e}_s.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ld();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ln.length&&t!==0&&t<Ln[n].priority;n++);Ln.splice(n,0,e),n===0&&Ud(e)}};function mu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Is(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Fc(){}function gy(e,t,n,r,o){if(o){if(typeof r=="function"){var l=r;r=function(){var c=ps(a);l.call(c)}}var a=lp(t,r,e,0,null,!1,!1,"",Fc);return e._reactRootContainer=a,e[Sn]=a.current,Wo(e.nodeType===8?e.parentNode:e),gr(),a}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var i=r;r=function(){var c=ps(u);i.call(c)}}var u=du(e,0,!1,null,null,!1,!1,"",Fc);return e._reactRootContainer=u,e[Sn]=u.current,Wo(e.nodeType===8?e.parentNode:e),gr(function(){js(t,u,n,r)}),u}function Ds(e,t,n,r,o){var l=n._reactRootContainer;if(l){var a=l;if(typeof o=="function"){var i=o;o=function(){var u=ps(a);i.call(u)}}js(t,a,e,o)}else a=gy(n,t,e,o,r);return ps(a)}Pd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=To(t.pendingLanes);n!==0&&(Oi(t,n|1),Nt(t,Ze()),!(Oe&6)&&(to=Ze()+500,Zn()))}break;case 13:gr(function(){var r=Tn(e,1);if(r!==null){var o=vt();rn(r,e,1,o)}}),fu(e,1)}};Pi=function(e){if(e.tag===13){var t=Tn(e,134217728);if(t!==null){var n=vt();rn(t,e,134217728,n)}fu(e,134217728)}};Ad=function(e){if(e.tag===13){var t=Kn(e),n=Tn(e,t);if(n!==null){var r=vt();rn(n,e,t,r)}fu(e,t)}};Ld=function(){return Ae};Md=function(e,t){var n=Ae;try{return Ae=e,t()}finally{Ae=n}};Ua=function(e,t,n){switch(t){case"input":if(Da(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=Cs(r);if(!o)throw Error(J(90));md(r),Da(r,o)}}}break;case"textarea":yd(e,n);break;case"select":t=n.value,t!=null&&Gr(e,!!n.multiple,t,!1)}};Sd=au;Td=gr;var xy={usingClientEntryPoint:!1,Events:[rl,Pr,Cs,Cd,Ed,au]},Co={findFiberByHostInstance:ir,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vy={bundleType:Co.bundleType,version:Co.version,rendererPackageName:Co.rendererPackageName,rendererConfig:Co.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Nd(e),e===null?null:e.stateNode},findFiberByHostInstance:Co.findFiberByHostInstance||yy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Il.isDisabled&&Il.supportsFiber)try{gs=Il.inject(vy),cn=Il}catch{}}At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xy;At.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mu(t))throw Error(J(200));return hy(e,t,null,n)};At.createRoot=function(e,t){if(!mu(e))throw Error(J(299));var n=!1,r="",o=sp;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=du(e,1,!1,null,null,n,!1,r,o),e[Sn]=t.current,Wo(e.nodeType===8?e.parentNode:e),new pu(t)};At.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(J(188)):(e=Object.keys(e).join(","),Error(J(268,e)));return e=Nd(t),e=e===null?null:e.stateNode,e};At.flushSync=function(e){return gr(e)};At.hydrate=function(e,t,n){if(!Is(t))throw Error(J(200));return Ds(null,e,t,!0,n)};At.hydrateRoot=function(e,t,n){if(!mu(e))throw Error(J(405));var r=n!=null&&n.hydratedSources||null,o=!1,l="",a=sp;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=lp(t,null,e,1,n??null,o,!1,l,a),e[Sn]=t.current,Wo(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new _s(t)};At.render=function(e,t,n){if(!Is(t))throw Error(J(200));return Ds(null,e,t,!1,n)};At.unmountComponentAtNode=function(e){if(!Is(e))throw Error(J(40));return e._reactRootContainer?(gr(function(){Ds(null,null,e,!1,function(){e._reactRootContainer=null,e[Sn]=null})}),!0):!1};At.unstable_batchedUpdates=au;At.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Is(n))throw Error(J(200));if(e==null||e._reactInternals===void 0)throw Error(J(38));return Ds(e,t,n,!1,r)};At.version="18.3.1-next-f1338f8080-20240426";function ap(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ap)}catch(e){console.error(e)}}ap(),sd.exports=At;var Rs=sd.exports,Bc=Rs;Ta.createRoot=Bc.createRoot,Ta.hydrateRoot=Bc.hydrateRoot;var Re=(e=>(e.SynchroTech="SynchroTech",e.Hoods="Hoods",e.Optimates="Optimates",e.Fusion="Fusion",e.Command="Command",e.Tokens="Tokens",e.Custom="Custom",e))(Re||{}),Cn=(e=>(e.FreeForAll="FFA",e.TwoVTwo="2v2",e.ThreeVOne="3v1",e))(Cn||{});const wy={ipDeptAgent:{name:"IP Dept Agent",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253319/SYN_IP_DEPT_AGENT_mhwphu.png",fallbackImage:"/images/cards/SYN_IP_DEPT_AGENT.png",power:2,ability:`Deploy: 2 stuns a card with exploit.
Support  Commit: A player discards a revealed card of your choice.`,flavorText:`- "You've violated copyright. Open the door. We have a search warrant."`,types:["Unit","SynchroTech"],faction:"SynchroTech",allowedPanels:["DECK_BUILDER"]},tacticalAgent:{name:"Tactical Agent",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253342/SYN_TACTICAL_AGENT_xbb7i0.png",fallbackImage:"/images/cards/SYN_TACTICAL_AGENT.png",power:3,ability:`Deploy: Aim a card with threat.
Setup: Destroy the card with aim.`,flavorText:'- "Nobody move! SynchroTech Security Service!"',types:["Unit","SynchroTech"],faction:"SynchroTech",allowedPanels:["DECK_BUILDER"]},patrolAgent:{name:"Patrol Agent",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253325/SYN_PATROL_AGENT_ioetlu.png",fallbackImage:"/images/cards/SYN_PATROL_AGENT.png",power:2,ability:`Setup: Move this card to any cell in a line.
Commit: Stun an adjacent opponent card with threat.`,flavorText:"They say the city never sleeps. We make sure it doesn't even blink.",types:["Unit","SynchroTech"],faction:"SynchroTech",allowedPanels:["DECK_BUILDER"]},riotAgent:{name:"Riot Agent",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253337/SYN_RIOT_AGENT_jurf4t.png",fallbackImage:"/images/cards/SYN_RIOT_AGENT.png",power:3,ability:`Deploy: Push an opponent card 1 cell. ay take its place.
Commit: Stun an adjacent opponent card with threat.`,flavorText:'- "Citizens, disperse! This meeting is unauthorized by SynchroTech."',types:["Unit","SynchroTech"],faction:"SynchroTech",allowedPanels:["DECK_BUILDER"]},threatAnalyst:{name:"Threat Analyst",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253338/SYN_THREAT_ANALYST_sqnpgw.png",fallbackImage:"/images/cards/SYN_THREAT_ANALYST.png",power:2,ability:`Deploy: Exploit any card.
Support  Commit: Reveal 1 card for each of your exploits on the battlefield.`,flavorText:"",types:["Unit","SynchroTech"],faction:"SynchroTech",allowedPanels:["DECK_BUILDER"]},recklessProvocateur:{name:"Reckless Provocateur",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253315/HOO_RECKLESS_PROVOCATEUR_hi7a9z.png",fallbackImage:"/images/cards/HOO_RECKLESS_PROVOCATEUR.png",power:3,ability:`Deploy: Swap positions with a card in an adjacent cell.
Commit: Move all counters from an allied card on the battlefield to this card.`,flavorText:'- "Patience is a weapon. Vengeance is an art."',types:["Unit","Hoods"],faction:"Hoods",allowedPanels:["DECK_BUILDER"]},dataLiberator:{name:"Data Liberator",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253317/HOO_DATA_LIBERATOR_lbtqa2.png",fallbackImage:"/images/cards/HOO_DATA_LIBERATOR.png",power:2,ability:`Deploy: Exploit any card.
Support  Pas: Cards with your exploit counters give you points.`,flavorText:`- "Information doesn't want to be free. It needs to be."`,types:["Unit","Hoods"],faction:"Hoods",allowedPanels:["DECK_BUILDER"]},cautiousAvenger:{name:"Cautious Avenger",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253309/HOO_CAUTIOUS_AVENGER_x4g4g3.png",fallbackImage:"/images/cards/HOO_CAUTIOUS_AVENGER.png",power:2,ability:`Deploy: Aim a card in a line.
Support  Setup: Destroy the card with aim.`,flavorText:'- "Patience is a weapon. Vengeance is an art."',types:["Unit","Hoods"],faction:"Hoods",allowedPanels:["DECK_BUILDER"]},vigilantSpotter:{name:"Vigilant Spotter",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253311/HOO_VIGILANT_SPOTTER_eiephm.png",fallbackImage:"/images/cards/HOO_VIGILANT_SPOTTER.png",power:1,ability:`Support  Pas: When an opponent's revealed card enters the battlefield, gain 2 points.
Commit: Each opponent reveals 1 cards to you.`,flavorText:'- "Patience is a weapon. Vengeance is an art."',types:["Unit","Hoods"],faction:"Hoods",allowedPanels:["DECK_BUILDER"]},inventiveMaker:{name:"Inventive Maker",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253313/HOO_INVENTIVE_MAKER_uzrbg1.png",fallbackImage:"/images/cards/HOO_INVENTIVE_MAKER.png",power:1,ability:`Deploy: Place the Recon Drone token in a free adjacent cell.
Support  Setup: Return a device card from the discard pile to your hand.`,flavorText:'- "Patience is a weapon. Vengeance is an art."',types:["Unit","Hoods"],faction:"Hoods",allowedPanels:["DECK_BUILDER"]},faber:{name:"Faber",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253324/OPT_FABER_d7uxew.png",fallbackImage:"/images/cards/OPT_FABER.png",power:1,ability:"Deploy: Place the Walking Turret card in a free adjacent cell.",flavorText:"In the gilded halls of the Optimates, even the tools of war are works of art.",types:["Unit","Optimates"],faction:"Optimates",allowedPanels:["DECK_BUILDER"]},censor:{name:"Censor",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253321/OPT_CENSOR_wtxtc2.png",fallbackImage:"/images/cards/OPT_CENSOR.png",power:2,ability:`Deploy: Exploit any card.
Support  Commit: Swap 1 of your exploits for 1 stun.`,flavorText:"In the gilded halls of the Optimates, even the tools of war are works of art.",types:["Unit","Optimates"],faction:"Optimates",allowedPanels:["DECK_BUILDER"]},princeps:{name:"Princeps",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253332/OPT_PRINCEPS_w3o5lq.png",fallbackImage:"/images/cards/OPT_PRINCEPS.png",power:3,ability:`Deploy: Shield 1. Aim a card with threat.
Setup: Destroy a card with aim in a line.`,flavorText:"Order is not requested. It is imposed.",types:["Unit","Optimates"],faction:"Optimates",allowedPanels:["DECK_BUILDER"]},immunis:{name:"Immunis",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253327/OPT_IMMUNIS_bjlncl.png",fallbackImage:"/images/cards/OPT_IMMUNIS.png",power:2,ability:"Support  Deploy: Return your Optimate from the discard pile to an adjacent cell. At the end of the phase, return the Optimate for 2 stuns.",flavorText:"In the gilded halls of the Optimates, even the tools of war are works of art.",types:["Unit","Optimates"],faction:"Optimates",allowedPanels:["DECK_BUILDER"]},centurion:{name:"Centurion",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253330/OPT_CENTURION_aaushl.png",fallbackImage:"/images/cards/OPT_CENTURION.png",power:2,ability:"Support  Setup: The power of other allied cards in the line increases by 1.",flavorText:"In the gilded halls of the Optimates, even the tools of war are works of art.",types:["Unit","Optimates"],faction:"Optimates",allowedPanels:["DECK_BUILDER"]},codeKeeper:{name:"Code Keeper",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253298/FUS_CODE_KEEPER_qotsym.png",fallbackImage:"/images/cards/FUS_CODE_KEEPER.png",power:3,ability:`Deploy: Exploit all opponent cards with your threat.
Support  Commit: Move opponent card with exploit 1 cell.`,flavorText:"The Signal is truth. All else is noise.",types:["Unit","Fusion"],faction:"Fusion",allowedPanels:["DECK_BUILDER"]},devoutSynthetic:{name:"Devout Synthetic",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253305/FUS_DEVOUT_SYNTHETIC_bavg9k.png",fallbackImage:"/images/cards/FUS_DEVOUT_SYNTHETIC.png",power:4,ability:`Deploy: Push an adjacent card 1 cell. May take its place.
Support  Setup: Destroy an adjacent card with threat or stun.`,flavorText:"Flesh is a bug. The Signal is the patch.",types:["Unit","Fusion"],faction:"Fusion",allowedPanels:["DECK_BUILDER"]},unwaveringIntegrator:{name:"Unwavering Integrator",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253303/FUS_UNWAVERING_INTEGRATOR_emret1.png",fallbackImage:"/images/cards/FUS_UNWAVERING_INTEGRATOR.png",power:2,ability:`Deploy: Exploit any card.
Support  Setup: Gain 1 point for each of your exploits in the line.`,flavorText:"The Signal is truth. All else is noise.",types:["Unit","Fusion"],faction:"Fusion",allowedPanels:["DECK_BUILDER"]},signalProphet:{name:"Signal Prophet",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253299/FUS_SIGNAL_PROPHET_nzd7w3.png",fallbackImage:"/images/cards/FUS_SIGNAL_PROPHET.png",power:3,ability:`Deploy: Exploit each of your cards with support.
Support  Commit: Move your card with your exploit 1 cell.`,flavorText:"The Signal is truth. All else is noise.",types:["Unit","Fusion"],faction:"Fusion",allowedPanels:["DECK_BUILDER"]},zealousMissionary:{name:"Zealous Missionary",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253301/FUS_ZEALOUS_MISSIONARY_mfv9xl.png",fallbackImage:"/images/cards/FUS_ZEALOUS_MISSIONARY.png",power:2,ability:`Deploy: Exploit any card.
Support  Commit: Reduce the power of any card with your exploit by 1.`,flavorText:"The Signal is truth. All else is noise.",types:["Unit","Fusion"],faction:"Fusion",allowedPanels:["DECK_BUILDER"]},overwatch:{name:"Overwatch",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253291/CMD_OVERWATCH_hrba9x.png",fallbackImage:"/images/cards/CMD_OVERWATCH.png",power:0,ability:`Aim any card. Choose 2 of 3:
 Move units with your aim 1 or 2 cells.
 Reveal 1 card for each of your aim.
 Draw 1 card for each of your aim.`,types:["Command"],faction:"Command",allowedPanels:["DECK_BUILDER"]},tacticalManeuver:{name:"Tactical Maneuver",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253296/CMD_REPOSITIONING_m7k4kf.png",fallbackImage:"/images/cards/CMD_REPOSITIONING.png",power:0,ability:`Move your unit to any cell in a line. Choose 2 of 3: 
 Draw cards equal to the power of an adjacent allied unit. 
 Move your unit 1 or 2 cells. 
 Gain points equal to the power of one of the moved units.`,types:["Command"],faction:"Command",allowedPanels:["DECK_BUILDER"]},inspiration:{name:"Inspiration",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763260942/CMD_INSPIRATION_nxifhu.png",fallbackImage:"/images/cards/CMD_INSPIRATION.png",power:0,ability:`Remove any number of counters from your unit. Choose 2 of 3: 
 Move this unit 1 or 2 cells. 
 Draw 1 card for each counter removed. 
 Gain 1 point for each counter removed.`,types:["Command"],faction:"Command",allowedPanels:["DECK_BUILDER"]},dataInterception:{name:"Data Interception",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253290/CMD_DATA_INTERCEPTION_ks4lcv.png",fallbackImage:"/images/cards/CMD_DATA_INTERCEPTION.png",power:0,ability:`Exploit any card. Choose 2 of 3: 
 Move a unit with your exploit to any cell in a line. 
 Reveal 1 card for each of your exploits. 
 Draw cards equal to the power of the highest power revealed unit.`,types:["Command"],faction:"Command",allowedPanels:["DECK_BUILDER"]},falseOrders:{name:"False Orders",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763640484/CMD_FALSE_ORDERS_ghi01y.png",fallbackImage:"/images/cards/CMD_DATA_INTERCEPTION.png",power:0,ability:`Move an opponent unit 1 or 2 cells. Choose 2 of 3: 
 Move an opponent unit 1 or 2 cells. 
 Stun the moved opponent unit. 
 Draw cards equal to the power of one of the moved opponent units.`,types:["Command"],faction:"Command",allowedPanels:["DECK_BUILDER"]},mobilization1:{name:"Line Breach",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763894862/line_ocsoyj.png",fallbackImage:"/images/cards/CMD_MOBILIZATION.png",power:0,ability:"Gain points in a chosen line of the battlefield.",types:["Command"],faction:"Command",allowedPanels:[]},mobilization2:{name:"Logistics Chain",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763894861/diagonal_u96ulk.png",fallbackImage:"/images/cards/CMD_MOBILIZATION.png",power:0,ability:"Gain points in a chosen diagonal of the battlefield.",types:["Command"],faction:"Command",allowedPanels:[]},mobilization3:{name:"Sector Capture",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763895447/support_tgjhgd.png",fallbackImage:"/images/cards/CMD_MOBILIZATION.png",power:0,ability:"Gain points from 4 adjacent allied cards.",types:["Command"],faction:"Command",allowedPanels:[]}},Cy={reconDrone:{name:"Recon Drone",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253333/TKN_RECON_DRONE_esfknf.png",fallbackImage:"/images/cards/TKN_RECON_DRONE.png",power:1,ability:`Setup: Move to any cell.
Commit: You may reveal a card from the hand of your opponent who owns an adjacent card.`,flavorText:"SynchroTech has created lightweight drones to patrol the streets, but the Hoods have other plans for them.",color:"bg-gray-400",types:["Unit","Device"],allowedPanels:["TOKEN_PANEL"]},walkingTurret:{name:"Walking Turret",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253307/TKN_WALKING_TURRET_uq6owm.png",fallbackImage:"/images/cards/TKN_WALKING_TURRET.png",power:2,ability:"Support  Commit: If without shield, gain shield 1.",flavorText:"This military monster clearly has no place on the city streets.",color:"bg-gray-400",types:["Unit","Optimates","Device"],allowedPanels:["TOKEN_PANEL"]}},Ey={Aim:{name:"Aim",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763478810/Aim_dcct45.png",description:`This counter has no effect on its own, but it can modify the abilities of cards.
This card is easier to destroy.`,sortOrder:1,allowedPanels:["COUNTER_PANEL"],allowedTargets:["board"]},Exploit:{name:"Exploit",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763478810/Exploit_foomty.png",description:`This counter has no effect on its own, but it can modify the abilities of cards.
Hacker and programmer cards will have a greater effect on this card.`,sortOrder:2,allowedPanels:["COUNTER_PANEL"],allowedTargets:["board"]},LastPlayed:{name:"LastPlayed",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763478810/LastPlayed_bfkbwb.png",description:"This card was last played by its owner.",sortOrder:99,allowedPanels:[],allowedTargets:["board"]},Revealed:{name:"Revealed",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763478811/Revealed_w1gbe7.png",description:"This card's face is visible to the owner of the counter revealed. Can be placed on cards in hand.",sortOrder:7,allowedPanels:["COUNTER_PANEL"],allowedTargets:["board","hand"]},Stun:{name:"Stun",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763478811/Stun_cwqroz.png",description:`A stunned card cannot activate abilities or gain points. Its owner's effects cannot move it, but opponent effects can.
Remove 1 stun counter from the card at the end of the Commit Phase.`,sortOrder:4,allowedPanels:["COUNTER_PANEL"],allowedTargets:["board"]},Shield:{name:"Shield",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763478810/Shield_z9sjr1.png",description:"If an effect attempts to destroy this card, remove 1 shield counter from it instead.",sortOrder:3,allowedPanels:["COUNTER_PANEL"],allowedTargets:["board"]},Support:{name:"Support",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763478809/Support_ui9qpl.png",description:`This counter has no effect on its own, but it can modify the abilities of cards.
This card is adjacent to its ally.`,sortOrder:5,allowedPanels:[],allowedTargets:["board"]},Threat:{name:"Threat",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763478809/Threat_i1pbko.png",description:`This counter has no effect on its own, but it can modify the abilities of cards.
This card is surrounded and pinned to the edge of the battlefield by an opponent's cards.`,sortOrder:6,allowedPanels:[],allowedTargets:["board"]},"Power+":{name:"Power+",imageUrl:"",description:"Increases the power of the card by 1.",sortOrder:10,allowedPanels:[],allowedTargets:["board","hand","deck","discard"]},"Power-":{name:"Power-",imageUrl:"",description:"Decreases the power of the card by 1.",sortOrder:11,allowedPanels:[],allowedTargets:["board","hand","deck","discard"]}},Sy=[{id:"SynchroTech",name:"SynchroTech",isSelectable:!0,cards:[{cardId:"ipDeptAgent",quantity:3},{cardId:"tacticalAgent",quantity:3},{cardId:"patrolAgent",quantity:3},{cardId:"riotAgent",quantity:3},{cardId:"threatAnalyst",quantity:3},{cardId:"overwatch",quantity:2},{cardId:"tacticalManeuver",quantity:2},{cardId:"inspiration",quantity:2},{cardId:"dataInterception",quantity:2},{cardId:"falseOrders",quantity:2}]},{id:"Hoods",name:"Hoods",isSelectable:!0,cards:[{cardId:"recklessProvocateur",quantity:3},{cardId:"dataLiberator",quantity:3},{cardId:"cautiousAvenger",quantity:3},{cardId:"vigilantSpotter",quantity:3},{cardId:"inventiveMaker",quantity:3},{cardId:"overwatch",quantity:2},{cardId:"tacticalManeuver",quantity:2},{cardId:"inspiration",quantity:2},{cardId:"dataInterception",quantity:2},{cardId:"falseOrders",quantity:2}]},{id:"Optimates",name:"Optimates",isSelectable:!0,cards:[{cardId:"faber",quantity:3},{cardId:"censor",quantity:3},{cardId:"princeps",quantity:3},{cardId:"immunis",quantity:3},{cardId:"centurion",quantity:3},{cardId:"overwatch",quantity:2},{cardId:"tacticalManeuver",quantity:2},{cardId:"inspiration",quantity:2},{cardId:"dataInterception",quantity:2},{cardId:"falseOrders",quantity:2}]},{id:"Fusion",name:"Fusion",isSelectable:!0,cards:[{cardId:"codeKeeper",quantity:3},{cardId:"devoutSynthetic",quantity:3},{cardId:"unwaveringIntegrator",quantity:3},{cardId:"signalProphet",quantity:3},{cardId:"zealousMissionary",quantity:3},{cardId:"overwatch",quantity:2},{cardId:"tacticalManeuver",quantity:2},{cardId:"inspiration",quantity:2},{cardId:"dataInterception",quantity:2},{cardId:"falseOrders",quantity:2}]}],ip={cardDatabase:wy,tokenDatabase:Cy,countersDatabase:Ey,deckFiles:Sy},{cardDatabase:Ty,tokenDatabase:ky,countersDatabase:by,deckFiles:Ny}=ip,lr=ip,Os=new Map(Object.entries(Ty)),jy=new Map(Object.entries(ky)),ll=by,up=Ny,hu=new Set(["overwatch","repositioning","mobilization","inspiration","dataInterception"]);function _y(){const e={};for(const t of up){const n=[];for(const r of t.cards){const o=Os.get(r.cardId);if(!o){console.warn(`Card definition not found for ID: ${r.cardId} in deck: ${t.name}`);continue}const l=hu.has(r.cardId);for(let a=0;a<r.quantity;a++){const i=r.cardId.toUpperCase().replace(/-/g,"_");l?n.push({...o,deck:Re.Command,id:`CMD_${i}`,faction:o.faction||"Command"}):n.push({...o,deck:t.id,id:`${t.id.substring(0,3).toUpperCase()}_${i}_${a+1}`,faction:o.faction||t.id})}}e[t.id]=n}return e[Re.Tokens]=Array.from(jy.values()).map(t=>{const n=t.types?[...t.types]:["Unit"];return n.includes("Device")||n.push("Device"),{id:`TKN_${t.name.toUpperCase().replace(/\s/g,"_")}`,deck:Re.Tokens,name:t.name,imageUrl:t.imageUrl,fallbackImage:t.fallbackImage,power:t.power,ability:t.ability,color:t.color,types:n,flavorText:t.flavorText,faction:"Tokens"}}),e}const gi=_y(),cp=()=>up.filter(e=>e.isSelectable);function yu(e){return Os.get(e)}function ga(e){return Array.from(Os.values()).find(t=>t.name===e)}function Iy(){return Array.from(Os.entries()).map(([e,t])=>({id:e,card:t}))}const dp={[Re.SynchroTech]:{prefix:"SYN",color:"border-cyan-400"},[Re.Hoods]:{prefix:"HOO",color:"border-purple-500"},[Re.Optimates]:{prefix:"OPT",color:"border-red-500"},[Re.Fusion]:{prefix:"FUS",color:"border-green-400"},[Re.Command]:{prefix:"CMD",color:"border-yellow-500"},[Re.Tokens]:{prefix:"TKN",color:"border-gray-400"},[Re.Custom]:{prefix:"CUS",color:"border-purple-400"}},Rt={blue:{bg:"bg-blue-600",border:"border-blue-600",outline:"outline-blue-600",glow:"shadow-[0_0_15px_#2563eb]"},purple:{bg:"bg-purple-600",border:"border-purple-600",outline:"outline-purple-600",glow:"shadow-[0_0_15px_#9333ea]"},red:{bg:"bg-red-600",border:"border-red-600",outline:"outline-red-600",glow:"shadow-[0_0_15px_#dc2626]"},green:{bg:"bg-green-600",border:"border-green-600",outline:"outline-green-600",glow:"shadow-[0_0_15px_#16a34a]"},yellow:{bg:"bg-yellow-500",border:"border-yellow-500",outline:"outline-yellow-500",glow:"shadow-[0_0_15px_#eab308]"},orange:{bg:"bg-orange-500",border:"border-orange-500",outline:"outline-orange-500",glow:"shadow-[0_0_15px_#f97316]"},pink:{bg:"bg-pink-500",border:"border-pink-500",outline:"outline-pink-500",glow:"shadow-[0_0_15px_#ec4899]"},brown:{bg:"bg-[#8B4513]",border:"border-[#8B4513]",outline:"outline-[#8B4513]",glow:"shadow-[0_0_15px_#8B4513]"}},fp=["blue","purple","red","green","yellow","orange","pink","brown"],xi=["Setup Phase","Main Phase","Commit Phase"],Zo=Object.fromEntries(Object.entries(ll).map(([e,t])=>[e,t.imageUrl])),ms=Object.fromEntries(Object.entries(ll).map(([e,t])=>[e,t.description])),Dy=Object.entries(ll).filter(([,e])=>!e.allowedPanels||e.allowedPanels.includes("COUNTER_PANEL")).sort(([,e],[,t])=>e.sortOrder-t.sortOrder).map(([e,t])=>({type:e,label:t.name})),xa=e=>{const t=[...e];for(let n=t.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[t[n],t[r]]=[t[r],t[n]]}return t},Ry={1:"top-[59px] left-2",2:"top-[59px] right-2",3:"bottom-[3px] left-2",4:"bottom-[3px] right-2"},Oy=e=>{const t={bold:["Support","support","Threat","threat","threaten","Act","Pas","Trg","Int","ETB","Deploy","Setup","Commit","Exploit","exploits","Aim","Stun","Shield","Gain points","gain points"],italic:["This counter has no effect on its own, but it can modify the abilities of cards."]},n=t.bold.map(l=>l.toLowerCase()),r=t.italic.map(l=>l.toLowerCase());return e.split(/(\s+|[.,:()])/).map((l,a)=>{if(!l)return null;const i=l.replace(/[.,:()]/g,"").toLowerCase();return i&&n.includes(i)?Fn.createElement("strong",{key:a,className:"text-white"},l):i&&r.includes(i)?Fn.createElement("em",{key:a,className:"text-gray-300 italic font-semibold"},l):l})},pp=e=>e?e.split(`
`).map((t,n)=>{const r=[];return n>0&&r.push(Fn.createElement("br",{key:`br-${n}`})),r.push(...Oy(t)),Fn.createElement(Fn.Fragment,{key:n},...r.filter(Boolean))}):"",gu=({x:e,y:t,children:n})=>{const r=E.useRef(null),[o,l]=E.useState({top:t+20,left:e+20});return E.useLayoutEffect(()=>{if(r.current){const{innerWidth:a,innerHeight:i}=window,{offsetWidth:u,offsetHeight:c}=r.current;let x=e+20;x+u>a&&(x=e-u-20),x<5&&(x=5);let f=t+20;f+c>i&&(f=t-c-20),f<5&&(f=5),l({top:f,left:x})}},[e,t,n]),Rs.createPortal(s.jsx("div",{ref:r,className:"fixed bg-gray-900 border border-gray-700 rounded-md shadow-lg z-[99999] p-3 text-white text-base pointer-events-none transition-opacity duration-100",style:{top:o.top,left:o.left,opacity:1},children:n}),document.body)},xu=({card:e,statusDescriptions:t,className:n,hideOwner:r=!1,powerPosition:o="default"})=>{var m;const l=(m=e.types)!=null&&m.length?e.types.join(", "):e.deck==="counter"?"":`${e.deck} Card`,a=e.powerModifier||0,i=Math.max(0,e.power+a),u=(e.statuses??[]).reduce((g,C)=>(g[C.type]=(g[C.type]||0)+1,g),{}),c=Object.keys(u).length>0,x=e.ownerName||(e.ownerId?`Player ${e.ownerId}`:null);let f="bg-gray-700 border-gray-500",p="text-white";a>0?(f="bg-green-900 border-green-500",p="text-green-400"):a<0&&(f="bg-red-900 border-red-500",p="text-red-400");const T=e.ability?e.ability.length:0,S=c?Object.keys(u).length*10:0,I=T>35||S>35,z=n||"relative flex flex-col text-left w-max max-w-[90vw]",d=o==="inner"?"top-0.5 right-0.5":"-top-1 -right-1";return s.jsxs("div",{className:z,children:[e.power>0&&s.jsx("div",{className:`absolute ${d} w-[37px] h-[37px] flex items-center justify-center rounded border-2 ${f} shadow-sm z-10`,children:s.jsx("span",{className:`font-bold text-lg ${p}`,children:i})}),s.jsxs("div",{className:"mb-1 pr-8 whitespace-nowrap",children:[s.jsx("div",{className:"font-bold text-white text-lg leading-tight mb-0.5",children:e.name}),l&&s.jsx("div",{className:"text-xs text-gray-400 font-semibold",children:l})]}),s.jsxs("div",{className:`flex flex-col ${!n&&I?"w-[16rem]":"w-full"} whitespace-normal break-words`,children:[e.ability&&s.jsx("hr",{className:"border-gray-600 mt-[0px] mb-[2px]"}),e.ability&&s.jsx("div",{className:"text-sm text-gray-200 leading-snug",children:pp(e.ability)}),e.ability&&s.jsx("hr",{className:"border-gray-600 my-[4px]"}),c&&s.jsx("div",{className:"text-xs text-gray-200 leading-snug",children:Object.entries(u).map(([g,C],N,P)=>s.jsxs("span",{children:[s.jsx("span",{className:"font-bold text-indigo-300",children:g}),C>1&&s.jsxs("span",{className:"text-gray-400 ml-1",children:["(x",C,")"]}),N<P.length-1?s.jsx("span",{className:"text-gray-400 mr-1",children:", "}):""]},g))}),c&&x&&!r&&s.jsx("hr",{className:"border-gray-600 my-[2px]"}),x&&!r&&s.jsxs("div",{className:"text-xs text-gray-500 font-semibold",children:["Owner: ",s.jsx("span",{className:"text-gray-300",children:x})]})]})]})},Py=(e,t,n,r)=>e===n||t===r,hs=(e,t,n,r)=>Math.abs(e-n)+Math.abs(t-r)===1,lt=(e,t,n)=>e.statuses?e.statuses.some(r=>r.type===t&&(n===void 0||r.addedByPlayerId===n)):!1,Br=(e,t)=>e?e.toLowerCase().includes(t.toLowerCase()):!1,vi=(e,t,n)=>{var o;if(n!==e.ownerId||(o=e.statuses)!=null&&o.some(l=>l.type==="Stun"))return!1;const r=e.ability||"";if(!e.deployAbilityConsumed&&Br(r,"deploy:"))return Br(r,"support  deploy:")?lt(e,"Support",n):!0;if(e.abilityUsedInPhase!==t){let l="";if(t===0&&(l="setup:"),t===1&&(l="act:"),t===2&&(l="commit:"),l&&Br(r,l))return Br(r,`support  ${l}`)?lt(e,"Support",n):!0}return e.deck==="Command"&&(t===1||t===2)},Ay=(e,t,n,r)=>{if(n!==e.ownerId)return null;if(!e.deployAbilityConsumed){const o=Ly(e,t,n,r);if(o){const l=e.ability||"";if(Br(l,"support  deploy:")&&lt(e,"Support",n),o)return{...o,isDeployAbility:!0}}}if(e.abilityUsedInPhase!==t.currentPhase){const o=My(e,t,n,r);if(o)return o}return null},Ly=(e,t,n,r)=>{const o=e.name.toLowerCase(),l=lt(e,"Support",n);if(o.includes("ip dept agent"))return{type:"CREATE_STACK",tokenType:"Stun",count:2,requiredTargetStatus:"Exploit",placeAllAtOnce:!0};if(o.includes("tactical agent"))return{type:"CREATE_STACK",tokenType:"Aim",count:1,requiredTargetStatus:"Threat"};if(o.includes("riot agent"))return{type:"ENTER_MODE",mode:"RIOT_PUSH",sourceCard:e,sourceCoords:r,payload:{}};if(o.includes("threat analyst"))return{type:"CREATE_STACK",tokenType:"Exploit",count:1};if(o.includes("reckless provocateur"))return{type:"ENTER_MODE",mode:"SWAP_POSITIONS",sourceCard:e,sourceCoords:r,payload:{filter:(a,i,u)=>hs(i,u,r.row,r.col)}};if(o.includes("data liberator"))return{type:"CREATE_STACK",tokenType:"Exploit",count:1};if(o.includes("cautious avenger"))return{type:"CREATE_STACK",tokenType:"Aim",count:1,sourceCoords:r,mustBeInLineWithSource:!0};if(o.includes("inventive maker"))return{type:"ENTER_MODE",mode:"SPAWN_TOKEN",sourceCard:e,sourceCoords:r,payload:{tokenName:"Recon Drone"}};if(o.includes("faber"))return{type:"ENTER_MODE",mode:"SPAWN_TOKEN",sourceCard:e,sourceCoords:r,payload:{tokenName:"Walking Turret"}};if(o.includes("censor"))return{type:"CREATE_STACK",tokenType:"Exploit",count:1};if(o.includes("princeps"))return{type:"ENTER_MODE",mode:"PRINCEPS_SHIELD_THEN_AIM",sourceCard:e,sourceCoords:r,payload:{}};if(o.includes("immunis")&&l)return{type:"OPEN_MODAL",mode:"IMMUNIS_RETRIEVE",sourceCard:e,sourceCoords:r,payload:{filter:(a,i)=>hs(a,i,r.row,r.col)}};if(o.includes("code keeper"))return{type:"GLOBAL_AUTO_APPLY",sourceCard:e,sourceCoords:r,payload:{tokenType:"Exploit",count:1,filter:a=>a.ownerId!==n&&lt(a,"Threat",n)}};if(o.includes("devout synthetic"))return{type:"ENTER_MODE",mode:"RIOT_PUSH",sourceCard:e,sourceCoords:r,payload:{}};if(o.includes("unwavering integrator"))return{type:"CREATE_STACK",tokenType:"Exploit",count:1};if(o.includes("signal prophet"))return{type:"GLOBAL_AUTO_APPLY",sourceCard:e,sourceCoords:r,payload:{tokenType:"Exploit",count:1,filter:a=>a.ownerId===n&&lt(a,"Support",n)}};if(o.includes("zealous missionary"))return{type:"CREATE_STACK",tokenType:"Exploit",count:1};if(e.ability.toLowerCase().includes("deploy:")){if(e.ability.toLowerCase().includes("shield 1"))return{type:"CREATE_STACK",tokenType:"Shield",count:1};if(e.ability.toLowerCase().includes("stun 1"))return{type:"CREATE_STACK",tokenType:"Stun",count:1};if(e.ability.toLowerCase().includes("aim 1"))return{type:"CREATE_STACK",tokenType:"Aim",count:1}}return null},My=(e,t,n,r)=>{const o=e.name.toLowerCase(),l=t.currentPhase,a=lt(e,"Support",n);if(l===0){if(o.includes("tactical agent"))return{type:"ENTER_MODE",mode:"SELECT_TARGET",sourceCard:e,sourceCoords:r,payload:{actionType:"DESTROY",filter:i=>lt(i,"Aim")}};if(o.includes("patrol agent"))return{type:"ENTER_MODE",mode:"PATROL_MOVE",sourceCard:e,sourceCoords:r,payload:{}};if(o.includes("cautious avenger"))return a?{type:"ENTER_MODE",mode:"SELECT_TARGET",sourceCard:e,sourceCoords:r,payload:{actionType:"DESTROY",filter:i=>lt(i,"Aim")}}:null;if(o.includes("inventive maker"))return a?{type:"OPEN_MODAL",mode:"RETRIEVE_DEVICE",sourceCard:e,sourceCoords:r,payload:{}}:null;if(o.includes("princeps"))return{type:"ENTER_MODE",mode:"SELECT_TARGET",sourceCard:e,sourceCoords:r,payload:{actionType:"DESTROY",filter:(i,u,c)=>Py(u,c,r.row,r.col)&&lt(i,"Aim",n)}};if(o.includes("centurion"))return a?{type:"ENTER_MODE",mode:"SELECT_LINE_END",sourceCard:e,sourceCoords:r,payload:{actionType:"CENTURION_BUFF",firstCoords:r}}:null;if(o.includes("devout synthetic"))return a?{type:"ENTER_MODE",mode:"SELECT_TARGET",sourceCard:e,sourceCoords:r,payload:{actionType:"DESTROY",filter:(i,u,c)=>hs(u,c,r.row,r.col)&&i.ownerId!==n&&(lt(i,"Threat",n)||lt(i,"Stun",n))}}:null;if(o.includes("unwavering integrator"))return a?{type:"ENTER_MODE",mode:"INTEGRATOR_LINE_SELECT",sourceCard:e,sourceCoords:r,payload:{}}:null;if(o.includes("recon drone"))return{type:"ENTER_MODE",mode:"SELECT_CELL",sourceCard:e,sourceCoords:r,payload:{allowSelf:!1,range:"global"}}}if(l===1&&Br(e.ability,"act:"),l===2){if(o.includes("ip dept agent"))return a?{type:"ENTER_MODE",mode:"SELECT_TARGET",sourceCard:e,sourceCoords:r,payload:{actionType:"DESTROY",filter:i=>i.ownerId!==n&&lt(i,"Revealed",n)}}:null;if(o.includes("patrol agent")||o.includes("riot agent"))return{type:"CREATE_STACK",tokenType:"Stun",count:1,requiredTargetStatus:"Threat",onlyOpponents:!0,mustBeAdjacentToSource:!0,sourceCoords:r};if(o.includes("threat analyst")){if(!a)return null;let i=0;return t.board.forEach(u=>{u.forEach(c=>{c.card&&c.card.statuses&&(i+=c.card.statuses.filter(x=>x.type==="Exploit"&&x.addedByPlayerId===n).length)})}),i===0?null:{type:"CREATE_STACK",tokenType:"Revealed",count:i}}if(o.includes("reckless provocateur"))return{type:"ENTER_MODE",mode:"TRANSFER_ALL_STATUSES",sourceCard:e,sourceCoords:r,payload:{filter:i=>i.id===e.id?!1:i.ownerId===n}};if(o.includes("vigilant spotter"))return{type:"CREATE_STACK",tokenType:"Revealed",count:1,onlyFaceDown:!0,excludeOwnerId:n};if(o.includes("recon drone"))return{type:"ENTER_MODE",mode:"REVEAL_ENEMY",sourceCard:e,sourceCoords:r,payload:{filter:(i,u,c)=>hs(u,c,r.row,r.col)&&i.ownerId!==n}};if(o.includes("censor"))return a?{type:"ENTER_MODE",mode:"CENSOR_SWAP",sourceCard:e,sourceCoords:r,payload:{filter:i=>lt(i,"Exploit",n)}}:null;if(o.includes("walking turret"))return!a||lt(e,"Shield")?null:{type:"ENTER_MODE",mode:"WALKING_TURRET_SHIELD",sourceCard:e,sourceCoords:r,payload:{}};if(o.includes("code keeper"))return a?{type:"ENTER_MODE",mode:"SELECT_UNIT_FOR_MOVE",sourceCard:e,sourceCoords:r,payload:{filter:i=>i.ownerId!==n&&lt(i,"Exploit",n)}}:null;if(o.includes("signal prophet"))return a?{type:"ENTER_MODE",mode:"SELECT_UNIT_FOR_MOVE",sourceCard:e,sourceCoords:r,payload:{filter:i=>i.ownerId===n&&lt(i,"Exploit",n)}}:null;if(o.includes("zealous missionary"))return a?{type:"ENTER_MODE",mode:"ZEALOUS_WEAKEN",sourceCard:e,sourceCoords:r,payload:{filter:i=>lt(i,"Exploit",n)}}:null}return null},bo={ui:{startGame:"Start Game",joinGame:"Join Game",deckBuilding:"Deck Building",rules:"Rules & Tutorial",settings:"Settings",language:"Language",serverAddress:"Server Address",saveApply:"Save & Apply",cancel:"Cancel",close:"Close",tokens:"Tokens",counters:"Counters",phase:"Phase",autoAbility:"Auto-Ability",newGame:"New Game",exit:"Exit",surrender:"Surrender",mode:"Mode",size:"Size",dummies:"Dummies",spectatorMode:"Spectator Mode",spectatorMsg:"You are watching the game.",readyCheck:"Ready to Start?",imReady:"I'm Ready",waiting:"Waiting...",cancelStart:"Cancel Start",assignTeams:"Assign Teams",confirmTeams:"Confirm Teams & Start",unassigned:"Unassigned Players",team:"Team",deck:"DECK",discard:"DISCARD",showcase:"Showcase",customDeck:"Custom Deck",loadDeck:"Load",clear:"Clear",save:"Save",filter:"Filter",currentDeck:"Current Deck",emptyDeck:"Your deck is empty.",clickToAdd:"Click cards on the left to add them.",view:"View",play:"Play",playFaceDown:"Play Face Down",toHand:"To Hand",toDiscard:"To Discard",revealToAll:"Reveal to All",requestReveal:"Request Reveal",flipUp:"Flip Face Up",flipDown:"Flip Face Down"},rules:{title:"Game Rules",introTitle:"1. Introduction",introText:"**New Avalon: Skirmish** is a tactical card game where opponents control units on a grid battlefield. The goal is to outmaneuver your opponent using placement strategies and card abilities to score 30 points.",componentsTitle:"2. Components",componentsText:`- **Deck:** A collection of Unit and Command cards (standard size ~15-40).
- **Battlefield:** A square grid (typically 5x5 to 7x7).
- **Hand:** Players hold cards hidden from opponents.
- **Discard Pile:** Used cards go here.`,turnTitle:"3. Turn Structure",turnText:`A turn is divided into phases. Players act in turn order within each phase:
1. **Setup Phase:** 'Setup' abilities trigger.
2. **Main Phase:** Players deploy units and use 'Act' abilities.
3. **Commit Phase:** 'Commit' abilities trigger.
4. **Scoring Phase:** Players choose a row/column to score.
5. **Draw Phase:** Draw up to 6 cards.
6. **End Phase:** Pass priority token.`,priorityTitle:"4. Priority System",priorityText:"Whenever a player performs an action, opponents get a chance to respond (Priority). You can play Command cards or activate abilities when you have priority. If all players pass, the top action on the Stack resolves.",stackTitle:"5. The Stack",stackText:"Actions use a Last-In, First-Out (LIFO) stack. If Player A plays a card, and Player B responds with a Command, Player B's command resolves first.",supportTitle:"6. Status: Support",supportText:"A unit has **Support** if it is orthogonally adjacent (Up, Down, Left, Right) to an allied unit. Many powerful abilities require Support to activate.",threatTitle:"7. Status: Threat",threatText:`A unit is **Threatened** if:
1. It is sandwiched between two enemies.
2. It is pinned against the grid edge by an enemy.
Threatened units are vulnerable to destruction.`,deployTitle:"8. Deployment",deployText:"During the Main Phase, the active player can deploy a unit from their hand to any empty cell (unless restricted by card text).",scoringTitle:"9. Scoring",scoringText:"In the Scoring phase, you select a row or column. You gain points equal to the total Power of your un-stunned units in that line. Status effects like 'Exploit' may boost this score.",endgameTitle:"10. Winning",endgameText:"The game enters the final round when a player reaches 30 points. The player with the highest score at the end of that round wins."},counters:{Aim:{name:"Aim",description:`This counter has no effect on its own, but it can modify the abilities of cards.
This card is easier to destroy.`},Exploit:{name:"Exploit",description:`This counter has no effect on its own, but it can modify the abilities of cards.
Hacker and programmer cards will have a greater effect on this card.`},LastPlayed:{name:"LastPlayed",description:"This card was last played by its owner."},Revealed:{name:"Revealed",description:"This card's face is visible to the owner of the counter revealed. Can be placed on cards in hand."},Stun:{name:"Stun",description:`A stunned card cannot activate abilities or gain points. Its owner's effects cannot move it, but opponent effects can.
Remove 1 stun counter from the card at the end of the Commit Phase.`},Shield:{name:"Shield",description:"If an effect attempts to destroy this card, remove 1 shield counter from it instead."},Support:{name:"Support",description:`This counter has no effect on its own, but it can modify the abilities of cards.
This card is adjacent to its ally.`},Threat:{name:"Threat",description:`This counter has no effect on its own, but it can modify the abilities of cards.
This card is surrounded and pinned to the edge of the battlefield by an opponent's cards.`},"Power+":{name:"Power+",description:"Increases the power of the card by 1."},"Power-":{name:"Power-",description:"Decreases the power of the card by 1."}},cards:{ipDeptAgent:{name:"IP Dept Agent",ability:`Deploy: 2 stuns a card with exploit.
Support  Commit: A player discards a revealed card of your choice.`,flavorText:`- "You've violated copyright. Open the door. We have a search warrant."`},tacticalAgent:{name:"Tactical Agent",ability:`Deploy: Aim a card with threat.
Setup: Destroy the card with aim.`,flavorText:'- "Nobody move! SynchroTech Security Service!"'},patrolAgent:{name:"Patrol Agent",ability:`Setup: Move this card to any cell in a line.
Commit: Stun an adjacent opponent card with threat.`,flavorText:"They say the city never sleeps. We make sure it doesn't even blink."},riotAgent:{name:"Riot Agent",ability:`Deploy: Push an opponent card 1 cell. ay take its place.
Commit: Stun an adjacent opponent card with threat.`,flavorText:'- "Citizens, disperse! This meeting is unauthorized by SynchroTech."'},threatAnalyst:{name:"Threat Analyst",ability:`Deploy: Exploit any card.
Support  Commit: Reveal 1 card for each of your exploits on the battlefield.`,flavorText:""},recklessProvocateur:{name:"Reckless Provocateur",ability:`Deploy: Swap positions with a card in an adjacent cell.
Commit: Move all counters from an allied card on the battlefield to this card.`,flavorText:'- "Patience is a weapon. Vengeance is an art."'},dataLiberator:{name:"Data Liberator",ability:`Deploy: Exploit any card.
Support  Pas: Cards with your exploit counters give you points.`,flavorText:`- "Information doesn't want to be free. It needs to be."`},cautiousAvenger:{name:"Cautious Avenger",ability:`Deploy: Aim a card in a line.
Support  Setup: Destroy the card with aim.`,flavorText:'- "Patience is a weapon. Vengeance is an art."'},vigilantSpotter:{name:"Vigilant Spotter",ability:`Support  Pas: When an opponent's revealed card enters the battlefield, gain 2 points.
Commit: Each opponent reveals 1 cards to you.`,flavorText:'- "Patience is a weapon. Vengeance is an art."'},inventiveMaker:{name:"Inventive Maker",ability:`Deploy: Place the Recon Drone token in a free adjacent cell.
Support  Setup: Return a device card from the discard pile to your hand.`,flavorText:'- "Patience is a weapon. Vengeance is an art."'},faber:{name:"Faber",ability:"Deploy: Place the Walking Turret card in a free adjacent cell.",flavorText:"In the gilded halls of the Optimates, even the tools of war are works of art."},censor:{name:"Censor",ability:`Deploy: Exploit any card.
Support  Commit: Swap 1 of your exploits for 1 stun.`,flavorText:"In the gilded halls of the Optimates, even the tools of war are works of art."},princeps:{name:"Princeps",ability:`Deploy: Shield 1. Aim a card with threat.
Setup: Destroy a card with aim in a line.`,flavorText:"Order is not requested. It is imposed."},immunis:{name:"Immunis",ability:"Support  Deploy: Return your Optimate from the discard pile to an adjacent cell. At the end of the phase, return the Optimate for 2 stuns.",flavorText:"In the gilded halls of the Optimates, even the tools of war are works of art."},centurion:{name:"Centurion",ability:"Support  Setup: The power of other allied cards in the line increases by 1.",flavorText:"In the gilded halls of the Optimates, even the tools of war are works of art."},codeKeeper:{name:"Code Keeper",ability:`Deploy: Exploit opponent cards with threat.
Support  Commit: Move opponent card with exploit 1 cell.`,flavorText:"The Signal is truth. All else is noise."},devoutSynthetic:{name:"Devout Synthetic",ability:`Deploy: Push an adjacent card 1 cell. May take its place.
Support  Setup: Destroy an adjacent card with threat or stun.`,flavorText:"Flesh is a bug. The Signal is the patch."},unwaveringIntegrator:{name:"Unwavering Integrator",ability:`Deploy: Exploit any card.
Support  Setup: Gain 1 point for each of your exploits in the line.`,flavorText:"The Signal is truth. All else is noise."},signalProphet:{name:"Signal Prophet",ability:`Deploy: Exploit each of your cards with support.
Support  Commit: Move your card with your exploit 1 cell.`,flavorText:"The Signal is truth. All else is noise."},zealousMissionary:{name:"Zealous Missionary",ability:`Deploy: Exploit any card.
Support  Commit: Reduce the power of any card with your exploit by 1.`,flavorText:"The Signal is truth. All else is noise."},overwatch:{name:"Overwatch",ability:`Aim any card. Choose 2 of 3:
 Move units with your aim 1 or 2 cells.
 Reveal 1 card for each of your aim.
 Draw 1 card for each of your aim.`},tacticalManeuver:{name:"Tactical Maneuver",ability:`Move your unit to any cell in a line. Choose 2 of 3: 
 Draw cards equal to the power of an adjacent allied unit. 
 Move your unit 1 or 2 cells. 
 Gain points equal to the power of one of the moved units.`},inspiration:{name:"Inspiration",ability:`Remove any number of counters from your unit. Choose 2 of 3: 
 Move this unit 1 or 2 cells. 
 Draw 1 card for each counter removed. 
 Gain 1 point for each counter removed.`},dataInterception:{name:"Data Interception",ability:`Exploit any card. Choose 2 of 3: 
 Move a unit with your exploit to any cell in a line. 
 Reveal 1 card for each of your exploits. 
 Draw cards equal to the power of the highest power revealed unit.`},falseOrders:{name:"False Orders",ability:`Move an opponent unit 1 or 2 cells. Choose 2 of 3: 
 Move an opponent unit 1 or 2 cells. 
 Stun the moved opponent unit. 
 Draw cards equal to the power of one of the moved opponent units.`},mobilization1:{name:"Line Breach",ability:"Gain points in a chosen line of the battlefield."},mobilization2:{name:"Logistics Chain",ability:"Gain points in a chosen diagonal of the battlefield."},mobilization3:{name:"Sector Capture",ability:"Gain points from 4 adjacent allied cards."},reconDrone:{name:"Recon Drone",ability:`Setup: Move to any cell.
Commit: You may reveal a card from the hand of your opponent who owns an adjacent card.`,flavorText:"SynchroTech has created lightweight drones to patrol the streets, but the Hoods have other plans for them."},walkingTurret:{name:"Walking Turret",ability:"Support  Commit: If without shield, gain shield 1.",flavorText:"This military monster clearly has no place on the city streets."}}},Uy={ui:{startGame:" ",joinGame:"",deckBuilding:" ",rules:"  ",settings:"",language:"",serverAddress:" ",saveApply:"",cancel:"",close:"",tokens:"",counters:"",phase:"",autoAbility:"-",newGame:" ",exit:"",surrender:"",mode:"",size:"",dummies:"",spectatorMode:" ",spectatorMsg:"   .",readyCheck:" ?",imReady:" ",waiting:"...",cancelStart:"",assignTeams:" ",confirmTeams:"  ",unassigned:"",team:"",deck:"",discard:"",showcase:"",customDeck:" ",loadDeck:"",clear:"",save:"",filter:"",currentDeck:" ",emptyDeck:"  .",clickToAdd:"   ,   .",view:"",play:"",playFaceDown:"  ",toHand:" ",toDiscard:" ",revealToAll:" ",requestReveal:" ",flipUp:"",flipDown:"  "},rules:{title:" ",introTitle:"1. ",introText:"**New Avalon: Skirmish**     ,       -.    ,     ,   30  .",componentsTitle:"2. ",componentsText:`- **:**      ( 15-40 ).
- ** :**   ( 5x5  7x7).
- **:**  ,   .
- **:**      .`,turnTitle:"3.  ",turnText:`   .       :
1. ** :**   Setup.
2. ** :**       Act.
3. ** :**   Commit.
4. ** :**   /   .
5. ** :**   6   .
6. ** :**    .`,priorityTitle:"4.  ",priorityText:"   ,     ().        ,     .   ,     .",stackTitle:"5. ",stackText:"   LIFO (    ).     ,     ,     .",supportTitle:"6. :  (Support)",supportText:"  **Support**,      (, ,   )   .       .",threatTitle:"7. :  (Threat)",threatText:`   **Threat**, :
1.     .
2.      .
     .`,deployTitle:"8. ",deployText:"       ()        (     ).",scoringTitle:"9.  ",scoringText:"       .   ,     ( )    .   Exploit    .",endgameTitle:"10. ",endgameText:"    ,      30 .          ."},counters:{Aim:{name:"Aim",description:`       ,     .
   .`},Exploit:{name:"Exploit",description:`       ,     .
          .`},LastPlayed:{name:"LastPlayed",description:"      ."},Revealed:{name:"Revealed",description:"      revealed.      ."},Stun:{name:"Stun",description:`        .       ,    .
 1         (Commit).`},Shield:{name:"Shield",description:"     ,      1  ."},Support:{name:"Support",description:`       ,     .
     .`},Threat:{name:"Threat",description:`       ,     .
         .`},"Power+":{name:"Power+",description:"    1."},"Power-":{name:"Power-",description:"    1."}},cards:{ipDeptAgent:{name:"  IP",ability:`Deploy:  2 Stun   Exploit.
Support  Commit:    (Revealed)    .`,flavorText:'- "   .  .     ."'},tacticalAgent:{name:" ",ability:`Deploy: Aim    Threat.
Setup:    Aim.`,flavorText:'- "  !   SynchroTech!"'},patrolAgent:{name:" ",ability:`Setup:        .
Commit: Stun     Threat.`,flavorText:",    .  ,     ."},riotAgent:{name:" ",ability:`Deploy:     1 .    .
Commit: Stun     Threat.`,flavorText:'- ", !     SynchroTech."'},threatAnalyst:{name:" ",ability:`Deploy: Exploit   .
Support  Commit:  1     Exploit   .`,flavorText:""},recklessProvocateur:{name:" ",ability:`Deploy:       .
Commit:            .`,flavorText:'- "   .    ."'},dataLiberator:{name:" ",ability:`Deploy: Exploit   .
Support  Pas:     Exploit   .`,flavorText:'- "    .   ."'},cautiousAvenger:{name:" ",ability:`Deploy: Aim    .
Support  Setup:    Aim.`,flavorText:'- "   .    ."'},vigilantSpotter:{name:" ",ability:`Support  Pas:   (Revealed)     ,  2 .
Commit:     1 .`,flavorText:'- "   .    ."'},inventiveMaker:{name:" ",ability:`Deploy:       .
Support  Setup:       .`,flavorText:'- "   .    ."'},faber:{name:"",ability:"Deploy:        .",flavorText:"         ."},censor:{name:"",ability:`Deploy: Exploit   .
Support  Commit:  1  Exploit  1 Stun.`,flavorText:"         ."},princeps:{name:"",ability:`Deploy: Shield 1. Aim    Threat.
Setup:    Aim  .`,flavorText:"  .  ."},immunis:{name:"",ability:"Support  Deploy:        .       2 Stun.",flavorText:"         ."},centurion:{name:"",ability:"Support  Setup:         1.",flavorText:"         ."},codeKeeper:{name:" ",ability:`Deploy: Exploit     Threat.
Support  Commit:     Exploit  1 .`,flavorText:"   .    ."},devoutSynthetic:{name:" ",ability:`Deploy:     1 .    .
Support  Setup:     Threat  Stun.`,flavorText:"   .    ."},unwaveringIntegrator:{name:" ",ability:`Deploy: Exploit   .
Support  Setup:  1     Exploit  .`,flavorText:"   .    ."},signalProphet:{name:" ",ability:`Deploy: Exploit      Support.
Support  Commit:      Exploit  1 .`,flavorText:"   .    ."},zealousMissionary:{name:" ",ability:`Deploy: Exploit   .
Support  Commit:       Exploit  1.`,flavorText:"   .    ."},overwatch:{name:"",ability:`Aim   .  2  3:
     Aim  1  2 .
  1     Aim.
  1     Aim.`},tacticalManeuver:{name:" ",ability:`       .  2  3: 
  ,     . 
     1  2 . 
  ,      .`},inspiration:{name:"",ability:`      .  2  3: 
     1  2 . 
  1     . 
  1     .`},dataInterception:{name:" ",ability:`Exploit   .  2  3: 
     Exploit     . 
  1     Exploit. 
  ,      .`},falseOrders:{name:" ",ability:`    1  2 .  2  3: 
     1  2 . 
 Stun   . 
  ,       .`},mobilization1:{name:" ",ability:"      ."},mobilization2:{name:" ",ability:"      ."},mobilization3:{name:" ",ability:"   4   ."},reconDrone:{name:"",ability:`Setup:    .
Commit:       ,    .`,flavorText:"SynchroTech      ,   Hoods    ."},walkingTurret:{name:" ",ability:"Support  Commit:   Shield,  Shield 1.",flavorText:"        ."}}},zt=(e,t)=>({ui:{...bo.ui,...e},rules:{...bo.rules,title:t},cards:bo.cards,counters:bo.counters}),On={en:bo,ru:Uy,de:zt({startGame:"Spiel Starten",settings:"Einstellungen",rules:"Regeln",language:"Sprache",exit:"Verlassen",surrender:"Aufgeben"},"Spielregeln"),fr:zt({startGame:"Dmarrer",settings:"Paramtres",rules:"Rgles",language:"Langue",exit:"Quitter",surrender:"Abandonner"},"Rgles du jeu"),it:zt({startGame:"Inizia Gioco",settings:"Impostazioni",rules:"Regole",language:"Lingua",exit:"Esci",surrender:"Arrendersi"},"Regole del gioco"),pt:zt({startGame:"Iniciar Jogo",settings:"Configuraes",rules:"Regras",language:"Idioma",exit:"Sair",surrender:"Desistir"},"Regras do Jogo"),es:zt({startGame:"Iniciar Juego",settings:"Ajustes",rules:"Reglas",language:"Idioma",exit:"Salir",surrender:"Rendirse"},"Reglas del Juego"),zh:zt({startGame:"",settings:"",rules:"",language:"",exit:"",surrender:""},""),hi:zt({startGame:"  ",settings:"",rules:"",language:"",exit:" ",surrender:""},"  "),ar:zt({startGame:" ",settings:"",rules:"",language:"",exit:"",surrender:""}," "),uk:zt({startGame:" ",settings:"",rules:"",language:"",exit:"",surrender:""}," "),be:zt({startGame:" ",settings:"",rules:"",language:"",exit:"",surrender:""}," "),tt:zt({startGame:" ",settings:"",rules:"",language:"",exit:"",surrender:""}," "),sr:zt({startGame:" ",settings:"",rules:"",language:"",exit:"",surrender:" "}," ")},zy={en:"English",ru:"",de:"Deutsch",fr:"Franais",it:"Italiano",pt:"Portugus",es:"Espaol",zh:"",hi:"",ar:"",uk:"",be:"",tt:"",sr:""},mp=E.createContext(void 0),Fy=({children:e})=>{const[t,n]=E.useState("en");E.useEffect(()=>{const u=localStorage.getItem("app_language");u&&On[u]&&n(u)},[]);const r=u=>{n(u),localStorage.setItem("app_language",u)},o=u=>On[t].ui[u]||On.en.ui[u]||u,l=u=>On[t].cards[u]||On.en.cards[u],a=u=>On[t].counters[u]||On.en.counters[u],i=t==="ar";return s.jsx(mp.Provider,{value:{language:t,setLanguage:r,t:o,getCardTranslation:l,getCounterTranslation:a,resources:On[t],isRTL:i},children:s.jsx("div",{dir:i?"rtl":"ltr",children:e})})},Nn=()=>{const e=E.useContext(mp);if(!e)throw new Error("useLanguage must be used within a LanguageProvider");return e},It=({card:e,isFaceUp:t,playerColorMap:n,localPlayerId:r,imageRefreshVersion:o,disableTooltip:l,smallStatusIcons:a,activePhaseIndex:i,activeTurnPlayerId:u,disableActiveHighlights:c,extraPowerSpacing:x})=>{const{getCardTranslation:f}=Nn(),[p,T]=E.useState(!1),[S,I]=E.useState({x:0,y:0}),z=E.useRef(null),[d,m]=E.useState(!1),g=e.baseId?f(e.baseId):void 0,C=g?{...e,...g}:e;E.useEffect(()=>{m(!1)},[i]),E.useEffect(()=>{c||m(!1)},[c]);const[N,P]=E.useState(e.imageUrl);E.useEffect(()=>{let V=e.imageUrl;if(o&&V){const L=V.includes("?")?"&":"?";V=`${V}${L}v=${o}`}P(V)},[e.imageUrl,o]);const j=()=>{let V=e.fallbackImage;if(o&&V){const L=V.includes("?")?"&":"?";V=`${V}${L}v=${o}`}N!==V&&P(V)},B=V=>{l||V.clientX===0&&V.clientY===0||(I({x:V.clientX,y:V.clientY}),!p&&!z.current&&(z.current=window.setTimeout(()=>{T(!0)},250)))},ie=V=>{l||((V.clientX!==0||V.clientY!==0)&&I({x:V.clientX,y:V.clientY}),z.current&&clearTimeout(z.current),z.current=window.setTimeout(()=>{T(!0)},250))},$=()=>{z.current&&(clearTimeout(z.current),z.current=null),T(!1)},fe=()=>{z.current&&(clearTimeout(z.current),z.current=null),T(!1)},ke=i!==void 0&&u!==void 0?vi(e,i,u):!1,be=!c&&!d&&ke,Te=V=>{be&&r===e.ownerId&&m(!0)},Ie=(e.statuses??[]).reduce((V,L)=>{const oe=`${L.type}_${L.addedByPlayerId}`;return V[oe]||(V[oe]={type:L.type,playerId:L.addedByPlayerId,count:0}),V[oe].count++,V},{}),W=({type:V,playerId:L,count:oe})=>{const Q=n.get(L),we=Q&&Rt[Q]?Rt[Q].bg:"bg-gray-500";let ee=Zo[V];if(ee&&o){const Pe=ee.includes("?")?"&":"?";ee=`${ee}${Pe}v=${o}`}const ae=["Support","Threat","Revealed","LastPlayed"].includes(V),me=!ae&&oe>1,Y=me?"p-1.5":"p-1",F=a?"w-6 h-6":"w-8 h-8",se=a?me?"text-xs":"text-base":me?"text-base":"text-lg",xe=a?"text-[10px]":"text-xs";return s.jsxs("div",{className:`relative ${F} flex items-center justify-center ${we} bg-opacity-80 rounded-sm shadow-md flex-shrink-0`,title:`${V} (Player ${L}) ${!ae&&oe>0?`x${oe}`:""}`,children:[ee?s.jsx("img",{src:ee,alt:V,className:`object-contain w-full h-full transition-all duration-150 ${Y}`}):s.jsx("span",{className:`text-white font-black transition-all duration-150 ${se}`,style:{textShadow:"0 0 2px black"},children:V.charAt(0)}),me&&s.jsx("span",{className:`absolute top-0 right-0.5 text-white font-bold ${xe} leading-none`,style:{textShadow:"1px 1px 2px black"},children:oe})]})};if(e.deck==="counter")return s.jsx("div",{title:C.name,className:`w-full h-full ${e.color} shadow-md`,style:{clipPath:"polygon(30% 0%, 70% 0%, 100% 30%, 100% 70%, 70% 100%, 30% 100%, 0% 70%, 0% 30%)"}});const le=e.ownerId?n.get(e.ownerId):null,A=le&&Rt[le]?Rt[le]:null,U=Object.values(Ie).sort((V,L)=>V.type!==L.type?V.type.localeCompare(L.type):V.playerId-L.playerId),ne=e.powerModifier||0,te=Math.max(0,e.power+ne);let _="text-white";ne>0?_="text-green-400":ne<0&&(_="text-red-500");const O=p&&t&&!l&&S.x>0&&S.y>0,K=x?"bottom-[10px] right-[10px]":"bottom-[5px] right-[5px]";return s.jsxs(s.Fragment,{children:[t?(()=>{var se;const V=A?A.border:((se=dp[e.deck])==null?void 0:se.color)||"border-gray-300",L=e.deck===Re.Tokens?e.color:"bg-card-face",oe=(e.deck===Re.Tokens,"text-black"),Q=["Support","Shield"],we=U.filter(xe=>Q.includes(xe.type)),ee=U.filter(xe=>!Q.includes(xe.type)&&xe.type!=="LastPlayed"),ae=U.find(xe=>xe.type==="LastPlayed"),me=ae?[ae,...we]:we,Y=A?A.glow:"shadow-[0_0_15px_#ffffff]",F=be?`border-[6px] shadow-2xl ${Y}`:"border-4";return s.jsxs("div",{onMouseEnter:ie,onMouseLeave:$,onMouseMove:B,onMouseDown:fe,onClick:Te,className:`relative w-full h-full ${L} rounded-md shadow-md ${F} ${V} ${oe} flex-shrink-0 select-none overflow-hidden transition-all duration-300 ${be?"scale-[1.15] z-10":""}`,children:[N?s.jsx("img",{src:N,onError:j,alt:C.name,className:"absolute inset-0 w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full p-1 flex items-center justify-center",children:s.jsx("span",{className:"text-center text-sm font-bold",children:C.name})}),U.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute top-[3px] left-[3px] right-[3px] flex flex-row-reverse flex-wrap justify-start items-start z-10 pointer-events-none",children:ee.map(xe=>s.jsx(W,{type:xe.type,playerId:xe.playerId,count:xe.count},`${xe.type}_${xe.playerId}`))}),s.jsx("div",{className:"absolute bottom-[3px] left-[3px] right-[30px] flex flex-wrap-reverse content-start items-end z-10 pointer-events-none",children:me.map(xe=>s.jsx(W,{type:xe.type,playerId:xe.playerId,count:xe.count},`${xe.type}_${xe.playerId}`))})]}),e.power>0&&s.jsx("div",{className:`absolute ${K} w-8 h-8 rounded-full ${A?A.bg:"bg-gray-600"} border-[3px] border-white flex items-center justify-center z-20 shadow-md`,children:s.jsx("span",{className:`${_} font-bold text-lg leading-none`,style:{textShadow:"0 0 2px black"},children:te})})]})})():(()=>{const V=A?A.bg:"bg-card-back",L=A?A.border:"border-blue-300",oe=U.find(Q=>Q.type==="LastPlayed");return s.jsx("div",{onMouseEnter:ie,onMouseLeave:$,onMouseMove:B,onMouseDown:fe,className:`relative w-full h-full ${V} rounded-md shadow-md border-2 ${L} flex-shrink-0 transition-transform duration-300 ${be?"scale-[1.15] z-10":""}`,children:oe&&s.jsx("div",{className:"absolute bottom-[3px] left-[3px] pointer-events-none",children:s.jsx(W,{type:oe.type,playerId:oe.playerId,count:oe.count})})})})(),O&&s.jsx(gu,{x:S.x,y:S.y,children:s.jsx(xu,{card:C})})]})},By=({row:e,col:t,cell:n,isGameStarted:r,handleDrop:o,draggedItem:l,setDraggedItem:a,openContextMenu:i,playMode:u,setPlayMode:c,playerColorMap:x,localPlayerId:f,onCardDoubleClick:p,onEmptyCellDoubleClick:T,imageRefreshVersion:S,cursorStack:I,setCursorStack:z,currentPhase:d,activeTurnPlayerId:m,onCardClick:g,onEmptyCellClick:C,isValidTarget:N,showNoTarget:P,disableActiveHighlights:j})=>{const[B,ie]=Fn.useState(!1),$=K=>{K.preventDefault(),l&&o(l,{target:"board",boardCoords:{row:e,col:t}}),ie(!1)},fe=()=>{if(u){const K={...u.sourceItem,card:{...u.sourceItem.card}};K.card.isFaceDown=!!u.faceDown,o(K,{target:"board",boardCoords:{row:e,col:t}}),c(null)}else n.card&&g?g(n.card,{row:e,col:t}):!n.card&&C&&C({row:e,col:t})},ke=K=>{K.preventDefault();const V=(l==null?void 0:l.source)==="counter_panel";(!n.card||n.card&&V)&&ie(!0)},be=()=>{ie(!1)},Te=!!u,Ie=!!I,W=!!n.card,le="w-full h-full rounded-lg transition-colors duration-200 flex items-center justify-center relative",A=!!l&&(!W||W&&l.source==="counter_panel"),te=N||Te&&!W||Ie&&N,O=`bg-board-cell-active ${B&&A?"bg-indigo-400 opacity-80":""} ${Te&&W?"cursor-not-allowed":""} ${te?"ring-4 ring-cyan-400 shadow-[0_0_15px_#22d3ee] cursor-pointer z-10":""}`;return s.jsxs("div",{onDrop:$,onDragOver:ke,onDragLeave:be,onClick:fe,onContextMenu:K=>{n.card||i(K,"emptyBoardCell",{boardCoords:{row:e,col:t}})},onDoubleClick:()=>{n.card||T({row:e,col:t})},className:`${le} ${O}`,"data-interactive":!n.card,"data-board-coords":`${e},${t}`,children:[te&&s.jsx("div",{className:"absolute inset-0 rounded-lg bg-cyan-400 bg-opacity-30 animate-pulse pointer-events-none"}),n.card&&s.jsxs("div",{draggable:r,onDragStart:()=>a({card:n.card,source:"board",boardCoords:{row:e,col:t},isManual:!0}),onDragEnd:()=>a(null),onContextMenu:K=>i(K,"boardItem",{card:n.card,boardCoords:{row:e,col:t}}),onDoubleClick:K=>{K.stopPropagation(),I?fe():p(n.card,{row:e,col:t})},className:`w-full h-full ${r?"cursor-grab":"cursor-default"} relative`,"data-interactive":"true",children:[s.jsx(It,{card:n.card,isFaceUp:(()=>{var Q;const K=n.card;if(!K)return!1;const V=K.revealedTo==="all",L=f!==null&&Array.isArray(K.revealedTo)&&K.revealedTo.includes(f),oe=f!==null&&((Q=K.statuses)==null?void 0:Q.some(we=>we.type==="Revealed"&&we.addedByPlayerId===f));return!K.isFaceDown||V||L||oe})(),playerColorMap:x,localPlayerId:f,imageRefreshVersion:S,activePhaseIndex:d,activeTurnPlayerId:m,disableActiveHighlights:j}),P&&s.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center pointer-events-none animate-pulse",children:s.jsx("img",{src:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763978163/no_tarket_mic5sm.png",alt:"No Target",className:"w-4/5 h-4/5 object-contain drop-shadow-lg opacity-90"})})]},n.card.id)]})},$c={4:"grid-cols-4 grid-rows-4",5:"grid-cols-5 grid-rows-5",6:"grid-cols-6 grid-rows-6",7:"grid-cols-7 grid-rows-7"},$y=({textData:e,playerColorMap:t})=>{const n=t.get(e.playerId),r={blue:"text-blue-400 drop-shadow-[0_0_4px_rgba(59,130,246,0.8)]",purple:"text-purple-400 drop-shadow-[0_0_4px_rgba(168,85,247,0.8)]",red:"text-red-500 drop-shadow-[0_0_4px_rgba(239,68,68,0.8)]",green:"text-green-400 drop-shadow-[0_0_4px_rgba(34,197,94,0.8)]",yellow:"text-yellow-400 drop-shadow-[0_0_4px_rgba(234,179,8,0.8)]",orange:"text-orange-400 drop-shadow-[0_0_4px_rgba(249,115,22,0.8)]",pink:"text-pink-400 drop-shadow-[0_0_4px_rgba(236,72,153,0.8)]",brown:"text-[#A0522D] drop-shadow-[0_0_4px_rgba(139,69,19,0.8)]"},o=n&&r[n]?r[n]:"text-white";return s.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-[60] animate-float-up",children:s.jsx("span",{className:`text-4xl font-black ${o}`,style:{textShadow:"2px 2px 0 #000"},children:e.text})})},Gc=({board:e,isGameStarted:t,activeGridSize:n,handleDrop:r,draggedItem:o,setDraggedItem:l,openContextMenu:a,playMode:i,setPlayMode:u,highlight:c,playerColorMap:x,localPlayerId:f,onCardDoubleClick:p,onEmptyCellDoubleClick:T,imageRefreshVersion:S,cursorStack:I,setCursorStack:z,currentPhase:d,activeTurnPlayerId:m,onCardClick:g,onEmptyCellClick:C,validTargets:N,noTargetOverlay:P,disableActiveHighlights:j,activeFloatingTexts:B})=>{const ie=e.length,$=Math.floor((ie-n)/2),fe=e.slice($,$+n).map(be=>be.slice($,$+n)),ke=()=>{if(!c)return null;const{type:be,row:Te,col:Ie,playerId:W}=c,le=x.get(W),U=`outline outline-[8px] ${le&&Rt[le]?Rt[le].outline:"outline-yellow-400"} rounded-lg`;if(be==="row"&&Te!==void 0&&Te>=$&&Te<$+n){const ne=Te-$+1;return s.jsx("div",{className:U,style:{gridArea:`${ne} / 1 / ${ne+1} / ${n+1}`}})}if(be==="col"&&Ie!==void 0&&Ie>=$&&Ie<$+n){const ne=Ie-$+1;return s.jsx("div",{className:U,style:{gridArea:`1 / ${ne} / ${n+1} / ${ne+1}`}})}if(be==="cell"&&Te!==void 0&&Ie!==void 0&&Te>=$&&Te<$+n&&Ie>=$&&Ie<$+n){const ne=Te-$+1,te=Ie-$+1;return s.jsx("div",{className:U,style:{gridArea:`${ne} / ${te} / ${ne+1} / ${te+1}`}})}return null};return s.jsxs("div",{className:"relative p-2 bg-board-bg rounded-xl shadow-2xl h-full aspect-square transition-all duration-300",children:[s.jsx("div",{className:`grid ${$c[n]} gap-0.5 h-full w-full`,children:fe.map((be,Te)=>be.map((Ie,W)=>{const le=Te+$,A=W+$,U=N==null?void 0:N.some(_=>_.row===le&&_.col===A),ne=P&&P.row===le&&P.col===A,te=B==null?void 0:B.filter(_=>_.row===le&&_.col===A);return s.jsxs("div",{className:"relative w-full h-full",children:[s.jsx(By,{row:le,col:A,cell:Ie,isGameStarted:t,handleDrop:r,draggedItem:o,setDraggedItem:l,openContextMenu:a,playMode:i,setPlayMode:u,playerColorMap:x,localPlayerId:f,onCardDoubleClick:p,onEmptyCellDoubleClick:T,imageRefreshVersion:S,cursorStack:I,setCursorStack:z,currentPhase:d,activeTurnPlayerId:m,onCardClick:g,onEmptyCellClick:C,isValidTarget:U,showNoTarget:ne,disableActiveHighlights:j}),te==null?void 0:te.map(_=>s.jsx($y,{textData:_,playerColorMap:x},_.id||`${_.row}-${_.col}-${_.timestamp}`))]},`${le}-${A}`)}))}),c&&s.jsx("div",{className:`absolute top-2 right-2 bottom-2 left-2 grid ${$c[n]} gap-0.5 pointer-events-none z-20`,children:s.jsx(ke,{})})]})},va="https://res.cloudinary.com/dxxh6meej/image/upload/v1764204928/medal_rgbw8d.png",Ft=({onDrop:e,children:t,className:n,isOverClassName:r="bg-indigo-500",onContextMenu:o,style:l})=>{const[a,i]=E.useState(!1),u=f=>{f.preventDefault(),i(!0)},c=f=>{i(!1)},x=f=>{f.preventDefault(),i(!1),e()};return s.jsx("div",{onDragOver:u,onDragLeave:c,onDrop:x,onContextMenu:o,className:`${n} transition-colors ${a?r:""}`,"data-interactive":o?"true":void 0,style:l,children:t})},wa=({player:e,canEditSettings:t,selectedColors:n,onColorChange:r,compact:o=!1})=>{const[l,a]=E.useState(!1),[i,u]=E.useState({top:0,left:0}),c=E.useRef(null),x=E.useRef(null),f=Rt[e.color]?e.color:"blue",p=Rt[f];E.useEffect(()=>{const S=I=>{const z=I.target;l&&c.current&&!c.current.contains(z)&&x.current&&!x.current.contains(z)&&a(!1)};return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[l]);const T=()=>{if(t)if(!l&&c.current){const S=c.current.getBoundingClientRect();u({top:S.bottom+window.scrollY+4,left:S.left+window.scrollX}),a(!0)}else a(!1)};return s.jsxs(s.Fragment,{children:[s.jsxs("button",{ref:c,type:"button",onClick:T,disabled:!t,className:`flex items-center gap-2 bg-gray-700 p-1.5 rounded-md border border-gray-600 justify-center disabled:opacity-100 disabled:cursor-default hover:bg-gray-600 ${o?"px-2 py-1":"w-28"} flex-shrink-0`,title:t?"Change Color":void 0,children:[s.jsx("div",{className:`rounded-full ${p.bg} border border-white/50 ${o?"w-3 h-3":"w-4 h-4"}`}),!o&&s.jsx("span",{className:"capitalize font-medium truncate select-none",children:f})]}),l&&Rs.createPortal(s.jsx("div",{ref:x,className:"fixed bg-gray-800 border border-gray-600 rounded-md shadow-lg py-1 left-0 z-[9990]",style:{top:i.top,left:i.left,width:"9rem"},children:fp.map(S=>{const I=n.has(S),z=Rt[S];return s.jsxs("button",{type:"button",disabled:I,onClick:()=>{r(S),a(!1)},className:"w-full flex items-center gap-3 px-3 py-1.5 text-sm text-left hover:bg-indigo-600 disabled:bg-gray-700 disabled:text-gray-500 disabled:cursor-not-allowed",children:[s.jsx("div",{className:`w-4 h-4 rounded-full ${z.bg} border border-white/50`}),s.jsx("span",{className:"capitalize font-medium text-white select-none",children:S})]},S)})}),document.body)]})},Ca=({player:e,isLocalPlayer:t,localPlayerId:n,isSpectator:r,isGameStarted:o,position:l,onNameChange:a,onColorChange:i,onScoreChange:u,onDeckChange:c,onLoadCustomDeck:x,onDrawCard:f,handleDrop:p,draggedItem:T,setDraggedItem:S,openContextMenu:I,onHandCardDoubleClick:z,playerColorMap:d,allPlayers:m,localPlayerTeamId:g,activeTurnPlayerId:C,onToggleActiveTurn:N,imageRefreshVersion:P,layoutMode:j="standard",onCardClick:B,validHandTargets:ie,onAnnouncedCardDoubleClick:$,currentPhase:fe,disableActiveHighlights:ke,roundWinners:be,startingPlayerId:Te})=>{const Ie=!!e.isDisconnected,W=g!==void 0&&e.teamId===g,le=E.useRef(null),A=!o&&!r&&(t||!!e.isDummy),U=!r&&o&&(t||Ie||!!e.isDummy),ne=t&&!Ie,te=new Set(m.filter(Y=>!Y.isDummy&&Y.id!==e.id).map(Y=>Y.color)),_=E.useMemo(()=>cp(),[]),O=e.id===C,K=o&&fe===0&&O,V=E.useMemo(()=>be?Object.values(be).flat().filter(Y=>Y===e.id).length:0,[be,e.id]),L=Te===e.id,oe=Zo.LastPlayed,Q=Y=>{const F=Y.target.value;c(F)},we=()=>{var Y;(Y=le.current)==null||Y.click()},ee=Y=>{var xe;const F=(xe=Y.target.files)==null?void 0:xe[0];if(!F)return;const se=new FileReader;se.onload=Pe=>{var Me;try{const _e=(Me=Pe.target)==null?void 0:Me.result,et=JSON.parse(_e);x(et)}catch(_e){alert(`Error loading deck: ${_e instanceof Error?_e.message:"Unknown error"}`)}finally{Y.target&&(Y.target.value="")}},se.readAsText(F)};if(j==="list-remote"){const Y=O?"border-yellow-400":"border-gray-700";return s.jsxs("div",{className:`w-full h-full bg-panel-bg rounded-lg shadow-lg p-3 border-2 ${Y} ${Ie?"opacity-60":""} flex flex-col overflow-hidden`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2 flex-shrink-0 gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2 overflow-hidden flex-grow",children:[s.jsx(wa,{player:e,canEditSettings:A,selectedColors:te,onColorChange:i,compact:!0}),s.jsxs("div",{className:"flex flex-col min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:`font-bold text-base truncate ${O?"text-yellow-400":"text-white"} select-none`,children:e.name}),L&&s.jsx("img",{src:oe,alt:"First Player",className:"w-4 h-4 drop-shadow-md ml-1",title:"First Player"}),V>0&&Array.from({length:V}).map((F,se)=>s.jsx("img",{src:va,alt:"Round Winner",className:"w-4 h-4 drop-shadow-md ml-1",title:"Round Winner"},`win-${se}`))]}),e.isDummy&&!o&&s.jsx("div",{className:"flex items-center gap-1 mt-0.5",children:s.jsx("select",{value:e.selectedDeck,onChange:Q,className:"bg-gray-800 border border-gray-600 text-xs rounded p-0.5 text-gray-300 max-w-[120px]",onClick:F=>F.stopPropagation(),children:_.map(F=>s.jsx("option",{value:F.id,children:F.name},F.id))})})]})]}),s.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:s.jsx("input",{type:"checkbox",checked:O,onChange:()=>N(e.id),disabled:!t&&!e.isDummy,className:"w-4 h-4 text-yellow-400 bg-gray-700 border-gray-600 rounded cursor-pointer flex-shrink-0",title:"Mark as Active Turn"})})]}),s.jsxs("div",{className:"grid grid-cols-6 gap-1 mb-2 flex-shrink-0",children:[s.jsx(Ft,{onDrop:()=>T&&p(T,{target:"deck",playerId:e.id,deckPosition:"top"}),onContextMenu:F=>I(F,"deckPile",{player:e}),className:"w-full aspect-square",children:s.jsxs("div",{onClick:U?f:void 0,className:`w-full h-full bg-card-back rounded border border-gray-600 flex flex-col items-center justify-center cursor-pointer hover:ring-1 ring-white shadow-sm select-none ${K?"animate-deck-reminder border-4":""}`,title:"Deck",children:[s.jsx("span",{className:"text-xs font-bold mb-0.5 text-white drop-shadow-md",children:"DECK"}),s.jsx("span",{className:"text-xl font-bold text-white drop-shadow-md",children:e.deck.length})]})}),s.jsx(Ft,{onDrop:()=>T&&p(T,{target:"discard",playerId:e.id}),onContextMenu:F=>I(F,"discardPile",{player:e}),className:"w-full aspect-square",children:s.jsxs("div",{className:"w-full h-full bg-gray-700 rounded border border-gray-600 flex flex-col items-center justify-center cursor-pointer hover:bg-gray-600 shadow-sm select-none",title:"Discard",children:[s.jsx("span",{className:"text-xs font-bold mb-0.5 text-gray-400",children:"DISCARD"}),s.jsx("span",{className:"text-xl font-bold text-white",children:e.discard.length})]})}),s.jsx(Ft,{onDrop:()=>T&&p(T,{target:"announced",playerId:e.id}),className:"w-full aspect-square bg-gray-800 border border-dashed border-gray-600 rounded flex items-center justify-center",isOverClassName:"bg-indigo-600",children:e.announcedCard?s.jsx("div",{className:"w-full h-full cursor-pointer",draggable:U,onDragStart:()=>U&&S({card:e.announcedCard,source:"announced",playerId:e.id,isManual:!0}),onDragEnd:()=>S(null),onContextMenu:F=>U&&I(F,"announcedCard",{card:e.announcedCard,player:e}),onDoubleClick:()=>$&&$(e,e.announcedCard),children:s.jsx(It,{card:e.announcedCard,isFaceUp:!0,playerColorMap:d,imageRefreshVersion:P,activePhaseIndex:fe,activeTurnPlayerId:C,disableActiveHighlights:ke})}):s.jsx("span",{className:"text-xs font-bold text-gray-400 select-none",children:"Showcase"})}),s.jsx("div",{}),s.jsx("div",{}),s.jsx("div",{className:"flex justify-end h-full w-full",children:s.jsxs("div",{className:"flex flex-col items-center justify-between h-full w-6 select-none relative",children:[s.jsx("button",{onClick:()=>u(1),disabled:!U,className:"bg-gray-700 w-full h-[30%] rounded hover:bg-gray-600 disabled:opacity-50 flex items-center justify-center text-sm font-bold leading-none pb-0.5",children:"+"}),s.jsx("span",{className:"font-bold text-lg leading-none",children:e.score}),s.jsx("button",{onClick:()=>u(-1),disabled:!U,className:"bg-gray-700 w-full h-[30%] rounded hover:bg-gray-600 disabled:opacity-50 flex items-center justify-center text-sm font-bold leading-none pb-0.5",children:"-"})]})})]}),s.jsx(Ft,{onDrop:()=>T&&p(T,{target:"hand",playerId:e.id}),className:"w-full bg-gray-900/50 rounded p-1 grid grid-cols-6 gap-1 flex-grow overflow-y-scroll content-start",children:e.hand.map((F,se)=>{const Pe=(ie==null?void 0:ie.some(Me=>Me.playerId===e.id&&Me.cardIndex===se))?"ring-4 ring-cyan-400 shadow-[0_0_15px_#22d3ee] rounded-md z-10":"";return s.jsx("div",{className:`w-full aspect-square ${Pe}`,draggable:U,onDragStart:()=>U&&S({card:F,source:"hand",playerId:e.id,cardIndex:se,isManual:!0}),onDragEnd:()=>S(null),onContextMenu:Me=>o&&I(Me,"handCard",{card:F,player:e,cardIndex:se}),onDoubleClick:()=>z(e,F,se),onClick:()=>B&&B(e,F,se),"data-hand-card":`${e.id},${se}`,children:s.jsx(It,{card:F,isFaceUp:(()=>{var it;const Me=F.revealedTo==="all",_e=n!==null&&Array.isArray(F.revealedTo)&&F.revealedTo.includes(n),et=n!==null&&((it=F.statuses)==null?void 0:it.some(Mt=>Mt.type==="Revealed"&&Mt.addedByPlayerId===n));return t||W||!!e.isDummy||Ie||Me||_e||et})(),playerColorMap:d,localPlayerId:n,imageRefreshVersion:P,disableActiveHighlights:ke})},`${F.id}-${se}`)})})]})}if(j==="list-local"){const Y=O?"border-yellow-400":"border-gray-700";return s.jsxs("div",{className:`w-full h-full flex flex-col p-4 bg-panel-bg border-2 ${Y} rounded-lg shadow-2xl ${Ie?"opacity-60":""}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-[3px] flex-shrink-0",children:[s.jsx(wa,{player:e,canEditSettings:A,selectedColors:te,onColorChange:i}),s.jsxs("div",{className:"flex-grow relative flex items-center",children:[s.jsx("input",{type:"text",value:e.name,onChange:F=>a(F.target.value),readOnly:!A,className:"bg-transparent font-bold text-xl p-1 flex-grow focus:bg-gray-800 rounded focus:outline-none border-b border-gray-600 mr-3"}),L&&s.jsx("img",{src:oe,alt:"First Player",className:"w-6 h-6 drop-shadow-md mr-3",title:"First Player"}),V>0&&Array.from({length:V}).map((F,se)=>s.jsx("img",{src:va,alt:"Round Winner",className:"w-6 h-6 drop-shadow-md mr-2",title:"Round Winner"},`win-${se}`)),s.jsx("input",{type:"checkbox",checked:O,onChange:()=>N(e.id),disabled:!t&&!e.isDummy,className:"w-6 h-6 text-yellow-400 bg-gray-700 border-gray-600 rounded cursor-pointer flex-shrink-0",title:"Active Turn"})]})]}),s.jsxs("div",{className:"flex justify-between items-start gap-4 bg-gray-800 p-[2px] rounded-lg mb-[3px] flex-shrink-0",children:[s.jsxs("div",{className:"p-0 border border-transparent flex gap-[3px]",children:[s.jsx(Ft,{onDrop:()=>T&&p(T,{target:"deck",playerId:e.id,deckPosition:"top"}),onContextMenu:F=>I(F,"deckPile",{player:e}),children:s.jsxs("div",{onClick:U?f:void 0,className:`w-[120px] h-[120px] bg-card-back rounded flex flex-col items-center justify-center cursor-pointer hover:ring-2 ring-indigo-400 transition-all shadow-lg select-none ${K?"animate-deck-reminder border-4":""}`,children:[s.jsx("span",{className:"text-xs font-bold mb-1",children:"DECK"}),s.jsx("span",{className:"text-lg font-bold",children:e.deck.length})]})}),s.jsx(Ft,{onDrop:()=>T&&p(T,{target:"discard",playerId:e.id}),onContextMenu:F=>I(F,"discardPile",{player:e}),isOverClassName:"bg-indigo-600 ring-2",children:s.jsxs("div",{className:"w-[120px] h-[120px] bg-gray-700 rounded flex flex-col items-center justify-center cursor-pointer hover:bg-gray-600 transition-all shadow-lg border border-gray-600 select-none",children:[s.jsx("span",{className:"text-xs font-bold mb-1 text-gray-400",children:"DISCARD"}),s.jsx("span",{className:"text-lg font-bold",children:e.discard.length})]})}),s.jsx(Ft,{onDrop:()=>T&&p(T,{target:"announced",playerId:e.id}),className:"w-[120px] h-[120px] bg-gray-800 border border-dashed border-gray-600 rounded flex items-center justify-center",children:e.announcedCard?s.jsx("div",{className:"w-full h-full p-1 cursor-pointer",draggable:U,onDragStart:()=>U&&S({card:e.announcedCard,source:"announced",playerId:e.id,isManual:!0}),onDragEnd:()=>S(null),onContextMenu:F=>U&&I(F,"announcedCard",{card:e.announcedCard,player:e}),onDoubleClick:()=>$&&$(e,e.announcedCard),children:s.jsx(It,{card:e.announcedCard,isFaceUp:!0,playerColorMap:d,imageRefreshVersion:P,activePhaseIndex:fe,activeTurnPlayerId:C,disableActiveHighlights:ke})}):s.jsx("span",{className:"text-xs font-bold text-gray-500 select-none",children:"Showcase"})})]}),s.jsxs("div",{className:"flex flex-col items-center justify-between h-[120px] w-12 flex-shrink-0 py-0 select-none relative",children:[s.jsx("button",{onClick:()=>u(1),className:"bg-gray-700 w-full h-10 rounded font-bold hover:bg-gray-600 flex items-center justify-center text-xl",children:"+"}),s.jsx("span",{className:"font-bold text-3xl",children:e.score}),s.jsx("button",{onClick:()=>u(-1),className:"bg-gray-700 w-full h-10 rounded font-bold hover:bg-gray-600 flex items-center justify-center text-xl",children:"-"})]})]}),!o&&s.jsxs("div",{className:"mb-[3px] flex-shrink-0",children:[s.jsxs("select",{value:e.selectedDeck,onChange:Q,className:"w-full bg-gray-700 border border-gray-600 rounded p-2 mb-2",children:[_.map(F=>s.jsx("option",{value:F.id,children:F.name},F.id)),s.jsx("option",{value:Re.Custom,children:"Custom Deck"})]}),e.selectedDeck===Re.Custom&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"file",ref:le,onChange:ee,accept:".json",className:"hidden"}),s.jsx("button",{onClick:we,className:"w-full bg-indigo-600 hover:bg-indigo-700 py-1 rounded font-bold",children:"Load Custom Deck"})]})]}),s.jsx("div",{className:"flex-grow flex flex-col min-h-0",children:s.jsx(Ft,{onDrop:()=>T&&p(T,{target:"hand",playerId:e.id}),className:"flex-grow bg-gray-800 rounded-lg p-2 overflow-y-scroll border border-gray-700",children:s.jsx("div",{className:"flex flex-col gap-[2px]",children:e.hand.map((F,se)=>{const Pe=(ie==null?void 0:ie.some(Me=>Me.playerId===e.id&&Me.cardIndex===se))?"ring-4 ring-cyan-400 shadow-[0_0_15px_#22d3ee] rounded-md z-10":"";return s.jsxs("div",{className:`flex bg-gray-900 border border-gray-700 rounded p-2 ${Pe}`,draggable:U,onDragStart:()=>U&&S({card:F,source:"hand",playerId:e.id,cardIndex:se,isManual:!0}),onDragEnd:()=>S(null),onContextMenu:Me=>U&&I(Me,"handCard",{card:F,player:e,cardIndex:se}),onDoubleClick:()=>z(e,F,se),onClick:()=>B&&B(e,F,se),"data-hand-card":`${e.id},${se}`,children:[s.jsx("div",{className:"w-[120px] h-[120px] flex-shrink-0 mr-3",children:s.jsx(It,{card:F,isFaceUp:!0,playerColorMap:d,localPlayerId:n,imageRefreshVersion:P,disableTooltip:!0,disableActiveHighlights:ke})}),s.jsx("div",{className:"flex-grow min-w-0",children:s.jsx(xu,{card:F,className:"relative flex flex-col text-left w-full h-full justify-start whitespace-normal break-words",hideOwner:F.ownerId===e.id,powerPosition:"inner"})})]},`${F.id}-${se}`)})})})})]})}const ae=Ry[l]||"top-2 left-2",me=O?"border-yellow-400":ne?"border-indigo-500":"border-gray-700";return s.jsxs("div",{className:`fixed ${ae} min-w-[30rem] bg-panel-bg rounded-lg shadow-2xl p-3 flex flex-col z-10 border-2 ${me} ${Ie?"opacity-60":""}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2 gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-grow",children:[s.jsx(wa,{player:e,canEditSettings:A,selectedColors:te,onColorChange:i}),s.jsx("input",{type:"text",value:Ie?`${e.name} (Disconnected)`:e.name,onChange:Y=>a(Y.target.value),readOnly:!A||Ie,className:"bg-transparent font-bold text-xl p-1.5 flex-grow focus:bg-gray-800 rounded focus:outline-none focus:ring-2 focus:ring-indigo-400 disabled:cursor-default"}),L&&s.jsx("img",{src:oe,alt:"First Player",className:"w-6 h-6 drop-shadow-md",title:"First Player"}),V>0&&Array.from({length:V}).map((Y,F)=>s.jsx("img",{src:va,alt:"Round Winner",className:"w-6 h-6 drop-shadow-md ml-1",title:"Round Winner"},`win-${F}`))]}),s.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[s.jsx("input",{type:"checkbox",checked:O,onChange:()=>N(e.id),disabled:!t&&!e.isDummy,className:"w-5 h-5 text-yellow-400 bg-gray-700 border-gray-600 rounded focus:ring-yellow-500 focus:ring-offset-gray-800 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer",title:"Mark as active turn"}),s.jsxs("div",{className:"flex items-center space-x-1 select-none relative",children:[s.jsx("button",{onClick:()=>u(-1),disabled:!U,className:"bg-gray-700 w-8 h-8 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:"-"}),s.jsx("span",{className:"font-bold text-2xl w-10 text-center",children:e.score}),s.jsx("button",{onClick:()=>u(1),disabled:!U,className:"bg-gray-700 w-8 h-8 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:"+"})]})]})]}),s.jsxs("div",{className:"mb-3 flex items-center space-x-2",children:[s.jsxs("select",{value:e.selectedDeck,onChange:Q,disabled:!A,className:"bg-gray-700 border border-gray-600 text-white text-base rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block w-full p-2 disabled:opacity-70 disabled:cursor-not-allowed",children:[e.selectedDeck===Re.Custom&&s.jsx("option",{value:Re.Custom,children:"Custom Deck"}),_.map(Y=>s.jsx("option",{value:Y.id,children:Y.name},Y.id))]}),s.jsx("input",{type:"file",ref:le,onChange:ee,accept:".json",style:{display:"none"}}),s.jsx("button",{onClick:we,disabled:!A,title:"Load Custom Deck",className:"bg-gray-600 hover:bg-gray-500 text-white font-bold p-2 rounded disabled:opacity-70 disabled:cursor-not-allowed",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})})]}),s.jsxs("div",{className:"flex-grow flex space-x-3",children:[s.jsxs("div",{className:"flex flex-col w-28 space-y-2",children:[s.jsx(Ft,{onDrop:()=>T&&p(T,{target:"deck",playerId:e.id,deckPosition:"top"}),onContextMenu:Y=>I(Y,"deckPile",{player:e}),children:s.jsxs("div",{onClick:U?f:void 0,className:`relative w-28 h-28 bg-card-back rounded-md flex items-center justify-center text-center text-sm font-bold p-1 select-none ${U?"cursor-pointer hover:ring-2 ring-indigo-400":"cursor-not-allowed"} ${K?"animate-deck-reminder border-4":""}`,children:["DECK ",s.jsx("br",{})," (",e.deck.length,")"]})}),s.jsxs(Ft,{onDrop:()=>{T&&p(T,{target:"discard",playerId:e.id})},onContextMenu:Y=>I(Y,"discardPile",{player:e}),className:`relative w-28 h-28 bg-gray-700 rounded-md flex items-center justify-center text-center text-sm font-bold p-1 select-none ${U?"cursor-pointer":""}`,isOverClassName:"bg-indigo-600 ring-2 ring-indigo-400",children:["DISCARD ",s.jsx("br",{})," (",e.discard.length,")"]}),s.jsx("div",{className:"relative w-28 h-28",children:s.jsxs(Ft,{onDrop:()=>T&&p(T,{target:"announced",playerId:e.id}),className:"w-full h-full bg-gray-700 rounded-md flex items-center justify-center text-center text-sm p-1",isOverClassName:"bg-indigo-600 ring-2 ring-indigo-400",children:[!e.announcedCard&&s.jsx("span",{className:"text-sm font-bold text-gray-500 select-none",children:"Showcase"}),e.announcedCard&&s.jsx("div",{draggable:U,onDragStart:()=>U&&S({card:e.announcedCard,source:"announced",playerId:e.id,isManual:!0}),onDragEnd:()=>S(null),onContextMenu:Y=>U&&I(Y,"announcedCard",{card:e.announcedCard,player:e}),onDoubleClick:()=>$&&$(e,e.announcedCard),className:"w-full h-full cursor-pointer","data-interactive":"true",children:s.jsx(It,{card:e.announcedCard,isFaceUp:!0,playerColorMap:d,localPlayerId:n,imageRefreshVersion:P,activePhaseIndex:fe,activeTurnPlayerId:C,disableActiveHighlights:ke})})]})})]}),s.jsx(Ft,{onDrop:()=>T&&p(T,{target:"hand",playerId:e.id}),className:"flex-grow bg-gray-800 rounded-lg p-2 min-h-[16rem] max-h-[22.25rem] overflow-y-auto",isOverClassName:"bg-gray-900 ring-2 ring-indigo-400",children:s.jsx("div",{className:"grid grid-cols-3 gap-0.5",children:e.hand.map((Y,F)=>{const xe=(ie==null?void 0:ie.some(Pe=>Pe.playerId===e.id&&Pe.cardIndex===F))?"ring-4 ring-cyan-400 shadow-[0_0_15px_#22d3ee] rounded-md z-10":"";return s.jsx("div",{className:`w-28 h-28 ${xe}`,draggable:U,onDragStart:()=>U&&S({card:Y,source:"hand",playerId:e.id,cardIndex:F,isManual:!0}),onDragEnd:()=>S(null),onContextMenu:Pe=>{n!==null&&o&&I(Pe,"handCard",{card:Y,player:e,cardIndex:F})},onDoubleClick:()=>z(e,Y,F),onClick:()=>B&&B(e,Y,F),"data-interactive":"true","data-hand-card":`${e.id},${F}`,children:s.jsx(It,{card:Y,isFaceUp:(()=>{var et;const Pe=Y.revealedTo==="all",Me=n!==null&&Array.isArray(Y.revealedTo)&&Y.revealedTo.includes(n),_e=n!==null&&((et=Y.statuses)==null?void 0:et.some(it=>it.type==="Revealed"&&it.addedByPlayerId===n));return t||W||!!e.isDummy||Ie||Pe||Me||_e})(),playerColorMap:d,localPlayerId:n,imageRefreshVersion:P,disableActiveHighlights:ke})},`${Y.id}-${F}`)})})})]})]})},Gy=4,Wy=({gameId:e,isGameStarted:t,onStartGame:n,onResetGame:r,activeGridSize:o,onGridSizeChange:l,dummyPlayerCount:a,onDummyPlayerCountChange:i,realPlayerCount:u,connectionStatus:c,onExitGame:x,onOpenTokensModal:f,onOpenCountersModal:p,gameMode:T,onGameModeChange:S,isPrivate:I,onPrivacyChange:z,isHost:d,onSyncGame:m,currentPhase:g,onNextPhase:C,onPrevPhase:N,onSetPhase:P,isAutoAbilitiesEnabled:j,onToggleAutoAbilities:B,isScoringStep:ie,currentRound:$=1,turnNumber:fe=1})=>{const{t:ke}=Nn(),be=[0,1,2,3],[Te,Ie]=E.useState(!1),[W,le]=E.useState({x:0,y:0}),A=()=>{let te="bg-gray-500",_="...";return c==="Connected"?(te="bg-green-500 animate-pulse",_="Connected"):c==="Disconnected"&&(te="bg-red-500",_="Disconnected"),s.jsxs("div",{className:"flex items-center space-x-2",title:_,children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${te} transition-colors`}),s.jsx("span",{className:"text-sm text-gray-400 hidden sm:block",children:c})]})},U=te=>{le({x:te.clientX,y:te.clientY+20}),Ie(!0)},ne=$*10+10;return s.jsxs("header",{className:"fixed top-0 left-0 right-0 h-14 bg-panel-bg bg-opacity-80 backdrop-blur-sm z-50 flex items-center justify-between px-4 shadow-lg",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("h1",{className:"text-xl font-bold text-indigo-400 hidden lg:block",children:"New Avalon"}),s.jsx(A,{}),s.jsxs("div",{className:"flex items-center space-x-3",children:[e&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm text-gray-400 hidden md:inline",children:"ID:"}),s.jsx("span",{className:"font-mono bg-gray-700 px-2 py-1 rounded text-indigo-300 w-24 md:w-44 text-center truncate",children:e})]}),s.jsxs("label",{className:"flex items-center space-x-1.5 cursor-pointer hidden md:flex",title:"Hidden games do not appear in the 'Join Game' list.",children:[s.jsx("input",{type:"checkbox",checked:I,onChange:te=>z(te.target.checked),disabled:t||!d,className:"w-4 h-4 text-indigo-600 bg-gray-700 border-gray-600 rounded focus:ring-indigo-500 disabled:opacity-70 disabled:cursor-not-allowed"}),s.jsx("span",{className:"text-sm text-gray-300",children:"Hidden"})]}),s.jsx("span",{className:"text-gray-600 hidden md:inline",children:"|"}),s.jsx("button",{onClick:f,className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-3 rounded text-sm",children:ke("tokens")}),s.jsx("button",{onClick:p,className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-3 rounded text-sm",children:ke("counters")})]})]}),t&&s.jsxs("div",{className:"absolute left-1/2 transform -translate-x-1/2 flex items-center gap-2",children:[s.jsxs("div",{className:"flex items-center bg-gray-800 rounded-lg px-3 py-1.5 border border-gray-700 shadow-md cursor-help",onMouseEnter:U,onMouseLeave:()=>Ie(!1),children:[s.jsxs("span",{className:"text-yellow-500 font-bold text-sm tracking-wider",children:["ROUND ",$]}),s.jsx("span",{className:"text-gray-500 mx-2",children:"|"}),s.jsxs("span",{className:"text-gray-300 text-xs font-mono",children:["TURN ",fe]})]}),s.jsxs("div",{className:"flex items-center bg-gray-800 rounded-lg p-1 border border-gray-700 shadow-md",children:[s.jsx("button",{onClick:N,className:"w-8 h-8 flex items-center justify-center text-gray-300 hover:text-white hover:bg-gray-700 rounded transition-colors",children:s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M15 6 L8 12 L15 18 Z"})})}),s.jsx("div",{className:"bg-gray-800 text-white font-bold text-sm text-center px-2 min-w-[120px] uppercase",children:ie?s.jsx("span",{className:"text-yellow-400 animate-pulse",children:"SCORING..."}):xi[g]}),s.jsx("button",{onClick:C,className:"w-8 h-8 flex items-center justify-center text-gray-300 hover:text-white hover:bg-gray-700 rounded transition-colors",children:s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M9 6 L16 12 L9 18 Z"})})})]})]}),Te&&s.jsx(gu,{x:W.x,y:W.y,children:s.jsxs("div",{className:"text-sm text-center",children:[s.jsxs("p",{className:"font-bold text-yellow-400 mb-1",children:["Round ",$," Victory Condition"]}),s.jsxs("p",{children:["Reach ",s.jsxs("span",{className:"font-bold text-white",children:[ne," points"]})," to win round."]}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Checked at First Player's Setup Phase."})]})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[t&&s.jsxs("label",{className:"flex items-center space-x-1.5 cursor-pointer bg-gray-800 px-2 py-1 rounded border border-gray-600",children:[s.jsx("input",{type:"checkbox",checked:j,onChange:te=>B(te.target.checked),className:"w-4 h-4 text-indigo-600 bg-gray-700 border-gray-600 rounded focus:ring-indigo-500"}),s.jsx("span",{className:"text-sm text-gray-300",children:ke("autoAbility")})]}),t?d&&s.jsx("button",{onClick:r,className:"bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded text-sm hidden md:block",children:ke("newGame")}):s.jsx("button",{onClick:n,disabled:!d,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded text-sm animate-pulse disabled:bg-gray-600 disabled:opacity-70 disabled:cursor-not-allowed disabled:animate-none",children:ke("startGame")}),s.jsxs("div",{className:"flex items-center space-x-2 hidden lg:flex",children:[s.jsxs("label",{htmlFor:"game-mode",className:"text-sm font-medium text-gray-300",children:[ke("mode"),":"]}),s.jsxs("select",{id:"game-mode",value:T,onChange:te=>S(te.target.value),disabled:t||!d,className:"bg-gray-700 border border-gray-600 text-white text-sm rounded-lg block w-full p-2 disabled:opacity-70",children:[s.jsx("option",{value:Cn.FreeForAll,children:"FFA"}),s.jsx("option",{value:Cn.TwoVTwo,children:"2v2"}),s.jsx("option",{value:Cn.ThreeVOne,children:"3v1"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 hidden xl:flex",children:[s.jsxs("label",{htmlFor:"grid-size",className:"text-sm font-medium text-gray-300",children:[ke("size"),":"]}),s.jsxs("select",{id:"grid-size",value:o,onChange:te=>l(parseInt(te.target.value,10)),disabled:t||!d,className:"bg-gray-700 border border-gray-600 text-white text-sm rounded-lg block w-full p-2 disabled:opacity-70",children:[s.jsx("option",{value:"4",children:"4x4"}),s.jsx("option",{value:"5",children:"5x5"}),s.jsx("option",{value:"6",children:"6x6"}),s.jsx("option",{value:"7",children:"7x7"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 hidden xl:flex",children:[s.jsxs("label",{htmlFor:"dummy-players",className:"text-sm font-medium text-gray-300",children:[ke("dummies"),":"]}),s.jsx("select",{id:"dummy-players",value:a,onChange:te=>i(parseInt(te.target.value,10)),disabled:t||!d,className:"bg-gray-700 border border-gray-600 text-white text-sm rounded-lg block w-full p-2 disabled:opacity-70",children:be.map(te=>s.jsx("option",{value:te,disabled:u+te>Gy,children:te},te))})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[d&&t&&s.jsx("button",{onClick:m,className:"bg-yellow-600 hover:bg-yellow-700 text-white font-bold p-2 rounded text-sm",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 110 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})})}),s.jsx("button",{onClick:x,className:`bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded text-sm ${t?"bg-red-600 hover:bg-red-700":""}`,children:ke(t?"surrender":"exit")})]})]})]})},hp=({isOpen:e,onClose:t,onJoin:n,games:r})=>{const[o,l]=E.useState("");if(!e)return null;const a=()=>{o.trim()&&n(o.trim().toUpperCase())};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 shadow-xl w-full max-w-xl",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Join an Existing Game"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-2",children:"Active Games"}),s.jsx("div",{className:"h-[40rem] overflow-y-auto pr-2 border-b border-gray-700 pb-2 mb-6",children:r.length>0?s.jsx("ul",{className:"space-y-2",children:r.map(i=>s.jsx("li",{children:s.jsxs("button",{onClick:()=>n(i.gameId),className:"w-full text-left p-3 bg-gray-700 hover:bg-indigo-600 rounded-lg transition-colors flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-gray-400",children:"Game ID:"}),s.jsx("span",{className:"block font-mono text-indigo-300",children:i.gameId})]}),s.jsxs("span",{className:"bg-gray-600 px-2 py-1 rounded-full text-sm font-bold",children:[i.playerCount," / 4"]})]})},i.gameId))}):s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsxs("p",{className:"text-gray-400 text-center",children:["No active games found. ",s.jsx("br",{})," Why not create one?"]})})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-2",children:"Or Join with Code"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"text",value:o,onChange:i=>l(i.target.value),placeholder:"Enter Game ID",className:"flex-grow bg-gray-700 border border-gray-600 text-white font-mono rounded-lg p-2 focus:ring-indigo-500 focus:border-indigo-500",onKeyUp:i=>i.key==="Enter"&&a()}),s.jsx("button",{onClick:a,disabled:!o.trim(),className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded disabled:bg-gray-500 disabled:cursor-not-allowed transition-colors",children:"Join"})]}),s.jsx("div",{className:"flex justify-end mt-8",children:s.jsx("button",{type:"button",onClick:t,className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded",children:"Cancel"})})]})})},Wc=({isOpen:e,onClose:t,title:n,player:r,cards:o,setDraggedItem:l,onCardContextMenu:a,onCardDoubleClick:i,onCardClick:u,canInteract:c,isDeckView:x=!1,playerColorMap:f,localPlayerId:p,imageRefreshVersion:T})=>{const[S,I]=E.useState(null),z=E.useRef(null);if(!e)return null;const d=N=>{S!==null&&z.current&&!z.current.contains(N.relatedTarget)&&t()},g=Math.ceil(o.length/5)>5;return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 pointer-events-auto",onClick:t,children:s.jsxs("div",{ref:z,onClick:N=>N.stopPropagation(),onDragLeave:d,className:"bg-gray-800 rounded-lg p-4 shadow-xl w-auto max-w-4xl max-h-[95vh] flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2 flex-shrink-0",children:[s.jsx("h2",{className:"text-xl font-bold",children:n}),s.jsx("button",{onClick:t,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-1 px-3 rounded text-sm",children:"Close"})]}),s.jsx("div",{className:`bg-gray-900 rounded p-2 ${g?"overflow-y-auto":""}`,style:g?{height:"calc(5 * 7rem + 4 * 0.5rem + 1rem)"}:{},children:s.jsxs("div",{className:"grid grid-cols-5 gap-2",children:[o.map((N,P)=>s.jsx("div",{style:{visibility:S===P?"hidden":"visible"},draggable:c,onDragStart:()=>{c&&(I(P),l({card:N,source:x?"deck":"discard",playerId:r.id,cardIndex:P}))},onDragEnd:()=>{I(null),l(null)},onContextMenu:j=>c&&(a==null?void 0:a(j,P)),onClick:()=>c&&(u==null?void 0:u(P)),onDoubleClick:()=>c&&(i==null?void 0:i(P)),"data-interactive":c,className:`w-28 h-28 ${c?"cursor-grab":"cursor-default"}`,children:s.jsx(It,{card:N,isFaceUp:!0,playerColorMap:f,localPlayerId:p,imageRefreshVersion:T})},`${N.id}-${P}`)),o.length===0&&s.jsx("p",{className:"col-span-5 w-full text-center text-gray-400 py-8",children:"Empty"})]})})]})})},Vy=({isOpen:e,onClose:t,setDraggedItem:n,openContextMenu:r,canInteract:o,anchorEl:l,imageRefreshVersion:a,draggedItem:i})=>{if(!e||!l)return null;const u=(gi[Re.Tokens]||[]).filter(f=>!f.allowedPanels||f.allowedPanels.includes("TOKEN_PANEL")),c={position:"fixed",top:`${l.top}px`,left:`${l.left}px`,zIndex:60},x=f=>{if(i&&i.source==="token_panel"){const p=f.currentTarget.getBoundingClientRect(),T=f.clientX,S=f.clientY;(T<p.left||T>=p.right||S<p.top||S>=p.bottom)&&t()}};return s.jsx("div",{style:c,className:"pointer-events-auto",onDragLeave:x,children:s.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 shadow-xl w-96 max-w-[90vw] h-auto flex flex-col",onClick:f=>f.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("h2",{className:"text-xl font-bold",children:"Tokens"}),s.jsx("button",{onClick:t,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-1 px-3 rounded text-sm",children:"Close"})]}),s.jsx("div",{className:"flex-grow bg-gray-900 rounded p-2 overflow-y-auto",children:s.jsx("div",{className:"grid grid-cols-3 gap-2",children:u.map(f=>s.jsx("div",{draggable:o,onDragStart:()=>o&&n({card:f,source:"token_panel"}),onDragEnd:()=>n(null),onContextMenu:p=>o&&r(p,"token_panel_item",{card:f}),"data-interactive":o,className:`w-24 h-24 ${o?"cursor-grab":"cursor-not-allowed"}`,children:s.jsx(It,{card:f,isFaceUp:!0,playerColorMap:new Map,imageRefreshVersion:a})},f.id))})})]})})},Hy="https://res.cloudinary.com/dxxh6meej/image/upload/v1763653192/background_counter_socvss.png",Ky=({isOpen:e,onClose:t,setDraggedItem:n,canInteract:r,anchorEl:o,imageRefreshVersion:l,onCounterMouseDown:a,cursorStack:i})=>{const{getCounterTranslation:u}=Nn(),[c,x]=E.useState(null),[f,p]=E.useState({x:0,y:0});if(!e||!o)return null;const T={position:"fixed",top:`${o.top}px`,left:`${o.left}px`,zIndex:60},S=C=>{let N=Zo[C];if(N&&l){const P=N.includes("?")?"&":"?";N=`${N}${P}v=${l}`}return N},I=(C,N,P)=>{if(C.button===2){const j=u(N),B=j?j.name:P,ie=j?j.description:ms[N]||"",$={id:`tooltip_${N}`,deck:"counter",name:B,imageUrl:"",fallbackImage:"",power:0,ability:ie,types:[],statuses:[]};x($),p({x:C.clientX,y:C.clientY})}else C.button===0&&r&&a(N,C)},z=()=>{x(null)},d=C=>{c&&p({x:C.clientX,y:C.clientY})},m=()=>{i&&t(),x(null)},g=C=>{const N=C.currentTarget.getBoundingClientRect(),P=C.clientX,j=C.clientY;(P<N.left||P>=N.right||j<N.top||j>=N.bottom)&&t()};return s.jsxs(s.Fragment,{children:[s.jsx("div",{style:T,className:"pointer-events-auto counter-modal-content",onMouseLeave:m,onDragLeave:g,children:s.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 shadow-xl w-80 max-w-[90vw] h-auto flex flex-col",onClick:C=>C.stopPropagation(),children:[s.jsxs("div",{className:"mb-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-bold",children:"Counters"}),s.jsx("button",{onClick:t,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-1 px-3 rounded text-sm",children:"Close"})]}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Hold right click to view hints"})]}),s.jsx("div",{className:"bg-gray-900 rounded p-4",children:s.jsx("div",{className:"grid grid-cols-4 gap-1",children:Dy.map(C=>{const N=S(C.type),P=C.type.startsWith("Power"),j=u(C.type),B=j?j.name:C.label;return s.jsx("button",{onContextMenu:ie=>ie.preventDefault(),onMouseDown:ie=>I(ie,C.type,B),onMouseUp:z,onMouseMove:d,className:`w-12 h-12 rounded-full border-white flex items-center justify-center shadow-lg mx-auto relative select-none ${r?"cursor-pointer hover:ring-2 ring-indigo-400":"cursor-not-allowed"}`,style:{backgroundImage:`url(${Hy})`,backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:N?s.jsx("img",{src:N,alt:B,className:"w-full h-full object-contain p-1 pointer-events-none"}):s.jsx("span",{className:`font-bold text-white pointer-events-none ${P?"text-sm":"text-lg"}`,style:{textShadow:"0 0 2px black"},children:P?B:C.type.charAt(0)})},C.type)})})})]})}),c&&s.jsx(gu,{x:f.x,y:f.y,children:s.jsx(xu,{card:c,statusDescriptions:ms})})]})},yp=({player:e,onDragStart:t})=>{const n=Rt[e.color]||Rt.blue;return s.jsxs("div",{draggable:!0,onDragStart:r=>t(r,e.id),className:"flex items-center gap-2 bg-gray-600 p-2 rounded-md cursor-grab active:cursor-grabbing",children:[s.jsx("div",{className:`w-4 h-4 rounded-full ${n.bg} border border-white/50`}),s.jsx("span",{className:"font-medium",children:e.name})]})},Vc=({teamId:e,teamName:t,players:n,capacity:r,onDrop:o,onDragOver:l,onPlayerDragStart:a,isOver:i})=>s.jsxs("div",{onDrop:u=>o(u,e),onDragOver:l,className:`bg-gray-800 p-4 rounded-lg border-2 ${i?"border-indigo-500":"border-gray-700"} transition-colors`,children:[s.jsxs("h3",{className:"text-lg font-bold mb-3 border-b border-gray-700 pb-2",children:[t," (",n.length,"/",r,")"]}),s.jsx("div",{className:"space-y-2 min-h-[4rem]",children:n.map(u=>s.jsx(yp,{player:u,onDragStart:a},u.id))})]}),Jy=({players:e,gameMode:t,onCancel:n,onConfirm:r})=>{const[o,l]=E.useState(e),[a,i]=E.useState([]),[u,c]=E.useState([]),[x,f]=E.useState(null),[p,T]=E.useState(null),{team1Capacity:S,team2Capacity:I}=E.useMemo(()=>t===Cn.TwoVTwo?{team1Capacity:2,team2Capacity:2}:t===Cn.ThreeVOne?{team1Capacity:3,team2Capacity:1}:{team1Capacity:0,team2Capacity:0},[t]),z=o.length===0&&a.length===S&&u.length===I,d=(N,P)=>{N.dataTransfer.effectAllowed="move",f(P)},m=N=>{N.preventDefault(),N.dataTransfer.dropEffect="move"},g=(N,P)=>{if(N.preventDefault(),x===null)return;const j=e.find(Te=>Te.id===x);if(!j)return;const B=[...o],ie=[...a],$=[...u],fe=B.findIndex(Te=>Te.id===x);fe>-1&&B.splice(fe,1);const ke=ie.findIndex(Te=>Te.id===x);ke>-1&&ie.splice(ke,1);const be=$.findIndex(Te=>Te.id===x);be>-1&&$.splice(be,1),P===1&&ie.length<S?ie.push(j):P===2&&$.length<I?$.push(j):B.push(j),l(B),i(ie),c($),f(null),T(null)},C=()=>{if(!z)return;const N={1:a.map(P=>P.id),2:u.map(P=>P.id)};r(N)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-lg p-8 shadow-xl w-full max-w-4xl",children:[s.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Assign Teams"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"Drag and drop players into their teams."}),s.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[s.jsxs("div",{onDrop:N=>g(N,"unassigned"),onDragOver:N=>{m(N),T("unassigned")},onDragLeave:()=>T(null),className:`bg-gray-800 p-4 rounded-lg border-2 ${p==="unassigned"?"border-indigo-500":"border-gray-700"} transition-colors`,children:[s.jsx("h3",{className:"text-lg font-bold mb-3 border-b border-gray-700 pb-2",children:"Unassigned Players"}),s.jsx("div",{className:"space-y-2",children:o.map(N=>s.jsx(yp,{player:N,onDragStart:d},N.id))})]}),s.jsx(Vc,{teamId:1,teamName:"Team 1",players:a,capacity:S,onDrop:g,onDragOver:N=>{m(N),T(1)},onPlayerDragStart:d,isOver:p===1}),s.jsx(Vc,{teamId:2,teamName:"Team 2",players:u,capacity:I,onDrop:g,onDragOver:N=>{m(N),T(2)},onPlayerDragStart:d,isOver:p===2})]}),s.jsxs("div",{className:"flex justify-end mt-8 space-x-4",children:[s.jsx("button",{type:"button",onClick:n,className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded",children:"Cancel"}),s.jsx("button",{type:"button",onClick:C,disabled:!z,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded disabled:bg-gray-500 disabled:cursor-not-allowed transition-colors",children:"Confirm Teams & Start"})]})]})})},Yy=({players:e,localPlayer:t,onReady:n,onCancel:r})=>{const o=()=>{t.isReady||n()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 shadow-xl w-full max-w-md",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:"Ready to Start?"}),s.jsx("p",{className:"text-gray-400 text-center mb-6",children:"The game will begin once all players are ready. You can still change your name and deck."}),s.jsx("ul",{className:"space-y-3 mb-8",children:e.map(l=>s.jsxs("li",{className:"flex items-center justify-between bg-gray-700 p-3 rounded-lg",children:[s.jsxs("span",{className:"font-medium",children:[l.name," ",l.id===t.id&&"(You)"]}),l.isReady?s.jsxs("span",{className:"flex items-center text-green-400",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Ready"]}):s.jsxs("span",{className:"flex items-center text-yellow-400",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1 animate-pulse",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 102 0V6zM9 14a1 1 0 112 0 1 1 0 01-2 0z",clipRule:"evenodd"})}),"Waiting..."]})]},l.id))}),s.jsxs("div",{className:"flex flex-col space-y-3",children:[s.jsx("button",{onClick:o,disabled:t.isReady,className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded disabled:bg-gray-500 disabled:cursor-not-allowed transition-colors text-lg",children:t.isReady?"Waiting for others...":"I'm Ready"}),s.jsx("button",{onClick:r,className:"w-full bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded transition-colors",children:"Cancel Start"})]})]})})},gp=({card:e,ownerPlayer:t,onClose:n,statusDescriptions:r,allPlayers:o,imageRefreshVersion:l})=>{var d,m,g;const{getCardTranslation:a,getCounterTranslation:i}=Nn(),[u,c]=E.useState(e.imageUrl),x=e.baseId?a(e.baseId):void 0,f=x?{...e,...x}:e;E.useEffect(()=>{let C=e.imageUrl;if(l&&C){const N=C.includes("?")?"&":"?";C=`${C}${N}v=${l}`}c(C)},[e.imageUrl,l]);const p=()=>{let C=e.fallbackImage;if(l&&C){const N=C.includes("?")?"&":"?";C=`${C}${N}v=${l}`}u!==C&&c(C)},T=t==null?void 0:t.color,S=T?Rt[T].border:((d=dp[e.deck])==null?void 0:d.color)||"border-gray-300",I=E.useMemo(()=>!t||t.teamId===void 0?null:`Team ${t.teamId}`,[t]),z=(e.statuses??[]).reduce((C,N)=>(C[N.type]||(C[N.type]=[]),C[N.type].push(N.addedByPlayerId),C),{});return s.jsx("div",{onClick:n,className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-[102]",children:s.jsxs("div",{onClick:C=>C.stopPropagation(),className:`bg-gray-800 rounded-lg shadow-2xl w-full max-w-4xl h-[40rem] p-6 flex gap-6 border-4 ${S}`,children:[s.jsx("div",{className:"w-1/2 h-full flex-shrink-0",children:u?s.jsx("img",{src:u,onError:p,alt:f.name,className:"w-full h-full object-contain rounded-lg"}):s.jsx("div",{className:"w-full h-full bg-gray-700 rounded-lg flex items-center justify-center text-2xl font-bold text-center p-4",children:f.name})}),s.jsxs("div",{className:"w-1/2 h-full flex flex-col gap-4 overflow-y-auto pr-2 text-left",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-4xl font-bold",children:f.name}),s.jsx("p",{className:"text-lg text-gray-400 capitalize",children:((m=f.types)==null?void 0:m.join(", "))||`${f.deck} Card`})]}),s.jsxs("div",{className:"bg-gray-900 p-4 rounded-lg",children:[s.jsxs("p",{children:[s.jsx("strong",{className:"text-indigo-400 text-lg",children:"Power:"})," ",s.jsx("span",{className:"text-xl font-bold",children:f.power})]}),s.jsxs("p",{className:"mt-2",children:[s.jsx("strong",{className:"text-indigo-400 text-lg",children:"Ability:"})," ",s.jsx("span",{className:"text-gray-200 text-base",children:pp(f.ability)})]})]}),t&&s.jsxs("div",{className:"bg-gray-900 p-4 rounded-lg text-sm",children:[s.jsxs("p",{children:[s.jsx("strong",{className:"text-indigo-400",children:"Owner:"})," ",t.name]}),I&&s.jsxs("p",{className:"mt-1",children:[s.jsx("strong",{className:"text-indigo-400",children:"Team:"})," ",I]})]}),e.statuses&&e.statuses.length>0&&s.jsxs("div",{className:"bg-gray-900 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-indigo-400 text-lg font-bold mb-2",children:"Statuses"}),s.jsx("ul",{className:"space-y-2 text-sm",children:Object.entries(z).map(([C,N])=>{const P=N.reduce(($,fe)=>($[fe]=($[fe]||0)+1,$),{}),j=Object.entries(P).map(([$,fe])=>{var be;return`${((be=o.find(Te=>Te.id===Number($)))==null?void 0:be.name)||`Player ${$}`} (x${fe})`}).join(", "),B=i(C),ie=B?B.description:r[C]||"No description available.";return s.jsxs("li",{children:[s.jsx("strong",{className:"text-gray-200",children:C})," ",s.jsxs("span",{className:"text-gray-400 text-xs ml-1",children:["- ",j]}),s.jsx("p",{className:"text-gray-400 text-xs pl-2 mt-0.5",children:ie})]},C)})})]}),f.flavorText&&s.jsxs("div",{className:"bg-gray-900 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-indigo-400 font-bold mb-1",children:"Flavor Text"}),s.jsx("p",{className:"italic text-gray-400",children:(g=f.flavorText)==null?void 0:g.split(`
`).map((C,N)=>s.jsxs(Fn.Fragment,{children:[N>0&&s.jsx("br",{}),C]},N))})]}),s.jsx("button",{onClick:n,className:"mt-auto bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded self-end",children:"Close"})]})]})})},qy=({fromPlayer:e,cardCount:t,onAccept:n,onDecline:r})=>s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[105]",children:s.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 shadow-xl w-full max-w-md text-center",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Reveal Request"}),s.jsxs("p",{className:"text-gray-300 mb-6",children:[s.jsx("span",{className:"font-bold",children:e.name})," would like to see ",t>1?`${t} of your hidden cards`:"one of your hidden cards","."]}),s.jsxs("div",{className:"flex justify-center space-x-4",children:[s.jsx("button",{onClick:r,className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-6 rounded transition-colors",children:"Decline"}),s.jsx("button",{onClick:n,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded transition-colors",children:"Accept"})]})]})}),Hc=Iy().filter(({card:e})=>{var t;return(t=e.allowedPanels)==null?void 0:t.includes("DECK_BUILDER")}),Qy=cp(),$r=100,Xy=e=>{if(typeof e.deckName!="string"||!Array.isArray(e.cards))return{isValid:!1,error:"Invalid file structure. Must have 'deckName' (string) and 'cards' (array)."};let t=0;for(const n of e.cards){if(typeof n.cardId!="string"||typeof n.quantity!="number"||n.quantity<1||!Number.isInteger(n.quantity))return{isValid:!1,error:`Invalid card entry: ${JSON.stringify(n)}`};if(!yu(n.cardId))return{isValid:!1,error:`Card with ID '${n.cardId}' does not exist.`};t+=n.quantity}return t>$r?{isValid:!1,error:`Deck exceeds the ${$r} card limit (found ${t} cards).`}:t===0&&e.cards.length>0?{isValid:!1,error:"Deck contains cards with zero quantity."}:{isValid:!0,deckFile:e}},xp=({isOpen:e,onClose:t,setViewingCard:n})=>{const{getCardTranslation:r,t:o}=Nn(),[l,a]=E.useState("My Custom Deck"),[i,u]=E.useState(new Map),[c,x]=E.useState("All"),[f,p]=E.useState(""),[T,S]=E.useState(""),[I,z]=E.useState([]),[d,m]=E.useState(!1),g=E.useRef(null),C=E.useRef(null);E.useEffect(()=>{const W=le=>{C.current&&!C.current.contains(le.target)&&m(!1)};return document.addEventListener("mousedown",W),()=>document.removeEventListener("mousedown",W)},[]);const N=E.useMemo(()=>{const W=new Set;return Hc.forEach(({card:le})=>{var A;return(A=le.types)==null?void 0:A.forEach(U=>W.add(U))}),Array.from(W).sort()},[]),P=E.useMemo(()=>Hc.filter(({id:le,card:A})=>{var _;const U=r(le),ne=(U==null?void 0:U.name)||A.name,te=(U==null?void 0:U.ability)||A.ability||"";if(f){const O=f.toLowerCase();if(!ne.toLowerCase().includes(O)&&!te.toLowerCase().includes(O))return!1}if(T!==""&&A.power!==Number(T))return!1;if(I.length>0){const O=A.types||[];if(!I.every(V=>O.includes(V)))return!1}if(c!=="All"){if(c==="Command")return hu.has(le)||((_=A.types)==null?void 0:_.includes("Command"));if(A.faction!==c)return!1}return!0}),[c,f,T,I,r]),j=E.useMemo(()=>{let W=0;return i.forEach(le=>W+=le),W},[i]),B=W=>{if(j>=$r){alert(`Deck cannot exceed ${$r} cards.`);return}u(le=>{const A=new Map(le),U=A.get(W)||0;return U<3&&A.set(W,U+1),A})},ie=W=>{u(le=>{const A=new Map(le),U=A.get(W)||0;return U>1?A.set(W,U-1):A.delete(W),A})},$=()=>{confirm("Are you sure you want to clear the current deck?")&&(u(new Map),a("My Custom Deck"))},fe=W=>{S(le=>{const U=(le===""?0:le)+W;return U<0?0:U})},ke=W=>{z(le=>le.includes(W)?le.filter(A=>A!==W):le.length>=10?le:[...le,W])},be=()=>{if(j===0){alert("Cannot save an empty deck.");return}const W={deckName:l.trim()||"Untitled Deck",cards:Array.from(i.entries()).map(([ne,te])=>({cardId:ne,quantity:te}))},le=new Blob([JSON.stringify(W,null,2)],{type:"application/json"}),A=URL.createObjectURL(le),U=document.createElement("a");U.href=A,U.download=`${W.deckName.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.json`,document.body.appendChild(U),U.click(),document.body.removeChild(U),URL.revokeObjectURL(A)},Te=()=>{var W;(W=g.current)==null||W.click()},Ie=W=>{var U;const le=(U=W.target.files)==null?void 0:U[0];if(!le)return;const A=new FileReader;A.onload=ne=>{var te;try{const _=(te=ne.target)==null?void 0:te.result,O=JSON.parse(_),K=Xy(O);if(!K.isValid){alert(K.error);return}const{deckFile:V}=K;a(V.deckName);const L=new Map;V.cards.forEach(oe=>L.set(oe.cardId,oe.quantity)),u(L)}catch{alert("Failed to parse deck file.")}finally{W.target&&(W.target.value="")}},A.readAsText(le)};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-gray-900 w-full h-full md:w-[95vw] md:h-[90vh] md:rounded-xl flex flex-col overflow-hidden shadow-2xl border border-gray-700",children:[s.jsxs("div",{className:"bg-gray-800 p-4 border-b border-gray-700 flex justify-between items-center flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("h2",{className:"text-2xl font-bold text-white",children:o("deckBuilding")}),s.jsx("input",{type:"text",value:l,onChange:W=>a(W.target.value),className:"bg-gray-700 text-white px-3 py-1 rounded border border-gray-600 focus:outline-none focus:border-indigo-500 font-bold",placeholder:"Deck Name"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:$,className:"px-4 py-2 bg-red-900 hover:bg-red-800 text-white rounded text-sm font-bold transition-colors",children:o("clear")}),s.jsx("button",{onClick:Te,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded text-sm font-bold transition-colors",children:o("loadDeck")}),s.jsx("input",{type:"file",ref:g,onChange:Ie,accept:".json",className:"hidden"}),s.jsx("button",{onClick:be,className:"px-4 py-2 bg-green-700 hover:bg-green-600 text-white rounded text-sm font-bold transition-colors",children:o("save")}),s.jsx("div",{className:"w-px h-8 bg-gray-600 mx-2"}),s.jsx("button",{onClick:t,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded text-sm font-bold transition-colors",children:o("close")})]})]}),s.jsxs("div",{className:"flex flex-grow overflow-hidden",children:[s.jsxs("div",{className:"flex-grow flex flex-col p-4 overflow-hidden border-r border-gray-700 bg-gray-900/50",children:[s.jsxs("div",{className:"mb-4 flex flex-wrap items-center gap-4 bg-gray-800 p-2 rounded-lg border border-gray-700 relative z-40",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none",children:s.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("input",{type:"text",value:f,onChange:W=>p(W.target.value),placeholder:"Search...",className:"pl-8 pr-6 py-1 bg-gray-700 text-white border border-gray-600 rounded text-sm focus:outline-none focus:border-indigo-500 w-32 md:w-48"}),f&&s.jsx("button",{onClick:()=>p(""),className:"absolute inset-y-0 right-0 pr-2 flex items-center text-gray-400 hover:text-white",title:"Clear Search",children:s.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-gray-400 text-sm font-bold",children:"Pow:"}),s.jsxs("div",{className:"flex items-center bg-gray-700 rounded border border-gray-600 overflow-hidden",children:[s.jsx("button",{onClick:()=>fe(-1),className:"px-2 py-1 hover:bg-gray-600 text-white font-bold border-r border-gray-600 active:bg-gray-500",children:"-"}),s.jsx("div",{className:"w-8 text-center text-sm font-bold text-white select-none",children:T===""?"-":T}),s.jsx("button",{onClick:()=>fe(1),className:"px-2 py-1 hover:bg-gray-600 text-white font-bold border-l border-gray-600 active:bg-gray-500",children:"+"})]}),T!==""&&s.jsx("button",{onClick:()=>S(""),className:"p-1 bg-gray-700 hover:bg-red-600 text-gray-400 hover:text-white rounded transition-colors",title:"Reset Power Filter",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsxs("div",{className:"relative",ref:C,children:[s.jsxs("button",{onClick:()=>m(!d),className:`px-3 py-1 bg-gray-700 text-white border border-gray-600 rounded text-sm flex items-center gap-2 focus:outline-none hover:bg-gray-600 ${I.length>0?"border-indigo-500 text-indigo-300":""}`,children:[s.jsxs("span",{children:["Types ",I.length>0?`(${I.length})`:""]}),s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),d&&s.jsxs("div",{className:"absolute top-full left-0 mt-1 w-48 bg-gray-800 border border-gray-600 rounded shadow-xl z-50 max-h-60 overflow-y-auto p-1",children:[s.jsx("div",{className:"px-2 py-1 text-xs text-gray-400 border-b border-gray-700 mb-1",children:"Match ALL selected"}),N.map(W=>s.jsxs("label",{className:"flex items-center px-2 py-1.5 hover:bg-gray-700 rounded cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:I.includes(W),onChange:()=>ke(W),className:"form-checkbox h-4 w-4 text-indigo-600 rounded border-gray-500 bg-gray-700 focus:ring-indigo-500"}),s.jsx("span",{className:"ml-2 text-sm text-gray-200",children:W})]},W))]})]}),I.length>0&&s.jsx("button",{onClick:()=>z([]),className:"p-1 bg-gray-700 hover:bg-red-600 text-gray-400 hover:text-white rounded transition-colors",title:"Clear Types",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsxs("select",{value:c,onChange:W=>x(W.target.value),className:`bg-gray-700 text-white border border-gray-600 rounded px-2 py-1 text-sm focus:outline-none focus:border-indigo-500 max-w-[140px] ${c!=="All"?"border-indigo-500 text-indigo-300":""}`,children:[s.jsx("option",{value:"All",children:"All Factions"}),Qy.map(W=>s.jsx("option",{value:W.id,children:W.name},W.id)),s.jsx("option",{value:"Command",children:"Command Cards"})]}),c!=="All"&&s.jsx("button",{onClick:()=>x("All"),className:"p-1 bg-gray-700 hover:bg-red-600 text-gray-400 hover:text-white rounded transition-colors",title:"Reset Faction",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("span",{className:"ml-auto text-gray-500 text-xs hidden xl:inline",children:"Right-click to view card details"})]}),s.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:s.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 gap-2",children:[P.map(({id:W,card:le})=>{const A={...le,id:W,baseId:W,deck:le.faction||Re.Custom,ownerId:0};return s.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>B(W),onContextMenu:U=>{U.preventDefault(),n({card:A})},children:[s.jsx("div",{className:"w-full aspect-square transition-transform duration-100 hover:scale-105 hover:shadow-lg hover:z-10",children:s.jsx(It,{card:A,isFaceUp:!0,playerColorMap:new Map,disableTooltip:!0,extraPowerSpacing:!0})}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/80 text-white text-[10px] text-center py-0.5 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none truncate px-1",children:o("clickToAdd")})]},W)}),P.length===0&&s.jsx("div",{className:"col-span-full text-center text-gray-500 py-10",children:"No cards match your filters."})]})})]}),s.jsxs("div",{className:"w-80 md:w-96 bg-gray-800 flex flex-col border-l border-gray-700 flex-shrink-0",children:[s.jsxs("div",{className:"p-4 bg-gray-800 border-b border-gray-600",children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:o("currentDeck")}),s.jsxs("p",{className:`text-sm font-bold mt-1 ${j>$r?"text-red-500":"text-indigo-400"}`,children:[j," / ",$r," Cards"]})]}),s.jsxs("div",{className:"flex-grow overflow-y-auto p-2 space-y-2",children:[i.size===0&&s.jsxs("div",{className:"text-center text-gray-500 mt-10",children:[s.jsx("p",{children:o("emptyDeck")}),s.jsx("p",{className:"text-xs mt-2",children:o("clickToAdd")})]}),Array.from(i.entries()).map(([W,le])=>{const A=yu(W);if(!A)return null;const U={...A,id:W,baseId:W,deck:A.faction||Re.Custom,ownerId:0},ne=r(W),te=ne?ne.name:A.name;return s.jsxs("div",{className:"flex items-center bg-gray-700 rounded p-2 group hover:bg-gray-600 transition-colors select-none",children:[s.jsx("div",{className:"w-12 h-12 flex-shrink-0 mr-3 cursor-pointer",onContextMenu:_=>{_.preventDefault(),n({card:U})},children:s.jsx(It,{card:U,isFaceUp:!0,playerColorMap:new Map,disableTooltip:!0})}),s.jsxs("div",{className:"flex-grow min-w-0",children:[s.jsx("div",{className:"font-bold text-sm text-white truncate",children:te}),s.jsx("div",{className:"text-xs text-gray-400 truncate",children:A.faction})]}),s.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[s.jsx("button",{onClick:()=>ie(W),className:"w-6 h-6 flex items-center justify-center bg-gray-800 hover:bg-red-900 text-gray-300 rounded text-sm font-bold",title:"Remove one",children:"-"}),s.jsx("span",{className:"font-bold text-white w-4 text-center",children:le}),s.jsx("button",{onClick:()=>B(W),className:"w-6 h-6 flex items-center justify-center bg-gray-800 hover:bg-green-900 text-gray-300 rounded text-sm font-bold",title:"Add one",disabled:le>=3,children:"+"})]})]},W)})]})]})]})]})}):null},vp=({isOpen:e,onClose:t,onSave:n})=>{const{language:r,setLanguage:o,t:l}=Nn(),[a,i]=E.useState(""),[u,c]=E.useState(!1);if(E.useEffect(()=>{if(e){const f=localStorage.getItem("custom_ws_url")||"";i(f);const p=localStorage.getItem("ui_list_mode");c(p===null?!0:p==="true")}},[e]),!e)return null;const x=()=>{localStorage.setItem("ui_list_mode",String(u)),window.dispatchEvent(new Event("storage")),n(a)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 shadow-xl w-full max-w-xl",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6",children:l("settings")}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"language-select",className:"block text-sm font-medium text-gray-300 mb-1",children:l("language")}),s.jsx("select",{id:"language-select",value:"en",onChange:f=>o(f.target.value),disabled:!0,className:"w-full bg-gray-700 border border-gray-600 text-white font-sans rounded-lg p-2 focus:ring-indigo-500 focus:border-indigo-500 opacity-60 cursor-not-allowed",title:"Language selection is currently disabled.",children:Object.entries(zy).map(([f,p])=>s.jsx("option",{value:f,children:p},f))})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"server-url",className:"block text-sm font-medium text-gray-300 mb-1",children:l("serverAddress")}),s.jsx("input",{id:"server-url",type:"text",value:a,onChange:f=>i(f.target.value),placeholder:"e.g., ws://localhost:8080 or wss://my-server.com",className:"w-full bg-gray-700 border border-gray-600 text-white font-mono rounded-lg p-2 focus:ring-indigo-500 focus:border-indigo-500",onKeyUp:f=>f.key==="Enter"&&x()})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-bold",children:"List Mode Interface"}),s.jsx("p",{className:"text-xs text-gray-400",children:"Optimized layout for desktop."})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",className:"sr-only peer",checked:u,onChange:f=>c(f.target.checked)}),s.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-800 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]})]}),s.jsxs("div",{className:"flex justify-end mt-8 space-x-3",children:[s.jsx("button",{type:"button",onClick:t,className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded",children:l("cancel")}),s.jsx("button",{onClick:x,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded transition-colors",children:l("saveApply")})]})]})})},wp="https://res.cloudinary.com/dxxh6meej/image/upload/v1763253337/SYN_RIOT_AGENT_jurf4t.png",Cp="/images/cards/SYN_RIOT_AGENT.png",Ep="https://res.cloudinary.com/dxxh6meej/image/upload/v1763253332/OPT_PRINCEPS_w3o5lq.png",Sp="/images/cards/OPT_PRINCEPS.png",Zy=e=>e===1?{id:`demo-riot-${Math.random()}`,deck:Re.SynchroTech,name:"Riot Agent",imageUrl:wp,fallbackImage:Cp,power:3,ability:`Deploy: Push an adjacent card 1 cell.
Commit: Stun an adjacent opponent card with threat.`,ownerId:1,ownerName:"Player 1",statuses:[],types:["Unit","SynchroTech"]}:{id:`demo-princeps-${Math.random()}`,deck:Re.Optimates,name:"Princeps",imageUrl:Ep,fallbackImage:Sp,power:3,ability:"Deploy: Shield 1. Aim a card with threat.",ownerId:2,ownerName:"Player 2",statuses:[],types:["Unit","Optimates"]},eg=new Map([[1,"blue"],[2,"red"]]),tg=({config:e,cardStatuses:t})=>{const n=e||Array(9).fill(null);return s.jsx("div",{className:"bg-board-bg p-2 rounded-lg shadow-xl aspect-square w-full max-w-[400px] mx-auto grid grid-cols-3 grid-rows-3 gap-1",children:n.map((r,o)=>{const l=r?Zy(r):null;return l&&t&&t[o]&&(l.statuses=t[o]),s.jsx("div",{className:"bg-board-cell rounded flex items-center justify-center relative",children:l?s.jsx("div",{className:"w-full h-full p-0.5",children:s.jsx(It,{card:l,isFaceUp:!0,playerColorMap:eg,localPlayerId:1})}):s.jsx("div",{className:"w-1 h-1 bg-gray-600 rounded-full opacity-20"})},o)})})},Tp=({isOpen:e,onClose:t})=>{const{resources:n,t:r}=Nn(),o=n.rules,l=[{id:"intro",title:o.introTitle,content:s.jsx("div",{className:"text-left whitespace-pre-wrap",children:o.introText}),demoConfig:[null,1,null,null,2,null,null,null,null]},{id:"components",title:o.componentsTitle,content:s.jsx("div",{className:"text-left whitespace-pre-wrap",children:o.componentsText})},{id:"turn_order",title:o.turnTitle,content:s.jsx("div",{className:"text-left whitespace-pre-wrap",children:o.turnText})},{id:"priority",title:o.priorityTitle,content:s.jsx("div",{className:"text-left whitespace-pre-wrap",children:o.priorityText})},{id:"stack",title:o.stackTitle,content:s.jsx("div",{className:"text-left whitespace-pre-wrap",children:o.stackText})},{id:"statuses_support",title:o.supportTitle,content:s.jsx("div",{className:"text-left whitespace-pre-wrap",children:o.supportText}),demoConfig:[null,null,null,null,1,1,null,null,null],demoCardStatuses:{4:[{type:"Support",addedByPlayerId:1}],5:[{type:"Support",addedByPlayerId:1}]}},{id:"statuses_threat",title:o.threatTitle,content:s.jsx("div",{className:"text-left whitespace-pre-wrap",children:o.threatText}),demoConfig:[null,2,null,null,1,null,null,2,null],demoCardStatuses:{4:[{type:"Threat",addedByPlayerId:2}]}},{id:"deployment",title:o.deployTitle,content:s.jsx("div",{className:"text-left whitespace-pre-wrap",children:o.deployText}),demoConfig:[null,null,null,null,1,null,null,null,null]},{id:"scoring",title:o.scoringTitle,content:s.jsx("div",{className:"text-left whitespace-pre-wrap",children:o.scoringText}),demoConfig:[1,1,1,null,null,null,null,null,null]},{id:"endgame",title:o.endgameTitle,content:s.jsx("div",{className:"text-left whitespace-pre-wrap",children:o.endgameText})}],[a,i]=E.useState(l[0].id),u=E.useMemo(()=>l.find(c=>c.id===a)||l[0],[a,l]);return E.useEffect(()=>{e&&[wp,Ep,Cp,Sp].forEach(x=>{const f=new Image;f.src=x})},[e]),e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-[100]",onClick:t,children:s.jsxs("div",{className:"bg-gray-900 w-[95vw] h-[90vh] rounded-xl shadow-2xl flex overflow-hidden border border-gray-700",onClick:c=>c.stopPropagation(),children:[s.jsxs("div",{className:"w-1/4 min-w-[250px] bg-gray-800 border-r border-gray-700 flex flex-col",children:[s.jsx("div",{className:"p-4 border-b border-gray-700 bg-gray-800",children:s.jsx("h2",{className:"text-xl font-bold text-white",children:o.title})}),s.jsx("div",{className:"flex-grow overflow-y-auto p-2 space-y-1",children:l.map(c=>s.jsx("button",{onClick:()=>i(c.id),className:`w-full text-left px-4 py-3 rounded-md transition-colors text-sm font-medium ${a===c.id?"bg-indigo-600 text-white shadow-md":"text-gray-400 hover:bg-gray-700 hover:text-gray-200"}`,children:c.title},c.id))}),s.jsx("div",{className:"p-4 border-t border-gray-700",children:s.jsx("button",{onClick:t,className:"w-full bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 rounded transition-colors",children:r("close")})})]}),s.jsxs("div",{className:"w-2/5 p-8 overflow-y-auto border-r border-gray-700 bg-gray-900 text-left",children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-6 border-b border-indigo-500 pb-2 inline-block",children:u.title}),s.jsx("div",{className:"prose prose-invert prose-lg max-w-none text-gray-300 leading-relaxed text-left",children:u.content})]}),s.jsxs("div",{className:"w-[35%] bg-gray-800 flex flex-col items-center justify-center p-8 relative",children:[s.jsx("h3",{className:"absolute top-6 left-0 right-0 text-center text-gray-400 text-sm uppercase tracking-widest font-bold",children:"Visual Demo"}),s.jsx("div",{className:"w-full",children:s.jsx(tg,{config:u.demoConfig,cardStatuses:u.demoCardStatuses})})]})]})}):null},ng=({x:e,y:t,items:n,onClose:r})=>{const o=E.useRef(null),[l,a]=E.useState({top:t,left:e});return E.useEffect(()=>{if(o.current){const{innerWidth:i,innerHeight:u}=window,{offsetWidth:c,offsetHeight:x}=o.current,f=e+c>i?i-c-10:e,p=t+x>u?u-x-10:t;a({top:p,left:f})}},[e,t,n]),Rs.createPortal(s.jsx("div",{ref:o,className:"fixed bg-gray-900 border border-gray-700 rounded-md shadow-lg z-[100] py-1",style:{top:l.top,left:l.left},onClick:i=>i.stopPropagation(),children:n.map((i,u)=>"isDivider"in i?s.jsx("hr",{className:"border-gray-700 my-1"},`divider-${u}`):"onClick"in i?s.jsx("button",{onClick:()=>{i.disabled||(i.onClick(),r())},disabled:i.disabled,className:"block w-full text-left px-4 py-1 text-sm text-white hover:bg-indigo-600 disabled:text-gray-500 disabled:cursor-not-allowed disabled:bg-gray-800",style:{fontWeight:i.isBold?"bold":"normal"},children:i.label},u):s.jsxs("div",{className:"flex items-center justify-between px-4 py-1 text-sm text-white w-full space-x-2",children:[s.jsx("button",{onClick:c=>{c.stopPropagation(),i.onRemove()},disabled:i.removeDisabled,className:"w-7 h-6 flex items-center justify-center bg-gray-700 hover:bg-red-600 rounded disabled:bg-gray-800 disabled:text-gray-500 disabled:cursor-not-allowed font-mono text-lg",children:"-"}),s.jsx("span",{className:"flex-grow text-center",children:i.label}),s.jsx("button",{onClick:c=>{c.stopPropagation(),i.onAdd()},className:"w-7 h-6 flex items-center justify-center bg-gray-700 hover:bg-green-600 rounded font-mono text-lg",children:"+"})]},u))}),document.body)},rg=({isOpen:e,card:t,playerColorMap:n,onConfirm:r,onCancel:o})=>{const{getCardTranslation:l}=Nn(),[a,i]=E.useState([]),u=t.baseId?l(t.baseId):void 0,c=u?{...t,...u}:t,x=c.ability||"",f=E.useMemo(()=>{const S=x.match(/(.*?)Choose (\d+) of \d+:(.*)/s);if(S){const I=S[1].trim(),z=parseInt(S[2],10),m=S[3].split(//).map(g=>g.trim()).filter(g=>g.length>0);return{mainText:I,requiredCount:z,options:m}}return{mainText:x,requiredCount:0,options:[]}},[x]);if(!e)return null;const p=S=>{a.includes(S)?i(I=>I.filter(z=>z!==S)):a.length<f.requiredCount&&i(I=>[...I,S])},T=a.length===f.requiredCount;return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-[200]",children:s.jsxs("div",{className:"bg-gray-900 rounded-xl border-2 border-yellow-500 shadow-2xl p-6 w-full max-w-4xl flex gap-8",children:[s.jsxs("div",{className:"w-1/3 flex flex-col items-center justify-center",children:[s.jsx("div",{className:"w-64 h-64 relative",children:s.jsx(It,{card:c,isFaceUp:!0,playerColorMap:n,disableTooltip:!0})}),s.jsx("h2",{className:"text-2xl font-bold text-yellow-500 mt-4 text-center",children:c.name})]}),s.jsxs("div",{className:"w-2/3 flex flex-col",children:[s.jsx("h3",{className:"text-xl font-bold text-white mb-4 border-b border-gray-700 pb-2",children:"Execute Command"}),s.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg mb-6 border-l-4 border-indigo-500",children:[s.jsx("h4",{className:"text-indigo-400 font-bold text-sm uppercase mb-1",children:"Main Effect"}),s.jsx("p",{className:"text-lg text-white",children:f.mainText})]}),f.options.length>0&&s.jsxs("div",{className:"flex-grow",children:[s.jsxs("h4",{className:"text-yellow-500 font-bold text-sm uppercase mb-2",children:["Select ",f.requiredCount," options (in order):"]}),s.jsx("div",{className:"space-y-2",children:f.options.map((S,I)=>{const z=a.includes(I),d=a.indexOf(I)+1;return s.jsxs("button",{onClick:()=>p(I),className:`w-full text-left p-3 rounded-lg border transition-all flex items-center gap-3 ${z?"bg-yellow-900/30 border-yellow-500 text-white":"bg-gray-800 border-gray-700 text-gray-400 hover:bg-gray-750 hover:border-gray-600"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold border ${z?"bg-yellow-500 text-black border-yellow-500":"bg-gray-700 text-gray-500 border-gray-600"}`,children:z?d:""}),s.jsx("span",{className:"text-base",children:S})]},I)})})]}),s.jsxs("div",{className:"mt-8 flex justify-end gap-4",children:[s.jsx("button",{onClick:o,className:"px-6 py-2 rounded bg-gray-700 hover:bg-gray-600 text-white font-bold transition-colors",children:"Cancel"}),s.jsx("button",{onClick:()=>r(a),disabled:!T,className:`px-6 py-2 rounded font-bold transition-colors ${T?"bg-yellow-500 hover:bg-yellow-400 text-black shadow-[0_0_10px_#eab308]":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:"Execute Sequence"})]})]})]})})},og=({handleCreateGame:e,setSettingsModalOpen:t,handleOpenJoinModal:n,setDeckBuilderOpen:r,setRulesModalOpen:o,isJoinModalOpen:l,setJoinModalOpen:a,handleJoinGame:i,gamesList:u,isDeckBuilderOpen:c,setViewingCard:x,isSettingsModalOpen:f,handleSaveSettings:p,isRulesModalOpen:T,viewingCard:S,gameState:I,imageRefreshVersion:z,t:d})=>s.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-900 text-white relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 z-0 opacity-30",style:{backgroundImage:"url(https://res.cloudinary.com/dxxh6meej/image/upload/v1763368597/NA_bg_main_o5co6l.png)",backgroundSize:"cover",backgroundPosition:"center"}}),s.jsxs("div",{className:"z-10 text-center p-8 bg-black bg-opacity-60 rounded-xl shadow-2xl border border-gray-700 max-w-md w-full",children:[s.jsx("h1",{className:"text-5xl font-bold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-600 drop-shadow-lg",children:"New Avalon"}),s.jsx("h2",{className:"text-2xl font-light mb-8 text-gray-300 tracking-widest",children:"SKIRMISH"}),s.jsxs("div",{className:"space-y-4 w-full",children:[s.jsxs("button",{onClick:e,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition-all transform hover:scale-105 flex items-center justify-center gap-2",children:[s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),d("startGame")]}),s.jsxs("button",{onClick:n,className:"w-full bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition-all transform hover:scale-105 flex items-center justify-center gap-2",children:[s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),d("joinGame")]}),s.jsxs("button",{disabled:!0,className:"w-full bg-gray-800 text-gray-500 font-bold py-3 px-6 rounded-lg shadow-inner flex items-center justify-center gap-2 cursor-not-allowed border border-gray-700",title:"Coming Soon",children:[s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),"Story Mode"]}),s.jsxs("button",{disabled:!0,className:"w-full bg-gray-800 text-gray-500 font-bold py-3 px-6 rounded-lg shadow-inner flex items-center justify-center gap-2 cursor-not-allowed border border-gray-700",title:"Coming Soon",children:[s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),"Puzzles"]}),s.jsxs("button",{onClick:()=>r(!0),className:"w-full bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition-all transform hover:scale-105 flex items-center justify-center gap-2",children:[s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),d("deckBuilding")]}),s.jsxs("button",{onClick:()=>o(!0),className:"w-full bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition-all transform hover:scale-105 flex items-center justify-center gap-2",children:[s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),d("rules")]}),s.jsxs("button",{onClick:()=>t(!0),className:"w-full bg-gray-800 hover:bg-gray-700 text-gray-300 font-bold py-2 px-6 rounded-lg shadow transition-all flex items-center justify-center gap-2 border border-gray-600",children:[s.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),d("settings")]})]}),s.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-700 flex justify-center gap-6",children:[s.jsx("a",{href:"https://t.me/Anahoret_NewAvalon",target:"_blank",rel:"noopener noreferrer",className:"transition-transform hover:scale-110",title:"Telegram",children:s.jsx("img",{src:"https://res.cloudinary.com/dxxh6meej/image/upload/v1764190409/Telegram_logo.svg_rnhkud.webp",alt:"Telegram",className:"w-8 h-8"})}),s.jsx("a",{href:"https://discord.gg/U5zKADsZZY",target:"_blank",rel:"noopener noreferrer",className:"transition-transform hover:scale-110",title:"Discord",children:s.jsx("img",{src:"https://res.cloudinary.com/dxxh6meej/image/upload/v1764190408/discord-icon_nhgjyx.svg",alt:"Discord",className:"w-8 h-8"})}),s.jsx("a",{href:"https://www.donationalerts.com/r/anahoret",target:"_blank",rel:"noopener noreferrer",className:"transition-transform hover:scale-110",title:"DonationAlerts",children:s.jsx("img",{src:"https://res.cloudinary.com/dxxh6meej/image/upload/v1764190414/donationalerts_hpjtbe.png",alt:"DonationAlerts",className:"w-8 h-8 rounded"})}),s.jsx("a",{href:"https://www.patreon.com/c/AnchoriteComics",target:"_blank",rel:"noopener noreferrer",className:"transition-transform hover:scale-110",title:"Patreon",children:s.jsx("img",{src:"https://res.cloudinary.com/dxxh6meej/image/upload/v1764190408/Patreon_logo.svg_ala7gn.png",alt:"Patreon",className:"w-8 h-8"})})]})]}),s.jsx("div",{className:"absolute bottom-4 text-gray-500 text-xs",children:"v0.1.3 alpha"}),s.jsx(hp,{isOpen:l,onClose:()=>a(!1),onJoin:i,games:u}),s.jsx(xp,{isOpen:c,onClose:()=>r(!1),setViewingCard:x}),s.jsx(vp,{isOpen:f,onClose:()=>t(!1),onSave:p}),s.jsx(Tp,{isOpen:T,onClose:()=>o(!1)}),S&&s.jsx(gp,{card:S.card,ownerPlayer:S.player,onClose:()=>x(null),statusDescriptions:ms,allPlayers:I.players,imageRefreshVersion:z})]}),lg=({gameState:e,onConfirm:t,localPlayerId:n,onExit:r})=>{if(!e.isRoundEndModalOpen)return null;const o=e.roundWinners[e.currentRound]||[],a=!!e.gameWinner,i=e.currentRound+1,u=i*10+10,c="https://res.cloudinary.com/dxxh6meej/image/upload/v1764204928/medal_rgbw8d.png",x=[...e.players].sort((S,I)=>S.id-I.id),f=e.startingPlayerId||1,p=x.findIndex(S=>S.id===f);let T=[];return p!==-1?T=[...x.slice(p),...x.slice(0,p)]:T=x,s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-[200] backdrop-blur-sm",children:s.jsxs("div",{className:"bg-gray-900 rounded-lg border-2 border-gray-700 shadow-2xl p-6 w-full max-w-md text-left relative",children:[s.jsx("div",{className:"mb-4 text-center",children:s.jsx("h2",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest leading-none",children:a?"Game Over":`Round ${e.currentRound} Complete`})}),s.jsx("div",{className:"space-y-2 mb-4",children:T.map(S=>{const I=o.includes(S.id),z=Object.values(e.roundWinners).flat().filter(m=>m===S.id).length,d=Rt[S.color];return s.jsxs("div",{className:`flex items-center justify-between p-3 rounded bg-gray-800 border ${I?"border-yellow-500/50":"border-gray-700"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${(d==null?void 0:d.bg)||"bg-gray-500"}`}),s.jsx("span",{className:`font-bold text-lg ${I?"text-white":"text-gray-400"}`,children:S.name})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xl font-bold text-white font-mono mr-2",children:S.score}),z>0&&Array.from({length:z}).map((m,g)=>s.jsx("img",{src:c,alt:"Winner",className:"w-6 h-6 object-contain drop-shadow-md",title:"Round Winner"},g))]})]},S.id)})}),s.jsx("hr",{className:"border-gray-600 my-2"}),s.jsxs("div",{className:"text-xs text-gray-400 flex justify-between px-1",children:[s.jsxs("span",{children:["Ended on Turn ",e.turnNumber]}),s.jsx("span",{children:"Alpha v0.1.3"})]}),s.jsx("hr",{className:"border-gray-600 my-2"}),s.jsx("div",{className:"text-sm text-gray-300 leading-snug space-y-2 mt-3",children:a?s.jsxs("div",{className:"text-center py-2",children:[s.jsx("div",{className:"text-yellow-400 font-bold text-lg mb-1",children:"Match Complete"}),s.jsx("p",{className:"text-gray-400 text-xs",children:"Thank you for playing New Avalon: Skirmish."})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-400",children:"Next:"}),s.jsxs("span",{className:"font-bold text-white",children:["Round ",i]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-400",children:"Victory Condition:"}),s.jsxs("span",{className:"font-bold text-yellow-400",children:[u," Points"]})]}),s.jsxs("div",{className:"text-xs text-gray-500 italic mt-2 text-center",children:["* Win 2 rounds to win the match. ",s.jsx("br",{}),i===5?"Final Round! Max 10 Turns.":"Max 5 Rounds."]})]})}),s.jsx("div",{className:"mt-6 flex justify-end gap-3",children:a?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:r,className:"flex-1 bg-red-900 hover:bg-red-800 text-white font-bold py-2 px-4 rounded border border-red-700 text-sm transition-colors",children:"Return to Menu"}),s.jsx("button",{onClick:t,className:"flex-1 bg-green-800 hover:bg-green-700 text-white font-bold py-2 px-4 rounded border border-green-600 text-sm transition-colors",children:"Continue Game"})]}):s.jsxs("button",{onClick:t,className:"bg-green-800 hover:bg-green-700 text-white font-bold py-2 px-6 rounded border border-green-600 text-sm transition-colors w-full",children:["Start Round ",i]})})]})})},Kc=7,Jc=()=>Array(Kc).fill(null).map(()=>Array(Kc).fill({card:null})),Xt=e=>{const{board:t,activeGridSize:n,players:r}=e,o=JSON.parse(JSON.stringify(t)),l=o.length,a=Math.floor((l-n)/2),i=new Map;r.forEach(u=>i.set(u.id,u.teamId));for(let u=0;u<l;u++)for(let c=0;c<l;c++){const x=o[u][c].card;x&&x.statuses&&(x.statuses=x.statuses.filter(f=>f.type!=="Support"&&f.type!=="Threat"))}for(let u=0;u<l;u++)for(let c=0;c<l;c++){const x=o[u][c].card;if(!x||x.ownerId===void 0||x.isFaceDown)continue;const f=x.ownerId,p=i.get(f),T=[{r:u-1,c},{r:u+1,c},{r:u,c:c-1},{r:u,c:c+1}],S={};let I=!1;for(const d of T){const{r:m,c:g}=d;if(m>=0&&m<l&&g>=0&&g<l){const C=o[m][g].card;if(C&&C.ownerId!==void 0&&!C.isFaceDown){const N=C.ownerId,P=i.get(N);f===N||p!==void 0&&p===P?I=!0:(S[N]||(S[N]=[]),S[N].push({r:m,c:g}))}}}I&&(x.statuses||(x.statuses=[]),x.statuses.some(d=>d.type==="Support")||x.statuses.push({type:"Support",addedByPlayerId:f}));let z=null;for(const d in S)if(S[d].length>=2){z=parseInt(d,10);break}if(z===null&&u>=a&&u<a+n&&c>=a&&c<a+n){const m=u===a||u===a+n-1||c===a||c===a+n-1,g=Object.keys(S).length>0;m&&g&&(z=parseInt(Object.keys(S)[0],10))}z!==null&&(x.statuses||(x.statuses=[]),x.statuses.some(d=>d.type==="Threat")||x.statuses.push({type:"Threat",addedByPlayerId:z}))}return o},sg=4,ag=()=>{const e=localStorage.getItem("custom_ws_url");if(e&&e.trim()!=="")return console.log(`Using custom WebSocket URL: ${e}`),e.trim();const t=window.location.protocol==="https:"?"wss":"ws",n=window.location.hostname||"localhost";return window.location.port&&window.location.port!=="80"&&window.location.port!=="443"&&window.location.hostname==="localhost"?"wss://platinocyanic-unsceptically-belia.ngrok-free.dev":`${t}://${n}`},ig=()=>Math.random().toString(36).substring(2,18).toUpperCase(),ug=()=>{const e=E.useCallback((h,y,v)=>{const k=gi[h];if(!k)return console.error(`Deck data for ${h} not loaded! Returning empty deck.`),[];const w=[...k].map(D=>({...D,ownerId:y,ownerName:v}));return xa(w)},[]),t=E.useCallback((h,y=!1)=>{const v=Object.keys(gi)[0],k={id:h,name:y?`Dummy ${h-1}`:`Player ${h}`,score:0,hand:[],deck:[],discard:[],announcedCard:null,selectedDeck:v,color:fp[h-1]||"blue",isDummy:y,isReady:!1};return k.deck=e(v,h,k.name),k},[e]),n=E.useCallback(()=>({players:[],board:Jc(),activeGridSize:7,gameId:null,dummyPlayerCount:0,isGameStarted:!1,gameMode:Cn.FreeForAll,isPrivate:!0,isReadyCheckActive:!1,revealRequests:[],activeTurnPlayerId:void 0,startingPlayerId:void 0,currentPhase:0,isScoringStep:!1,currentRound:1,turnNumber:1,roundEndTriggered:!1,roundWinners:{},gameWinner:null,isRoundEndModalOpen:!1}),[]),[r,o]=E.useState(n),[l,a]=E.useState(null),[i,u]=E.useState(null),[c,x]=E.useState("Connecting"),[f,p]=E.useState([]),[T,S]=E.useState(null),[I,z]=E.useState(null),d=E.useRef(null),m=E.useRef(null),g=E.useRef(null),C=E.useRef(!1),N=E.useRef(r);E.useEffect(()=>{N.current=r},[r]);const P=E.useRef(l);E.useEffect(()=>{P.current=l},[l]);const j=E.useCallback(h=>{o(y=>{const v=typeof h=="function"?h(y):h;return d.current&&d.current.readyState===WebSocket.OPEN&&d.current.send(JSON.stringify({type:"UPDATE_STATE",gameState:v})),v})},[]),B=E.useCallback(()=>{if(C.current||d.current&&(d.current.readyState===WebSocket.OPEN||d.current.readyState===WebSocket.CONNECTING))return;const h=ag();try{d.current=new WebSocket(h)}catch(y){console.error("Failed to create WebSocket:",y),x("Disconnected"),m.current&&clearTimeout(m.current),m.current=window.setTimeout(B,3e3);return}x("Connecting"),d.current.onopen=()=>{var v;console.log("WebSocket connection established"),x("Connected");const y=N.current;if(y&&y.gameId&&((v=d.current)==null?void 0:v.readyState)===WebSocket.OPEN){let k;try{const w=localStorage.getItem("reconnection_data");if(w){const D=JSON.parse(w);D.gameId===y.gameId&&(k=D.playerToken)}}catch{}d.current.send(JSON.stringify({type:"JOIN_GAME",gameId:y.gameId,playerToken:k})),P.current===1&&d.current.send(JSON.stringify({type:"UPDATE_DECK_DATA",deckData:lr}))}},d.current.onmessage=y=>{try{const v=JSON.parse(y.data);if(v.type==="GAMES_LIST")p(v.games);else if(v.type==="JOIN_SUCCESS"){a(v.playerId);const k=g.current||N.current.gameId;k&&v.playerId!==null&&v.playerToken?localStorage.setItem("reconnection_data",JSON.stringify({gameId:k,playerId:v.playerId,playerToken:v.playerToken,timestamp:Date.now()})):v.playerId===null&&localStorage.removeItem("reconnection_data"),g.current=null,v.playerId===1&&setTimeout(()=>{var w;((w=d.current)==null?void 0:w.readyState)===WebSocket.OPEN&&d.current.send(JSON.stringify({type:"UPDATE_DECK_DATA",deckData:lr}))},500)}else v.type==="ERROR"?v.message.includes("not found")||v.message.includes("Dummy")?(o(n()),a(null),localStorage.removeItem("reconnection_data")):console.warn("Server Error:",v.message):v.type==="HIGHLIGHT_TRIGGERED"?S(v.highlightData):v.type==="FLOATING_TEXT_TRIGGERED"?z([v.floatingTextData]):v.type==="FLOATING_TEXT_BATCH_TRIGGERED"?z(v.batch):o(v)}catch(v){console.error("Failed to parse message from server:",y.data,v)}},d.current.onclose=()=>{console.log("WebSocket connection closed. Attempting to reconnect in 3s..."),x("Disconnected"),C.current||(m.current&&clearTimeout(m.current),m.current=window.setTimeout(B,3e3))},d.current.onerror=y=>console.error("WebSocket error event:",y)},[o,n]),ie=E.useCallback(()=>{d.current&&d.current.close()},[]),$=E.useCallback(h=>{var y;if(C.current=!1,((y=d.current)==null?void 0:y.readyState)===WebSocket.OPEN){g.current=h;let v=null;try{const w=localStorage.getItem("reconnection_data");w&&(v=JSON.parse(w))}catch{localStorage.removeItem("reconnection_data")}const k={type:"JOIN_GAME",gameId:h};v&&v.gameId===h&&v.playerToken&&(k.playerToken=v.playerToken),d.current.send(JSON.stringify(k))}else B(),g.current=h},[B]);E.useEffect(()=>(C.current=!1,localStorage.removeItem("reconnection_data"),B(),()=>{m.current&&clearTimeout(m.current),d.current&&(d.current.onclose=null,d.current.close())}),[B]);const fe=E.useCallback(()=>{var v;C.current=!1,localStorage.removeItem("reconnection_data");const h=ig(),y={...n(),gameId:h,players:[t(1)]};j(y),((v=d.current)==null?void 0:v.readyState)===WebSocket.OPEN&&(d.current.send(JSON.stringify({type:"SUBSCRIBE",gameId:h})),d.current.send(JSON.stringify({type:"UPDATE_DECK_DATA",deckData:lr})))},[j,n,t]),ke=E.useCallback(()=>{var h;((h=d.current)==null?void 0:h.readyState)===WebSocket.OPEN&&d.current.send(JSON.stringify({type:"GET_GAMES_LIST"}))},[]),be=E.useCallback(()=>{var v;C.current=!0;const h=N.current.gameId,y=P.current;o(n()),a(null),localStorage.removeItem("reconnection_data"),d.current&&(d.current.onclose=null),((v=d.current)==null?void 0:v.readyState)===WebSocket.OPEN&&h&&y!==null&&d.current.send(JSON.stringify({type:"LEAVE_GAME",gameId:h,playerId:y})),d.current&&d.current.close(),setTimeout(()=>{C.current=!1,B()},100)},[n,B]),Te=E.useCallback(()=>{var h;((h=d.current)==null?void 0:h.readyState)===WebSocket.OPEN&&N.current.gameId&&d.current.send(JSON.stringify({type:"START_READY_CHECK",gameId:N.current.gameId}))},[]),Ie=E.useCallback(()=>{var h;((h=d.current)==null?void 0:h.readyState)===WebSocket.OPEN&&N.current.gameId&&d.current.send(JSON.stringify({type:"CANCEL_READY_CHECK",gameId:N.current.gameId}))},[]),W=E.useCallback(()=>{var h;((h=d.current)==null?void 0:h.readyState)===WebSocket.OPEN&&N.current.gameId&&P.current!==null&&d.current.send(JSON.stringify({type:"PLAYER_READY",gameId:N.current.gameId,playerId:P.current}))},[]),le=E.useCallback(h=>{var y;((y=d.current)==null?void 0:y.readyState)===WebSocket.OPEN&&N.current.gameId&&d.current.send(JSON.stringify({type:"ASSIGN_TEAMS",gameId:N.current.gameId,assignments:h}))},[]),A=E.useCallback(h=>{var y;((y=d.current)==null?void 0:y.readyState)===WebSocket.OPEN&&N.current.gameId&&d.current.send(JSON.stringify({type:"SET_GAME_MODE",gameId:N.current.gameId,mode:h}))},[]),U=E.useCallback(h=>{var y;((y=d.current)==null?void 0:y.readyState)===WebSocket.OPEN&&N.current.gameId&&d.current.send(JSON.stringify({type:"SET_GAME_PRIVACY",gameId:N.current.gameId,isPrivate:h}))},[]),ne=E.useCallback(()=>{var h;if(((h=d.current)==null?void 0:h.readyState)===WebSocket.OPEN&&N.current.gameId&&P.current===1){d.current.send(JSON.stringify({type:"UPDATE_DECK_DATA",deckData:lr}));const y=N.current,v=JSON.parse(JSON.stringify(y));v.players.forEach(k=>{if(["hand","deck","discard"].forEach(w=>{k[w]&&(k[w]=k[w].map(D=>{const R=ga(D.name);return R?{...D,...R}:D}))}),k.announcedCard){const w=ga(k.announcedCard.name);w&&(k.announcedCard={...k.announcedCard,...w})}}),v.board.forEach(k=>{k.forEach(w=>{if(w.card){const D=ga(w.card.name);D&&(w.card={...w.card,...D})}})}),d.current.send(JSON.stringify({type:"FORCE_SYNC",gameState:v})),o(v)}},[]),te=E.useCallback(()=>{j(h=>{if(P.current!==1)return h;const y=h.players.map(v=>{const k=e(v.selectedDeck,v.id,v.name);return{...v,hand:[],deck:k,discard:[],announcedCard:null,score:0,isReady:!1}});return{...h,players:y,board:Jc(),isGameStarted:!1,isReadyCheckActive:!1,revealRequests:[],activeTurnPlayerId:void 0,startingPlayerId:void 0,currentPhase:0,isScoringStep:!1,currentRound:1,turnNumber:1,roundEndTriggered:!1,roundWinners:{},gameWinner:null,isRoundEndModalOpen:!1}})},[j,e]),_=E.useCallback(h=>{j(y=>{if(y.isGameStarted)return y;const v={...y,activeGridSize:h};return v.board=Xt(v),v})},[j]),O=E.useCallback(h=>{j(y=>{if(y.isGameStarted)return y;const v=y.players.filter(w=>!w.isDummy);if(v.length+h>sg)return y;const k=[...v];for(let w=0;w<h;w++){const D=k.length+1,R=t(D,!0);R.name=`Dummy ${w+1}`,k.push(R)}return{...y,players:k,dummyPlayerCount:h}})},[j,t]),K=E.useCallback((h,y,v)=>{j(k=>{var R;if(!k.isGameStarted)return k;const w=JSON.parse(JSON.stringify(k)),D=w.board[h.row][h.col].card;if(D){if(["Support","Threat","Revealed"].includes(y)&&((R=D.statuses)==null?void 0:R.some(re=>re.type===y&&re.addedByPlayerId===v)))return k;D.statuses||(D.statuses=[]),D.statuses.push({type:y,addedByPlayerId:v})}return w})},[j]),V=E.useCallback((h,y)=>{j(v=>{if(!v.isGameStarted)return v;const k=JSON.parse(JSON.stringify(v)),w=k.board[h.row][h.col].card;if(w!=null&&w.statuses){const D=w.statuses.map(R=>R.type).lastIndexOf(y);D>-1&&w.statuses.splice(D,1)}return k})},[j]),L=E.useCallback((h,y,v)=>{j(k=>{if(!k.isGameStarted)return k;const w=JSON.parse(JSON.stringify(k)),D=w.board[h.row][h.col].card;if(D!=null&&D.statuses){const R=D.statuses.findIndex(q=>q.type===y&&q.addedByPlayerId===v);R>-1&&D.statuses.splice(R,1)}return w})},[j]),oe=E.useCallback((h,y)=>{j(v=>{if(!v.isGameStarted)return v;const k=JSON.parse(JSON.stringify(v)),w=k.board[h.row][h.col].card;return w&&(w.powerModifier===void 0&&(w.powerModifier=0),w.powerModifier+=y),k})},[j]),Q=E.useCallback((h,y,v)=>{j(k=>{var R;if(!k.isGameStarted)return k;const w=JSON.parse(JSON.stringify(k)),D=w.players.find(q=>q.id===h);if(D&&D.announcedCard){if(["Support","Threat","Revealed"].includes(y)&&((R=D.announcedCard.statuses)==null?void 0:R.some(re=>re.type===y&&re.addedByPlayerId===v)))return k;D.announcedCard.statuses||(D.announcedCard.statuses=[]),D.announcedCard.statuses.push({type:y,addedByPlayerId:v})}return w})},[j]),we=E.useCallback((h,y)=>{j(v=>{var D;if(!v.isGameStarted)return v;const k=JSON.parse(JSON.stringify(v)),w=k.players.find(R=>R.id===h);if(w&&((D=w.announcedCard)!=null&&D.statuses)){const R=w.announcedCard.statuses.map(q=>q.type).lastIndexOf(y);R>-1&&w.announcedCard.statuses.splice(R,1)}return k})},[j]),ee=E.useCallback((h,y)=>{j(v=>{if(!v.isGameStarted)return v;const k=JSON.parse(JSON.stringify(v)),w=k.players.find(D=>D.id===h);return w&&w.announcedCard&&(w.announcedCard.powerModifier===void 0&&(w.announcedCard.powerModifier=0),w.announcedCard.powerModifier+=y),k})},[j]),ae=E.useCallback((h,y,v,k)=>{j(w=>{var q;if(!w.isGameStarted)return w;const D=JSON.parse(JSON.stringify(w)),R=D.players.find(re=>re.id===h);if(R&&R.hand[y]){const re=R.hand[y];if(["Support","Threat","Revealed"].includes(v)&&((q=re.statuses)==null?void 0:q.some(ce=>ce.type===v&&ce.addedByPlayerId===k)))return w;re.statuses||(re.statuses=[]),re.statuses.push({type:v,addedByPlayerId:k})}return D})},[j]),me=E.useCallback((h,y,v)=>{j(k=>{if(!k.isGameStarted)return k;const w=JSON.parse(JSON.stringify(k)),D=w.players.find(q=>q.id===h),R=D==null?void 0:D.hand[y];if(R!=null&&R.statuses){const q=R.statuses.map(re=>re.type).lastIndexOf(v);q>-1&&R.statuses.splice(q,1),v==="Revealed"&&(R.statuses.some(H=>H.type==="Revealed")||delete R.revealedTo)}return w})},[j]),Y=E.useCallback(h=>{j(y=>{if(!y.isGameStarted)return y;const v=JSON.parse(JSON.stringify(y)),k=v.board[h.row][h.col].card;return k&&(k.isFaceDown=!1),v.board=Xt(v),v})},[j]),F=E.useCallback(h=>{j(y=>{if(!y.isGameStarted)return y;const v=JSON.parse(JSON.stringify(y)),k=v.board[h.row][h.col].card;return k&&(k.isFaceDown=!0),v.board=Xt(v),v})},[j]),se=E.useCallback((h,y,v)=>{j(k=>{const w=k.players.find(q=>q.id===h);if(!w||!w.hand[y])return k;const D=JSON.parse(JSON.stringify(k)),R=D.players.find(q=>q.id===h).hand[y];if(v==="all")R.revealedTo="all",R.statuses||(R.statuses=[]),R.statuses.some(q=>q.type==="Revealed"&&q.addedByPlayerId===h)||R.statuses.push({type:"Revealed",addedByPlayerId:h});else{(!R.revealedTo||R.revealedTo==="all"||!Array.isArray(R.revealedTo))&&(R.revealedTo=[]);const q=v.filter(re=>!R.revealedTo.includes(re));R.revealedTo.push(...q)}return D})},[j]),xe=E.useCallback((h,y)=>{j(v=>{if(!v.board[h.row][h.col].card)return v;const w=JSON.parse(JSON.stringify(v)),D=w.board[h.row][h.col].card,R=D.ownerId;if(y==="all")D.revealedTo="all",R!==void 0&&(D.statuses||(D.statuses=[]),D.statuses.some(q=>q.type==="Revealed"&&q.addedByPlayerId===R)||D.statuses.push({type:"Revealed",addedByPlayerId:R}));else{(!D.revealedTo||D.revealedTo==="all"||!Array.isArray(D.revealedTo))&&(D.revealedTo=[]);const q=y.filter(re=>!D.revealedTo.includes(re));D.revealedTo.push(...q)}return w})},[j]),Pe=E.useCallback((h,y)=>{j(v=>{var R;const k=h.boardCoords?(R=v.board[h.boardCoords.row][h.boardCoords.col].card)==null?void 0:R.ownerId:h.ownerId;if(!k)return v;const w=JSON.parse(JSON.stringify(v)),D=w.revealRequests.find(q=>q.fromPlayerId===y&&q.toPlayerId===k);return D?D.cardIdentifiers.some(re=>JSON.stringify(re)===JSON.stringify(h))||D.cardIdentifiers.push(h):w.revealRequests.push({fromPlayerId:y,toPlayerId:k,cardIdentifiers:[h]}),w})},[j]),Me=E.useCallback((h,y)=>{j(v=>{const k=v.revealRequests.findIndex(R=>R.toPlayerId===P.current&&R.fromPlayerId===h);if(k===-1)return v;const w=JSON.parse(JSON.stringify(v)),D=w.revealRequests[k];if(y){const{toPlayerId:R,cardIdentifiers:q}=D;for(const re of q){let H=null;if(re.source==="board"&&re.boardCoords)H=w.board[re.boardCoords.row][re.boardCoords.col].card;else if(re.source==="hand"&&re.ownerId&&re.cardIndex!==void 0){const ce=w.players.find(ve=>ve.id===re.ownerId);ce&&(H=ce.hand[re.cardIndex])}H&&(H.statuses||(H.statuses=[]),H.statuses.some(ce=>ce.type==="Revealed"&&ce.addedByPlayerId===h)||H.statuses.push({type:"Revealed",addedByPlayerId:h}))}}return w.revealRequests.splice(k,1),w})},[j]),_e=E.useCallback(h=>{j(y=>{const v=JSON.parse(JSON.stringify(y));let k=null;if(h.source==="board"&&h.boardCoords)k=v.board[h.boardCoords.row][h.boardCoords.col].card;else if(h.source==="hand"&&h.playerId&&h.cardIndex!==void 0){const w=v.players.find(D=>D.id===h.playerId);w&&(k=w.hand[h.cardIndex])}return k&&(k.statuses&&(k.statuses=k.statuses.filter(w=>w.type!=="Revealed")),delete k.revealedTo),v})},[j]),et=E.useCallback((h,y)=>{j(v=>v.isGameStarted?v:{...v,players:v.players.map(k=>k.id===h?{...k,name:y}:k)})},[j]),it=E.useCallback((h,y)=>{j(v=>v.isGameStarted||v.players.some(w=>w.id!==h&&!w.isDummy&&w.color===y)?v:{...v,players:v.players.map(w=>w.id===h?{...w,color:y}:w)})},[j]),Mt=E.useCallback((h,y)=>{j(v=>{if(!v.isGameStarted)return v;const k=JSON.parse(JSON.stringify(v)),w=k.players.find(D=>D.id===h);return w&&(w.score+=y),k})},[j]),lo=E.useCallback((h,y)=>{j(v=>v.isGameStarted?v:{...v,players:v.players.map(k=>k.id===h?{...k,deck:e(y,h,k.name),selectedDeck:y,hand:[],discard:[],announcedCard:null}:k)})},[j,e]),jn=E.useCallback((h,y)=>{j(v=>{if(v.isGameStarted)return v;const k=v.players.find(R=>R.id===h);if(!k)return v;const w=[];let D=new Map;for(const{cardId:R,quantity:q}of y.cards){const re=yu(R);if(!re)continue;const H=hu.has(R),ce=H?Re.Command:Re.Custom,ve=H?"CMD":"CUS";for(let Ce=0;Ce<q;Ce++){const Ee=(D.get(R)||0)+1;D.set(R,Ee),w.push({...re,id:`${ve}_${R.toUpperCase()}_${Ee}`,deck:ce,ownerId:h,ownerName:k.name})}}return{...v,players:v.players.map(R=>R.id===h?{...R,deck:xa(w),selectedDeck:Re.Custom,hand:[],discard:[],announcedCard:null}:R)}})},[j]),_n=E.useCallback(h=>{j(y=>{if(!y.isGameStarted)return y;const v=y.players.find(R=>R.id===h);if(!v||v.deck.length===0)return y;const k=JSON.parse(JSON.stringify(y)),w=k.players.find(R=>R.id===h),D=w.deck.shift();return D&&w.hand.push(D),k})},[j]),so=E.useCallback(h=>{j(y=>{if(!y.isGameStarted||!y.players.find(D=>D.id===h))return y;const k=JSON.parse(JSON.stringify(y)),w=k.players.find(D=>D.id===h);return w.deck=xa(w.deck),k})},[j]),er=E.useCallback(h=>{j(y=>{const v=y.activeTurnPlayerId===h?void 0:h;return{...y,activeTurnPlayerId:v}})},[j]),Ps=E.useCallback(h=>{j(y=>y.isGameStarted?{...y,currentPhase:Math.max(0,Math.min(h,xi.length-1))}:y)},[j]),sl=E.useCallback(()=>{j(h=>{if(!h.isGameStarted)return h;const y=JSON.parse(JSON.stringify(h));if(y.isScoringStep){y.isScoringStep=!1;const k=h.activeTurnPlayerId;k!==void 0&&y.board.forEach(D=>{D.forEach(R=>{if(R.card&&R.card.ownerId===k&&R.card.statuses){const q=R.card.statuses.findIndex(re=>re.type==="Stun");q!==-1&&R.card.statuses.splice(q,1)}})});let w=k;if(w!==void 0){const D=[...y.players].sort((q,re)=>q.id-re.id),R=D.findIndex(q=>q.id===w);if(R!==-1){let q=(R+1)%D.length;w=D[q].id}}if(y.currentPhase=0,y.activeTurnPlayerId=w,y.startingPlayerId!==void 0&&w===y.startingPlayerId){const D=y.currentRound*10+10,R=y.currentRound===5&&y.turnNumber>=10;let q=-1/0;if(y.players.forEach(H=>{H.score>q&&(q=H.score)}),q>=D||R){const H=y.players.filter(Ee=>Ee.score===q).map(Ee=>Ee.id);y.roundWinners[y.currentRound]=H;const ve=Object.values(y.roundWinners).flat().reduce((Ee,Xe)=>(Ee[Xe]=(Ee[Xe]||0)+1,Ee),{}),Ce=Object.keys(ve).filter(Ee=>ve[Number(Ee)]>=2).map(Ee=>Number(Ee));Ce.length>0&&(y.gameWinner=Ce[0]),y.isRoundEndModalOpen=!0}else y.turnNumber+=1}return y.board.forEach(D=>{D.forEach(R=>{R.card&&(delete R.card.enteredThisTurn,delete R.card.abilityUsedInPhase)})}),y.board.forEach(D=>{D.forEach(R=>{if(R.card&&R.card.statuses){const q=R.card.statuses.findIndex(re=>re.type==="Resurrected");if(q!==-1){const re=R.card.statuses[q].addedByPlayerId;R.card.statuses.splice(q,1),R.card.statuses.push({type:"Stun",addedByPlayerId:re}),R.card.statuses.push({type:"Stun",addedByPlayerId:re})}}})}),y}const v=h.currentPhase+1;return y.board.forEach(k=>{k.forEach(w=>{w.card&&(w.card.deployAbilityConsumed=!0)})}),v>=xi.length?(y.isScoringStep=!0,y):(y.board.forEach(k=>{k.forEach(w=>{if(w.card&&w.card.statuses){const D=w.card.statuses.findIndex(R=>R.type==="Resurrected");if(D!==-1){const R=w.card.statuses[D].addedByPlayerId;w.card.statuses.splice(D,1),w.card.statuses.push({type:"Stun",addedByPlayerId:R}),w.card.statuses.push({type:"Stun",addedByPlayerId:R})}}})}),y.currentPhase=v,y)})},[j]),wr=E.useCallback(()=>{j(h=>h.isGameStarted?h.isScoringStep?{...h,isScoringStep:!1}:{...h,currentPhase:Math.max(0,h.currentPhase-1)}:h)},[j]),al=E.useCallback(()=>{j(h=>{const y=JSON.parse(JSON.stringify(h));return y.isRoundEndModalOpen=!1,y.players.forEach(v=>v.score=0),y.currentRound+=1,y.roundEndTriggered=!1,y.turnNumber=1,y.gameWinner=null,y})},[j]),ao=E.useCallback((h,y)=>{j(v=>{var R,q,re;if(!v.isGameStarted||y.target==="board"&&y.boardCoords&&v.board[y.boardCoords.row][y.boardCoords.col].card!==null&&h.source!=="counter_panel")return v;const k=JSON.parse(JSON.stringify(v));if(h.source==="board"&&["hand","deck","discard"].includes(y.target)&&!h.bypassOwnershipCheck){const H=h.card.ownerId,ce=k.players.find(Ee=>Ee.id===H),ve=H===P.current,Ce=!!(ce!=null&&ce.isDummy);if(!ve&&!Ce)return v}if(k.startingPlayerId===void 0&&y.target==="board"&&h.source!=="board"){const H=h.playerId||P.current;H!==null&&(k.startingPlayerId=H)}if(h.source==="board"&&y.target==="board"){let ce=h.card;if(h.boardCoords){const Ce=v.board[h.boardCoords.row][h.boardCoords.col];Ce.card&&(ce=Ce.card)}if((R=ce.statuses)==null?void 0:R.some(Ce=>Ce.type==="Stun")){const Ce=P.current,Ee=ce.ownerId,Xe=v.players.find(Ve=>Ve.id===Ce),pt=v.players.find(Ve=>Ve.id===Ee),tt=Ce===Ee,Fe=(Xe==null?void 0:Xe.teamId)!==void 0&&(pt==null?void 0:pt.teamId)!==void 0&&Xe.teamId===pt.teamId;if((tt||Fe)&&!h.isManual)return v}}if(h.source==="counter_panel"&&h.statusType){const H=ll[h.statusType];if(!((H==null?void 0:H.allowedTargets)||["board","hand"]).includes(y.target))return v;let ve=null;if(y.target==="board"&&y.boardCoords)ve=k.board[y.boardCoords.row][y.boardCoords.col].card;else if(y.playerId!==void 0){const Ce=k.players.find(Ee=>Ee.id===y.playerId);Ce&&(y.target==="hand"&&y.cardIndex!==void 0&&(ve=Ce.hand[y.cardIndex]),y.target==="announced"&&(ve=Ce.announcedCard||null),y.target==="deck"&&Ce.deck.length>0?y.deckPosition==="top"||!y.deckPosition?ve=Ce.deck[0]:ve=Ce.deck[Ce.deck.length-1]:y.target==="discard"&&Ce.discard.length>0&&(ve=Ce.discard[Ce.discard.length-1]))}if(ve){const Ce=h.count||1,Ee=k.players.find(pt=>pt.id===k.activeTurnPlayerId),Xe=Ee&&Ee.isDummy?Ee.id:P.current!==null?P.current:0;if(h.statusType==="Power+")ve.powerModifier===void 0&&(ve.powerModifier=0),ve.powerModifier+=1*Ce;else if(h.statusType==="Power-")ve.powerModifier===void 0&&(ve.powerModifier=0),ve.powerModifier-=1*Ce;else{ve.statuses||(ve.statuses=[]);for(let pt=0;pt<Ce;pt++)["Support","Threat","Revealed"].includes(h.statusType)?ve.statuses.some(Fe=>Fe.type===h.statusType&&Fe.addedByPlayerId===Xe)||ve.statuses.push({type:h.statusType,addedByPlayerId:Xe}):ve.statuses.push({type:h.statusType,addedByPlayerId:Xe})}return y.target==="board"&&(k.board=Xt(k)),k}return v}let w={...h.card};if(h.source==="hand"&&h.playerId!==void 0&&h.cardIndex!==void 0){const H=k.players.find(ce=>ce.id===h.playerId);H&&H.hand.splice(h.cardIndex,1)}else if(h.source==="board"&&h.boardCoords)k.board[h.boardCoords.row][h.boardCoords.col].card=null;else if(h.source==="discard"&&h.playerId!==void 0&&h.cardIndex!==void 0){const H=k.players.find(ce=>ce.id===h.playerId);H&&H.discard.splice(h.cardIndex,1)}else if(h.source==="deck"&&h.playerId!==void 0&&h.cardIndex!==void 0){const H=k.players.find(ce=>ce.id===h.playerId);H&&H.deck.splice(h.cardIndex,1)}else if(h.source==="announced"&&h.playerId!==void 0){const H=k.players.find(ce=>ce.id===h.playerId);H&&(H.announcedCard=null)}if(["hand","deck","discard"].includes(y.target)?(w.statuses&&(w.statuses=w.statuses.filter(H=>H.type==="Revealed")),w.isFaceDown=!1,delete w.powerModifier,delete w.enteredThisTurn,delete w.abilityUsedInPhase,delete w.deployAbilityConsumed):y.target==="board"&&(w.statuses||(w.statuses=[]),h.source!=="board"&&w.isFaceDown===void 0&&(w.isFaceDown=!1),h.source!=="board"&&(w.enteredThisTurn=!0,delete w.deployAbilityConsumed)),y.target==="hand"&&y.playerId!==void 0){if(w.deck===Re.Tokens||w.deck==="counter")return k;const H=k.players.find(ce=>ce.id===y.playerId);H&&H.hand.push(w)}else if(y.target==="board"&&y.boardCoords){if(k.board[y.boardCoords.row][y.boardCoords.col].card===null){if(w.ownerId===void 0&&P.current!==null){const H=k.players.find(ce=>ce.id===P.current);H&&(w.ownerId=H.id,w.ownerName=H.name)}if((h.source==="hand"||h.source==="announced")&&h.isManual){const H=w.ownerId;k.board.forEach(ce=>{ce.forEach(ve=>{ve.card&&ve.card.ownerId===H&&ve.card.statuses&&(ve.card.statuses=ve.card.statuses.filter(Ce=>Ce.type!=="LastPlayed"))})}),w.statuses||(w.statuses=[]),w.statuses.push({type:"LastPlayed",addedByPlayerId:H})}k.board[y.boardCoords.row][y.boardCoords.col].card=w}}else if(y.target==="discard"&&y.playerId!==void 0){if(!(w.deck===Re.Tokens||w.deck==="counter")){const H=k.players.find(ce=>ce.id===y.playerId);H&&H.discard.push(w)}}else if(y.target==="deck"&&y.playerId!==void 0){if(w.deck===Re.Tokens||w.deck==="counter")return k;const H=k.players.find(ce=>ce.id===y.playerId);H&&(y.deckPosition==="top"||!y.deckPosition?H.deck.unshift(w):H.deck.push(w))}else if(y.target==="announced"&&y.playerId!==void 0){const H=k.players.find(ce=>ce.id===y.playerId);H&&(H.announcedCard&&(H.announcedCard.statuses&&(H.announcedCard.statuses=H.announcedCard.statuses.filter(ce=>ce.type==="Revealed")),delete H.announcedCard.enteredThisTurn,delete H.announcedCard.abilityUsedInPhase,delete H.announcedCard.powerModifier,delete H.announcedCard.deployAbilityConsumed,H.hand.push(H.announcedCard)),H.announcedCard=w)}if(h.source==="hand"&&y.target==="board"){const H=w;if(H.revealedTo==="all"||((q=H.statuses)==null?void 0:q.some(ve=>ve.type==="Revealed"))){const ve=k.board.length;for(let Ce=0;Ce<ve;Ce++)for(let Ee=0;Ee<ve;Ee++){const Xe=k.board[Ce][Ee].card;if(Xe&&Xe.name.toLowerCase().includes("vigilant spotter")&&Xe.ownerId!==H.ownerId&&(k.board=Xt(k),(re=k.board[Ce][Ee].card.statuses)!=null&&re.some(tt=>tt.type==="Support"))){const tt=k.players.find(Fe=>Fe.id===Xe.ownerId);tt&&(tt.score+=2)}}}}return(h.source==="board"||y.target==="board")&&(k.board=Xt(k)),k})},[j]),il=E.useCallback((h,y,v,k)=>{j(w=>{if(!w.isGameStarted||w.board[v.row][v.col].card!==null)return w;const D=JSON.parse(JSON.stringify(w)),R=D.players.find(q=>q.id===h);if(R&&R.discard.length>y){const[q]=R.discard.splice(y,1);q.enteredThisTurn=!0,delete q.deployAbilityConsumed,q.statuses||(q.statuses=[]),q.statuses.push({type:"Resurrected",addedByPlayerId:h}),k&&k.forEach(re=>{var H;re.type!=="Resurrected"&&((H=q.statuses)==null||H.push({type:re.type,addedByPlayerId:h}))}),D.board[v.row][v.col].card=q,D.board=Xt(D)}return D})},[j]),io=E.useCallback(h=>{var y;if(((y=d.current)==null?void 0:y.readyState)===WebSocket.OPEN&&N.current.gameId){const v={...h,timestamp:Date.now()};d.current.send(JSON.stringify({type:"TRIGGER_HIGHLIGHT",gameId:N.current.gameId,highlightData:v}))}},[]),Cr=E.useCallback(h=>{var y;if(((y=d.current)==null?void 0:y.readyState)===WebSocket.OPEN&&N.current.gameId){const v=Array.isArray(h)?h:[h],k=Date.now(),w=v.map((D,R)=>({...D,timestamp:k+R}));d.current.send(JSON.stringify({type:"TRIGGER_FLOATING_TEXT_BATCH",gameId:N.current.gameId,batch:w}))}},[]),tr=E.useCallback((h,y)=>{j(v=>{if(!v.isGameStarted)return v;const k=JSON.parse(JSON.stringify(v)),w=k.board[h.row][h.col].card;return w&&(y?w.deployAbilityConsumed=!0:w.abilityUsedInPhase=k.currentPhase),k})},[j]),ul=E.useCallback((h,y,v,k,w)=>{j(D=>{if(!D.isGameStarted)return D;const R=JSON.parse(JSON.stringify(D));y.forEach(({row:re,col:H})=>{const ce=R.board[re][H].card;ce&&(ce.statuses||(ce.statuses=[]),["Support","Threat","Revealed"].includes(v)?ce.statuses.some(Ce=>Ce.type===v&&Ce.addedByPlayerId===k)||ce.statuses.push({type:v,addedByPlayerId:k}):ce.statuses.push({type:v,addedByPlayerId:k}))});const q=R.board[h.row][h.col].card;return q&&(w?q.deployAbilityConsumed=!0:q.abilityUsedInPhase=R.currentPhase),R})},[j]),nr=E.useCallback((h,y)=>{j(v=>{if(!v.isGameStarted)return v;const k=JSON.parse(JSON.stringify(v)),w=k.board[h.row][h.col].card,D=k.board[y.row][y.col].card;return k.board[h.row][h.col].card=D,k.board[y.row][y.col].card=w,k.board=Xt(k),k})},[j]),cl=E.useCallback((h,y,v)=>{j(k=>{if(!k.isGameStarted)return k;const w=JSON.parse(JSON.stringify(k)),D=w.board[h.row][h.col].card,R=w.board[y.row][y.col].card;if(D&&R&&D.statuses){const q=D.statuses.findIndex(re=>re.type===v);if(q>-1){const[re]=D.statuses.splice(q,1);R.statuses||(R.statuses=[]),R.statuses.push(re)}}return w.board=Xt(w),w})},[j]),uo=E.useCallback((h,y)=>{j(v=>{if(!v.isGameStarted)return v;const k=JSON.parse(JSON.stringify(v)),w=k.board[h.row][h.col].card,D=k.board[y.row][y.col].card,R=["Support","Threat"];if(w&&D&&w.statuses){const q=w.statuses.filter(H=>!R.includes(H.type)),re=w.statuses.filter(H=>R.includes(H.type));q.length>0&&(D.statuses||(D.statuses=[]),D.statuses.push(...q),w.statuses=re)}return k.board=Xt(k),k})},[j]),Er=E.useCallback((h,y)=>{j(v=>{if(!v.isGameStarted)return v;const k=JSON.parse(JSON.stringify(v)),w=k.players.find(D=>D.id===h);if(w&&w.discard.length>y){const[D]=w.discard.splice(y,1);w.hand.push(D)}return k})},[j]),Sr=E.useCallback((h,y,v)=>{j(k=>{if(!k.isGameStarted)return k;const w=JSON.parse(JSON.stringify(k)),D=Object.keys(lr.tokenDatabase).find(re=>lr.tokenDatabase[re].name===y);if(!D)return k;const R=lr.tokenDatabase[D],q=w.players.find(re=>re.id===v);if(R&&w.board[h.row][h.col].card===null){const re={id:`TKN_${y.toUpperCase().replace(/\s/g,"_")}_${Date.now()}`,deck:Re.Tokens,name:y,imageUrl:R.imageUrl,fallbackImage:R.fallbackImage,power:R.power,ability:R.ability,color:R.color,types:R.types||["Unit"],faction:"Tokens",ownerId:v,ownerName:q==null?void 0:q.name,enteredThisTurn:!0};w.board[h.row][h.col].card=re}return w.board=Xt(w),w})},[j]),As=E.useCallback((h,y,v,k,w)=>{var Xe,pt;const D=N.current;if(!D.isGameStarted)return;const R=D.board.some(tt=>tt.some(Fe=>{var Ve;return Fe.card&&Fe.card.ownerId===w&&Fe.card.name.toLowerCase().includes("data liberator")&&((Ve=Fe.card.statuses)==null?void 0:Ve.some(Z=>Z.type==="Support"))})),q=D.board.length;let re=h,H=h,ce=y,ve=y;if(h===v)re=h,H=h,ce=0,ve=q-1;else if(y===k)ce=y,ve=y,re=0,H=q-1;else return;let Ce=0;const Ee=[];for(let tt=re;tt<=H;tt++)for(let Fe=ce;Fe<=ve;Fe++){const Z=D.board[tt][Fe].card;if(Z&&!((Xe=Z.statuses)!=null&&Xe.some(Ye=>Ye.type==="Stun"))){const Ye=Z.ownerId===w,Ut=(pt=Z.statuses)==null?void 0:pt.some(Kt=>Kt.type==="Exploit"&&Kt.addedByPlayerId===w);if(Ye||R&&Ut&&Z.ownerId!==w){const Kt=Math.max(0,Z.power+(Z.powerModifier||0));Kt>0&&(Ce+=Kt,Ee.push({row:tt,col:Fe,text:`+${Kt}`,playerId:w}))}}}Ee.length>0&&Cr(Ee),j(tt=>{const Fe=JSON.parse(JSON.stringify(tt)),Ve=Fe.players.find(Z=>Z.id===w);return Ve&&(Ve.score+=Ce),Fe})},[j,Cr]);return{gameState:r,localPlayerId:l,setLocalPlayerId:a,draggedItem:i,setDraggedItem:u,connectionStatus:c,gamesList:f,latestHighlight:T,latestFloatingTexts:I,createGame:fe,joinGame:$,requestGamesList:ke,exitGame:be,startReadyCheck:Te,cancelReadyCheck:Ie,playerReady:W,assignTeams:le,setGameMode:A,setGamePrivacy:U,setActiveGridSize:_,setDummyPlayerCount:O,updatePlayerName:et,changePlayerColor:it,updatePlayerScore:Mt,changePlayerDeck:lo,loadCustomDeck:jn,drawCard:_n,shufflePlayerDeck:so,moveItem:ao,handleDrop:ao,addBoardCardStatus:K,removeBoardCardStatus:V,removeBoardCardStatusByOwner:L,modifyBoardCardPower:oe,addAnnouncedCardStatus:Q,removeAnnouncedCardStatus:we,modifyAnnouncedCardPower:ee,addHandCardStatus:ae,removeHandCardStatus:me,flipBoardCard:Y,flipBoardCardFaceDown:F,revealHandCard:se,revealBoardCard:xe,requestCardReveal:Pe,respondToRevealRequest:Me,syncGame:ne,removeRevealedStatus:_e,resetGame:te,toggleActiveTurnPlayer:er,forceReconnect:ie,triggerHighlight:io,triggerFloatingText:Cr,nextPhase:sl,prevPhase:wr,setPhase:Ps,markAbilityUsed:tr,applyGlobalEffect:ul,swapCards:nr,transferStatus:cl,transferAllCounters:uo,recoverDiscardedCard:Er,resurrectDiscardedCard:il,spawnToken:Sr,scoreLine:As,confirmRoundEnd:al}},Ea=(e,t,n,r,o)=>{var i;const l=n.baseId||((i=e.split("_")[1])==null?void 0:i.toLowerCase())||e,a=t===-1;if(l.includes("overwatch")){if(a)return{type:"CREATE_STACK",tokenType:"Aim",count:1,sourceCard:n};if(t===0)return{type:"ENTER_MODE",mode:"SELECT_UNIT_FOR_MOVE",sourceCard:n,payload:{filter:u=>{var c;return(c=u.statuses)==null?void 0:c.some(x=>x.type==="Aim"&&x.addedByPlayerId===o)},range:2}};if(t===1)return{type:"CREATE_STACK",tokenType:"Revealed",dynamicCount:{factor:"Aim",ownerId:o},sourceCard:n};if(t===2)return{type:"GLOBAL_AUTO_APPLY",payload:{dynamicResource:{type:"draw",factor:"Aim",ownerId:o}},sourceCard:n}}if(l.includes("tacticalmaneuver")||l.includes("repositioning")){if(a)return{type:"ENTER_MODE",mode:"SELECT_UNIT_FOR_MOVE",recordContext:!0,sourceCard:n,payload:{range:"line",filter:u=>u.ownerId===o}};if(t===0)return{type:"ENTER_MODE",mode:"SELECT_TARGET",contextCheck:"ADJACENT_TO_LAST_MOVE",sourceCard:n,payload:{actionType:"DRAW_EQUAL_POWER",filter:u=>u.ownerId===o}};if(t===1)return{type:"ENTER_MODE",mode:"SELECT_UNIT_FOR_MOVE",sourceCard:n,payload:{filter:u=>u.ownerId===o,range:2}};if(t===2)return{type:"ENTER_MODE",mode:"SELECT_TARGET",contextCheck:"ADJACENT_TO_LAST_MOVE",sourceCard:n,payload:{actionType:"SCORE_EQUAL_POWER",filter:u=>u.ownerId===o}}}if(l.includes("inspiration")){if(a)return{type:"ENTER_MODE",mode:"SELECT_TARGET",sourceCard:n,payload:{actionType:"REMOVE_ALL_COUNTERS_SELF",filter:u=>u.ownerId===o}};if(t===0)return{type:"ENTER_MODE",mode:"SELECT_UNIT_FOR_MOVE",sourceCard:n,payload:{filter:u=>u.ownerId===o,range:2}};if(t===1)return{type:"GLOBAL_AUTO_APPLY",sourceCard:n,payload:{resourceChange:{draw:2}}};if(t===2)return{type:"GLOBAL_AUTO_APPLY",sourceCard:n,payload:{resourceChange:{score:2}}}}if(l.includes("datainterception")){if(a)return{type:"CREATE_STACK",tokenType:"Exploit",count:1,sourceCard:n};if(t===0)return{type:"ENTER_MODE",mode:"SELECT_UNIT_FOR_MOVE",sourceCard:n,payload:{range:"line",filter:u=>{var c;return(c=u.statuses)==null?void 0:c.some(x=>x.type==="Exploit"&&x.addedByPlayerId===o)}}};if(t===1){let u=0;return r.board.forEach(c=>c.forEach(x=>{var f,p;(p=(f=x.card)==null?void 0:f.statuses)!=null&&p.some(T=>T.type==="Exploit"&&T.addedByPlayerId===o)&&u++})),u>0?{type:"CREATE_STACK",tokenType:"Revealed",count:u,sourceCard:n}:null}if(t===2){let u=0;return r.board.forEach(c=>c.forEach(x=>{var p;const f=x.card;f&&(f.revealedTo==="all"||(p=f.statuses)!=null&&p.some(T=>T.type==="Revealed"))&&f.power>u&&(u=f.power)})),{type:"GLOBAL_AUTO_APPLY",sourceCard:n,payload:{resourceChange:{draw:u}}}}}if(l.includes("falseorders")){if(a)return{type:"ENTER_MODE",mode:"SELECT_UNIT_FOR_MOVE",sourceCard:n,payload:{filter:u=>u.ownerId!==o,range:2}};if(t===0)return{type:"ENTER_MODE",mode:"SELECT_UNIT_FOR_MOVE",sourceCard:n,payload:{filter:u=>u.ownerId!==o,range:2}};if(t===1)return{type:"ENTER_MODE",mode:"SELECT_TARGET",sourceCard:n,payload:{tokenType:"Stun",filter:u=>u.ownerId!==o}};if(t===2)return{type:"ENTER_MODE",mode:"SELECT_TARGET",sourceCard:n,payload:{actionType:"DRAW_EQUAL_POWER",filter:u=>u.ownerId!==o}}}if(a){if(l.includes("mobilization1"))return{type:"ENTER_MODE",mode:"SELECT_LINE_END",sourceCard:n,payload:{actionType:"SCORE_LINE"}};if(l.includes("mobilization2")||l.includes("mobilization3"))return null}return null},Gl=(e,t,n,r)=>{var i,u;const{card:o,ownerId:l,location:a}=e;if(t.targetOwnerId!==void 0&&t.targetOwnerId!==l||t.excludeOwnerId!==void 0&&t.excludeOwnerId===l)return!1;if(t.onlyOpponents){if(l===n)return!1;const c=r.find(f=>f.id===n),x=r.find(f=>f.id===l);if(c&&x&&c.teamId!==void 0&&c.teamId===x.teamId)return!1}if(t.onlyFaceDown&&((i=o.statuses)!=null&&i.some(c=>c.type==="Revealed")||a==="board"&&!o.isFaceDown)||t.requiredTargetStatus&&!((u=o.statuses)!=null&&u.some(c=>c.type===t.requiredTargetStatus)))return!1;if(t.mustBeAdjacentToSource&&t.sourceCoords&&e.boardCoords){const{row:c,col:x}=t.sourceCoords,{row:f,col:p}=e.boardCoords;if(Math.abs(c-f)+Math.abs(x-p)!==1)return!1}if(t.mustBeInLineWithSource&&t.sourceCoords&&e.boardCoords){const{row:c,col:x}=t.sourceCoords,{row:f,col:p}=e.boardCoords;if(c!==f&&x!==p)return!1}return!0},wi=(e,t,n,r)=>{if(!e||e.type!=="ENTER_MODE"&&e.type!=="CREATE_STACK")return[];const o=[],l=t.board,a=l.length;if(e.type==="CREATE_STACK"){const f={targetOwnerId:e.targetOwnerId,excludeOwnerId:e.excludeOwnerId,onlyOpponents:e.onlyOpponents,onlyFaceDown:e.onlyFaceDown,requiredTargetStatus:e.requiredTargetStatus,mustBeAdjacentToSource:e.mustBeAdjacentToSource,mustBeInLineWithSource:e.mustBeInLineWithSource,sourceCoords:e.sourceCoords};for(let p=0;p<a;p++)for(let T=0;T<a;T++){const S=l[p][T];S.card&&Gl({card:S.card,ownerId:S.card.ownerId||0,location:"board",boardCoords:{row:p,col:T}},f,n,t.players)&&o.push({row:p,col:T})}return o}const{mode:i,payload:u,sourceCoords:c,contextCheck:x}=e;if((i==="SELECT_TARGET"||i==="CENSOR_SWAP"||i==="ZEALOUS_WEAKEN"||i==="CENTURION_BUFF"||i==="SELECT_UNIT_FOR_MOVE")&&u.filter)for(let f=0;f<a;f++)for(let p=0;p<a;p++){const T=l[f][p];let S=T.card&&u.filter(T.card,f,p);if(S&&x==="ADJACENT_TO_LAST_MOVE"&&(r!=null&&r.lastMovedCardCoords)){const{row:I,col:z}=r.lastMovedCardCoords;Math.abs(f-I)+Math.abs(p-z)===1||(S=!1)}S&&o.push({row:f,col:p})}else if(i==="PATROL_MOVE"&&c)for(let f=0;f<a;f++)for(let p=0;p<a;p++){const T=f===c.row||p===c.col,S=f===c.row&&p===c.col,I=!l[f][p].card;T&&(I||S)&&o.push({row:f,col:p})}else if(i==="RIOT_PUSH"&&c)[{r:c.row-1,c:c.col},{r:c.row+1,c:c.col},{r:c.row,c:c.col-1},{r:c.row,c:c.col+1}].forEach(p=>{if(p.r>=0&&p.r<a&&p.c>=0&&p.c<a){const T=l[p.r][p.c].card;if(T&&T.ownerId!==n){const S=t.players.find(d=>d.id===n),I=t.players.find(d=>d.id===T.ownerId);if(!((S==null?void 0:S.teamId)!==void 0&&(I==null?void 0:I.teamId)!==void 0&&S.teamId===I.teamId)){const d=p.r-c.row,m=p.c-c.col,g=p.r+d,C=p.c+m;g>=0&&g<a&&C>=0&&C<a&&(l[g][C].card||o.push({row:p.r,col:p.c}))}}}});else if(i==="RIOT_MOVE"&&u.vacatedCoords)o.push(u.vacatedCoords),c&&o.push(c);else if(i==="SWAP_POSITIONS"&&u.filter)for(let f=0;f<a;f++)for(let p=0;p<a;p++){const T=l[f][p];T.card&&u.filter(T.card,f,p)&&o.push({row:f,col:p})}else if((i==="TRANSFER_STATUS_SELECT"||i==="TRANSFER_ALL_STATUSES")&&u.filter)for(let f=0;f<a;f++)for(let p=0;p<a;p++){const T=l[f][p];T.card&&u.filter(T.card,f,p)&&o.push({row:f,col:p})}else if((i==="SPAWN_TOKEN"||i==="SELECT_CELL"||i==="IMMUNIS_RETRIEVE")&&c)for(let f=0;f<a;f++)for(let p=0;p<a;p++){const T=!l[f][p].card;if(i==="IMMUNIS_RETRIEVE"&&u.filter){T&&u.filter(f,p)&&o.push({row:f,col:p});continue}if(i==="SELECT_CELL"){const S=f===c.row&&p===c.col,I=u.range==="global";let z=!1;if(I)z=!0;else if(u.range==="line")z=f===c.row||p===c.col;else if(u.range===2){const d=Math.abs(f-c.row),m=Math.abs(p-c.col),g=d+m;if(g===1)z=!0;else if(g===2){const C=[];d===2&&m===0?C.push({r:(f+c.row)/2,c:p}):d===0&&m===2?C.push({r:f,c:(p+c.col)/2}):d===1&&m===1&&(C.push({r:f,c:c.col}),C.push({r:c.row,c:p})),z=C.some(N=>!l[N.r][N.c].card)}}else z=Math.abs(f-c.row)+Math.abs(p-c.col)===1;T&&z&&o.push({row:f,col:p}),u.allowSelf&&S&&o.push({row:f,col:p})}else if(i==="SPAWN_TOKEN"){const S=Math.abs(f-c.row)+Math.abs(p-c.col)===1;T&&S&&o.push({row:f,col:p})}}else if(i==="REVEAL_ENEMY"&&u.filter)for(let f=0;f<a;f++)for(let p=0;p<a;p++){const T=l[f][p];T.card&&u.filter(T.card,f,p)&&o.push({row:f,col:p})}else if(i==="SELECT_LINE_START")for(let f=0;f<a;f++)for(let p=0;p<a;p++)o.push({row:f,col:p});else if(i==="SELECT_LINE_END"&&u.firstCoords)for(let f=0;f<a;f++)for(let p=0;p<a;p++){const T=f===u.firstCoords.row,S=p===u.firstCoords.col;(T||S)&&o.push({row:f,col:p})}else if(i==="INTEGRATOR_LINE_SELECT"&&c)for(let f=0;f<a;f++)for(let p=0;p<a;p++){const T=f===c.row,S=p===c.col;(T||S)&&o.push({row:f,col:p})}return o},Sa=(e,t,n,r)=>{var l,a;if(e.type==="OPEN_MODAL")return!0;if(e.type==="CREATE_STACK")return!!(wi(e,t,n,r).length>0||e.tokenType==="Revealed"||(l=e.tokenType)!=null&&l.startsWith("Power"));if(wi(e,t,n,r).length>0)return!0;if(e.mode==="SELECT_TARGET"&&((a=e.payload)!=null&&a.filter)){for(const i of t.players)if(i.hand.some(u=>e.payload.filter(u)))return!0}return!1},cg=({gameState:e,localPlayerId:t,abilityMode:n,setAbilityMode:r,cursorStack:o,setCursorStack:l,setActionQueue:a,commandContext:i,setCommandContext:u,setCommandModalCard:c,setViewingDiscard:x,setNoTargetOverlay:f,setPlayMode:p,interactionLock:T,moveItem:S,drawCard:I,updatePlayerScore:z,markAbilityUsed:d,applyGlobalEffect:m,swapCards:g,transferStatus:C,transferAllCounters:N,resurrectDiscardedCard:P,spawnToken:j,scoreLine:B,nextPhase:ie,modifyBoardCardPower:$,addBoardCardStatus:fe,removeBoardCardStatus:ke,removeBoardCardStatusByOwner:be})=>{const Te=E.useCallback((_,O)=>{if(t===null)return;const K=e.players.find(L=>L.id===O.playerId);if(O.playerId===t||K!=null&&K.isDummy)if(S(O,{target:"announced",playerId:O.playerId}),u({}),_.ability.includes("Choose"))c(_);else{const L=Ea(_.id,-1,_,e,O.playerId);L&&a([L,{type:"GLOBAL_AUTO_APPLY",payload:{cleanupCommand:!0,card:_},sourceCard:_}])}},[e,t,S,a,u,c]),Ie=E.useCallback((_,O)=>{if(!O||t===null)return;const K=O.ownerId||t,V=[],L=Ea(O.id,-1,O,e,K);L&&V.push(L),_.forEach(oe=>{const Q=Ea(O.id,oe,O,e,K);Q&&V.push(Q)}),V.push({type:"GLOBAL_AUTO_APPLY",payload:{cleanupCommand:!0,card:O},sourceCard:O}),a(V),c(null)},[e,t,a,c]),W=E.useCallback((_,O)=>{var oe;if(n||o||!e.isGameStarted||t===null)return;const K=e.players.find(Q=>Q.id===_.ownerId),V=t===_.ownerId||(K==null?void 0:K.isDummy);if(e.activeTurnPlayerId!==_.ownerId||!V||!vi(_,e.currentPhase,e.activeTurnPlayerId))return;const L=Ay(_,e,_.ownerId,O);if(L){if(L.type==="GLOBAL_AUTO_APPLY"&&L.payload&&!L.payload.cleanupCommand){const{tokenType:Q,filter:we}=L.payload,ee=[],ae=e.board.length;for(let me=0;me<ae;me++)for(let Y=0;Y<ae;Y++){const F=e.board[me][Y].card;F&&we(F)&&ee.push({row:me,col:Y})}ee.length>0?m(O,ee,Q,_.ownerId,!!L.isDeployAbility):(f(O),d(O,!!L.isDeployAbility),setTimeout(()=>f(null),750));return}if(L.mode==="PRINCEPS_SHIELD_THEN_AIM"){fe(O,"Shield",_.ownerId),Sa({type:"CREATE_STACK",tokenType:"Aim",sourceCoords:O,requiredTargetStatus:"Threat"},e,_.ownerId,i)?l({type:"Aim",count:1,isDragging:!1,sourceCoords:O,isDeployAbility:!0,requiredTargetStatus:"Threat"}):(d(O,!0),f(O),setTimeout(()=>f(null),750));return}if(L.mode==="WALKING_TURRET_SHIELD"){fe(O,"Shield",_.ownerId),d(O,L.isDeployAbility);return}if(L.mode==="INTEGRATOR_SCORE"){const Q=e.board.length,{row:we,col:ee}=O;let ae=0;for(let me=0;me<Q;me++)for(let Y=0;Y<Q;Y++){const F=e.board[me][Y];(me===we||Y===ee)&&F.card&&(ae+=((oe=F.card.statuses)==null?void 0:oe.filter(se=>se.type==="Exploit"&&se.addedByPlayerId===_.ownerId).length)||0)}ae>0&&z(_.ownerId,ae),d(O,L.isDeployAbility),f(O),setTimeout(()=>f(null),500);return}if(L.type==="CREATE_STACK"&&L.tokenType&&L.count){if(!Sa(L,e,_.ownerId,i)){f(O),d(O,!!L.isDeployAbility),setTimeout(()=>f(null),750);return}l({type:L.tokenType,count:L.count,isDragging:!1,sourceCoords:O,excludeOwnerId:L.excludeOwnerId,onlyOpponents:L.onlyOpponents,onlyFaceDown:L.onlyFaceDown,isDeployAbility:L.isDeployAbility,requiredTargetStatus:L.requiredTargetStatus,mustBeAdjacentToSource:L.mustBeAdjacentToSource,mustBeInLineWithSource:L.mustBeInLineWithSource,placeAllAtOnce:L.placeAllAtOnce})}else if(L.type==="ENTER_MODE"){if(!Sa(L,e,_.ownerId,i)){O.row>=0&&(f(O),d(O,L.isDeployAbility),setTimeout(()=>f(null),750));return}r(L)}else if(L.type==="OPEN_MODAL"){if(L.mode==="RETRIEVE_DEVICE"){const Q=e.players.find(we=>we.id===_.ownerId);Q&&(Q.discard.some(ee=>{var ae;return(ae=ee.types)==null?void 0:ae.includes("Device")})?(x({player:Q,pickConfig:{filterType:"Device",action:"recover"}}),O.row>=0&&d(O,L.isDeployAbility)):O.row>=0&&(f(O),d(O,L.isDeployAbility),setTimeout(()=>f(null),750)))}if(L.mode==="IMMUNIS_RETRIEVE"){const Q=e.players.find(we=>we.id===_.ownerId);Q&&(Q.discard.some(ee=>{var ae,me;return(((ae=ee.types)==null?void 0:ae.includes("Optimates"))||ee.faction==="Optimates"||ee.deck==="Optimates")&&((me=ee.types)==null?void 0:me.includes("Unit"))})?(x({player:Q,pickConfig:{filterType:"Optimates",action:"resurrect"}}),r({type:"ENTER_MODE",mode:"IMMUNIS_RETRIEVE",sourceCard:_,sourceCoords:O,isDeployAbility:L.isDeployAbility,payload:L.payload})):O.row>=0&&(f(O),d(O,L.isDeployAbility),setTimeout(()=>f(null),750)))}}}},[n,o,e,t,i,fe,d,r,l,f,z,m,x]),le=E.useCallback(_=>{if(!n)return;const{mode:O,sourceCard:K,sourceCoords:V,payload:L,isDeployAbility:oe}=n;if(O==="SCORE_LAST_PLAYED_LINE"&&n.sourceCoords){const{row:Q,col:we}=n.sourceCoords,{row:ee,col:ae}=_;if(Q!==ee&&we!==ae)return;B(Q,we,ee,ae,e.activeTurnPlayerId),ie(),r(null);return}if(O==="SELECT_LINE_START"){r({type:"ENTER_MODE",mode:"SELECT_LINE_END",sourceCard:K,sourceCoords:V,isDeployAbility:oe,payload:{...L,firstCoords:_}});return}if(O==="SELECT_LINE_END"&&(L!=null&&L.firstCoords)){const{row:Q,col:we}=L.firstCoords,{row:ee,col:ae}=_;if(Q!==ee&&we!==ae)return;const me=L.actionType,Y=K?K.ownerId:t||e.activeTurnPlayerId;if(me==="CENTURION_BUFF"&&K&&V&&Y){const F=e.board.length;let se=0,xe=F-1,Pe=0,Me=F-1;Q===ee?se=xe=Q:Pe=Me=we;for(let _e=se;_e<=xe;_e++)for(let et=Pe;et<=Me;et++){const it=e.board[_e][et].card;if(it){const Mt=it.id===K.id,lo=it.ownerId===Y,jn=e.players.find(er=>er.id===Y),_n=e.players.find(er=>er.id===it.ownerId),so=(jn==null?void 0:jn.teamId)!==void 0&&(_n==null?void 0:_n.teamId)!==void 0&&jn.teamId===_n.teamId;!Mt&&(lo||so)&&$({row:_e,col:et},1)}}d(V,oe)}else(me==="SCORE_LINE"||!me)&&(B(Q,we,ee,ae,Y),K&&S({card:K,source:"announced",playerId:Y},{target:"discard",playerId:Y}),e.isScoringStep&&ie());setTimeout(()=>r(null),100)}},[n,e,t,B,ie,r,$,d,S]),A=E.useCallback((_,O)=>{var K,V,L;if(!(p&&o)&&!T.current){if(n&&(n.mode==="SCORE_LAST_PLAYED_LINE"||n.mode==="SELECT_LINE_END")){le(O);return}if(n&&n.type==="ENTER_MODE"){if(n.sourceCard&&n.sourceCard.id===_.id&&n.mode!=="SELECT_LINE_START"&&n.mode!=="INTEGRATOR_LINE_SELECT"&&n.mode!=="SELECT_UNIT_FOR_MOVE")return;const{mode:oe,payload:Q,sourceCard:we,sourceCoords:ee,isDeployAbility:ae}=n;if(oe==="SELECT_LINE_START"||oe==="SELECT_LINE_END"){le(O);return}const me=we?we.ownerId:t||e.activeTurnPlayerId;if(oe==="SELECT_TARGET"&&Q.actionType==="DESTROY"){if(Q.filter&&!Q.filter(_,O.row,O.col))return;((K=_.statuses)==null?void 0:K.some(F=>F.type==="Shield"))?ke(O,"Shield"):S({card:_,source:"board",boardCoords:O,bypassOwnershipCheck:!0},{target:"discard",playerId:_.ownerId}),ee&&ee.row>=0&&d(ee,ae),setTimeout(()=>r(null),100);return}if(oe==="SELECT_TARGET"&&Q.tokenType){if(Q.filter&&!Q.filter(_,O.row,O.col))return;S({card:{id:"dummy",deck:"counter",name:"",imageUrl:"",fallbackImage:"",power:0,ability:"",types:[]},source:"counter_panel",statusType:Q.tokenType,count:Q.count||1},{target:"board",boardCoords:O}),ee&&ee.row>=0&&d(ee,ae),setTimeout(()=>r(null),100);return}if(oe==="SELECT_TARGET"&&Q.actionType==="DRAW_EQUAL_POWER"){if(Q.filter&&!Q.filter(_))return;const Y=Math.max(0,_.power+(_.powerModifier||0));for(let F=0;F<Y;F++)I(me);setTimeout(()=>r(null),100);return}if(oe==="SELECT_TARGET"&&Q.actionType==="SCORE_EQUAL_POWER"){if(Q.filter&&!Q.filter(_))return;const Y=Math.max(0,_.power+(_.powerModifier||0));z(me,Y),setTimeout(()=>r(null),100);return}if(oe==="SELECT_TARGET"&&Q.actionType==="REMOVE_ALL_COUNTERS_SELF"){if(Q.filter&&!Q.filter(_))return;_.statuses&&_.statuses.length>0&&r(null);return}if(oe==="RIOT_PUSH"&&ee&&ee.row>=0){const Y=Math.abs(O.row-ee.row)+Math.abs(O.col-ee.col)===1,F=e.players.find(Mt=>Mt.id===_.ownerId),se=e.players.find(Mt=>Mt.id===me),xe=(F==null?void 0:F.teamId)!==void 0&&(se==null?void 0:se.teamId)!==void 0&&F.teamId===se.teamId;if(!Y||_.ownerId===me||xe)return;const Pe=O.row-ee.row,Me=O.col-ee.col,_e=O.row+Pe,et=O.col+Me,it=e.board.length;if(_e<0||_e>=it||et<0||et>=it||e.board[_e][et].card!==null)return;S({card:_,source:"board",boardCoords:O,bypassOwnershipCheck:!0},{target:"board",boardCoords:{row:_e,col:et}}),r({type:"ENTER_MODE",mode:"RIOT_MOVE",sourceCard:n.sourceCard,sourceCoords:n.sourceCoords,isDeployAbility:ae,payload:{vacatedCoords:O}});return}if(oe==="RIOT_MOVE"&&ee&&ee.row>=0){O.row===ee.row&&O.col===ee.col&&(d(ee,ae),setTimeout(()=>r(null),100));return}if(oe==="SWAP_POSITIONS"&&ee&&ee.row>=0){if(we&&we.id===_.id||Q.filter&&!Q.filter(_,O.row,O.col))return;g(ee,O),d(O,ae),setTimeout(()=>r(null),100);return}if(oe==="TRANSFER_STATUS_SELECT"&&ee&&ee.row>=0){if(we&&we.id===_.id||Q.filter&&!Q.filter(_,O.row,O.col))return;_.statuses&&_.statuses.length>0&&(C(O,ee,_.statuses[0].type),d(ee,ae),setTimeout(()=>r(null),100));return}if(oe==="TRANSFER_ALL_STATUSES"&&ee&&ee.row>=0){if(we&&we.id===_.id||Q.filter&&!Q.filter(_,O.row,O.col))return;N(O,ee),d(ee,ae),setTimeout(()=>r(null),100);return}if(oe==="REVEAL_ENEMY"){if(we&&we.id===_.id||Q.filter&&!Q.filter(_,O.row,O.col))return;l({type:"Revealed",count:1,isDragging:!1,sourceCoords:ee,targetOwnerId:_.ownerId,onlyFaceDown:!0,onlyOpponents:!0,isDeployAbility:ae}),setTimeout(()=>r(null),100);return}if(oe==="CENSOR_SWAP"&&ee&&ee.row>=0){if(Q.filter&&!Q.filter(_))return;be(O,"Exploit",me),fe(O,"Stun",me),d(ee,ae),setTimeout(()=>r(null),100);return}if(oe==="ZEALOUS_WEAKEN"&&ee&&ee.row>=0){if(Q.filter&&!Q.filter(_))return;$(O,-1),d(ee,ae),setTimeout(()=>r(null),100);return}if(oe==="CENTURION_BUFF"&&ee&&ee.row>=0){d(ee,ae),setTimeout(()=>r(null),100);return}if(oe==="SELECT_UNIT_FOR_MOVE"&&ee&&ee.row>=0){if(Q.filter&&!Q.filter(_))return;r({type:"ENTER_MODE",mode:"SELECT_CELL",sourceCard:_,sourceCoords:O,isDeployAbility:ae,recordContext:n.recordContext,payload:{allowSelf:!1,abilitySourceCoords:ee,range:Q.range}});return}if(oe==="SELECT_UNIT_FOR_MOVE"&&!ee){if(Q.filter&&!Q.filter(_))return;r({type:"ENTER_MODE",mode:"SELECT_CELL",sourceCard:_,sourceCoords:O,recordContext:n.recordContext,payload:{allowSelf:!1,range:Q.range}});return}if(oe==="INTEGRATOR_LINE_SELECT"&&ee&&ee.row>=0){if(O.row!==ee.row&&O.col!==ee.col)return;const Y=e.board.length;let F=0;if(O.row===ee.row)for(let se=0;se<Y;se++){const xe=e.board[O.row][se];xe.card&&(F+=((V=xe.card.statuses)==null?void 0:V.filter(Pe=>Pe.type==="Exploit"&&Pe.addedByPlayerId===me).length)||0)}else for(let se=0;se<Y;se++){const xe=e.board[se][O.col];xe.card&&(F+=((L=xe.card.statuses)==null?void 0:L.filter(Pe=>Pe.type==="Exploit"&&Pe.addedByPlayerId===me).length)||0)}F>0&&z(me,F),d(ee,ae),setTimeout(()=>r(null),100);return}return}!n&&!o&&W(_,O)}},[n,o,e,t,T,le,S,d,r,l,ke,be,fe,$,g,C,N,z,I,W]),U=E.useCallback(_=>{var we,ee;if(T.current||!n||n.type!=="ENTER_MODE")return;const{mode:O,sourceCoords:K,sourceCard:V,payload:L,isDeployAbility:oe}=n;if(O==="SCORE_LAST_PLAYED_LINE"||O==="SELECT_LINE_END"){le(_);return}if(O==="SELECT_LINE_START"){le(_);return}const Q=V?V.ownerId:t||e.activeTurnPlayerId;if(O==="PATROL_MOVE"&&K&&V&&K.row>=0){const ae=_.row===K.row,me=_.col===K.col;if(_.row===K.row&&_.col===K.col){setTimeout(()=>r(null),100);return}(ae||me)&&(S({card:V,source:"board",boardCoords:K},{target:"board",boardCoords:_}),d(_,oe),setTimeout(()=>r(null),100));return}if(O==="RIOT_MOVE"&&K&&V&&L.vacatedCoords){_.row===L.vacatedCoords.row&&_.col===L.vacatedCoords.col&&(S({card:V,source:"board",boardCoords:K},{target:"board",boardCoords:_}),d(_,oe),setTimeout(()=>r(null),100));return}if(O==="SPAWN_TOKEN"&&K&&L.tokenName&&K.row>=0){Math.abs(_.row-K.row)+Math.abs(_.col-K.col)===1&&(j(_,L.tokenName,Q),d(K,oe),setTimeout(()=>r(null),100));return}if(O==="SELECT_CELL"&&V){const ae=(()=>{var Y;for(let F=0;F<e.board.length;F++)for(let se=0;se<e.board.length;se++)if(((Y=e.board[F][se].card)==null?void 0:Y.id)===V.id)return{row:F,col:se};return null})();let me=!1;if(ae)if(L.range==="line")me=_.row===ae.row||_.col===ae.col;else if(L.range==="global")me=!0;else if(L.range===2){const Y=Math.abs(_.row-ae.row)+Math.abs(_.col-ae.col);if(Y===1)me=!0;else if(Y===2){const F=ae.row,se=ae.col,xe=_.row,Pe=_.col;me=[{r:xe,c:se},{r:F,c:Pe},{r:(F+xe)/2,c:(se+Pe)/2}].some(_e=>!Number.isInteger(_e.r)||!Number.isInteger(_e.c)||Math.abs(_e.r-F)+Math.abs(_e.c-se)!==1?!1:!e.board[_e.r][_e.c].card)}}else me=Math.abs(_.row-ae.row)+Math.abs(_.col-ae.col)===1;if(me){L.allowSelf&&ae&&_.row===ae.row&&_.col===ae.col||ae&&S({card:V,source:"board",boardCoords:ae,bypassOwnershipCheck:!0},{target:"board",boardCoords:_}),n.recordContext&&u({lastMovedCardCoords:_}),L.abilitySourceCoords?d(L.abilitySourceCoords,oe):K&&K.row>=0&&d(_,oe),setTimeout(()=>r(null),100);return}return}if(O==="IMMUNIS_RETRIEVE"&&K&&K.row>=0){if(L.selectedCardIndex!==void 0&&L.filter&&L.filter(_.row,_.col)){P(Q,L.selectedCardIndex,_),d(K,oe),setTimeout(()=>r(null),100);return}if(L.selectedCardIndex===void 0)return}if(O==="INTEGRATOR_LINE_SELECT"&&K&&K.row>=0){if(_.row!==K.row&&_.col!==K.col)return;const ae=e.board.length;let me=0;if(_.row===K.row)for(let Y=0;Y<ae;Y++){const F=e.board[_.row][Y];F.card&&(me+=((we=F.card.statuses)==null?void 0:we.filter(se=>se.type==="Exploit"&&se.addedByPlayerId===Q).length)||0)}else for(let Y=0;Y<ae;Y++){const F=e.board[Y][_.col];F.card&&(me+=((ee=F.card.statuses)==null?void 0:ee.filter(se=>se.type==="Exploit"&&se.addedByPlayerId===Q).length)||0)}me>0&&z(Q,me),d(K,oe),setTimeout(()=>r(null),100);return}},[T,n,e,t,le,S,d,r,j,u,P,z]),ne=E.useCallback((_,O,K)=>{if(!T.current&&n&&n.type==="ENTER_MODE"&&n.mode==="SELECT_TARGET"){const{payload:V,sourceCoords:L,isDeployAbility:oe,sourceCard:Q}=n;if(V.actionType==="DESTROY"){if(V.filter&&!V.filter(O))return;S({card:O,source:"hand",playerId:_.id,cardIndex:K,bypassOwnershipCheck:!0},{target:"discard",playerId:_.id}),L&&L.row>=0&&d(L,oe),setTimeout(()=>r(null),100)}}},[T,n,S,d,r]),te=E.useCallback((_,O)=>{if(!(n||o||T.current||!(_.id===t||_.isDummy))){if(O.deck===Re.Command){Te(O,{card:O,source:"announced",playerId:_.id});return}e.isGameStarted&&e.activeTurnPlayerId===_.id&&vi(O,e.currentPhase,e.activeTurnPlayerId)&&W(O,{row:-1,col:-1})}},[n,o,T,t,e,Te,W]);return{playCommandCard:Te,handleCommandConfirm:Ie,activateAbility:W,handleLineSelection:le,handleBoardCardClick:A,handleEmptyCellClick:U,handleHandCardClick:ne,handleAnnouncedCardDoubleClick:te}};function dg(){const{t:e}=Nn(),{gameState:t,localPlayerId:n,setLocalPlayerId:r,createGame:o,joinGame:l,startReadyCheck:a,cancelReadyCheck:i,playerReady:u,assignTeams:c,setGameMode:x,setGamePrivacy:f,setActiveGridSize:p,setDummyPlayerCount:T,updatePlayerName:S,changePlayerColor:I,updatePlayerScore:z,changePlayerDeck:d,loadCustomDeck:m,drawCard:g,handleDrop:C,draggedItem:N,setDraggedItem:P,connectionStatus:j,gamesList:B,requestGamesList:ie,exitGame:$,moveItem:fe,shufflePlayerDeck:ke,addBoardCardStatus:be,removeBoardCardStatus:Te,removeBoardCardStatusByOwner:Ie,modifyBoardCardPower:W,addAnnouncedCardStatus:le,removeAnnouncedCardStatus:A,modifyAnnouncedCardPower:U,addHandCardStatus:ne,removeHandCardStatus:te,flipBoardCard:_,flipBoardCardFaceDown:O,revealHandCard:K,revealBoardCard:V,requestCardReveal:L,respondToRevealRequest:oe,syncGame:Q,removeRevealedStatus:we,resetGame:ee,toggleActiveTurnPlayer:ae,forceReconnect:me,triggerHighlight:Y,latestHighlight:F,latestFloatingTexts:se,nextPhase:xe,prevPhase:Pe,setPhase:Me,markAbilityUsed:_e,applyGlobalEffect:et,swapCards:it,transferStatus:Mt,transferAllCounters:lo,recoverDiscardedCard:jn,resurrectDiscardedCard:_n,spawnToken:so,scoreLine:er,confirmRoundEnd:Ps}=ug(),[sl,wr]=E.useState(!1),[al,ao]=E.useState(!1),[il,io]=E.useState(!1),[Cr,tr]=E.useState(!1),[ul,nr]=E.useState(!1),[cl,uo]=E.useState(!1),[Er,Sr]=E.useState(null),[As,h]=E.useState(null),[y,v]=E.useState(null),[k,w]=E.useState(!1),[D,R]=E.useState(null),[q,re]=E.useState(null),[H,ce]=E.useState(null),[ve,Ce]=E.useState(!0),[Ee,Xe]=E.useState(()=>{try{const M=localStorage.getItem("image_refresh_data");if(M){const{version:de,timestamp:he}=JSON.parse(M),G=12*60*60*1e3;if(Date.now()-he<G)return de}}catch(M){console.error("Error parsing image refresh data",M)}const b=Date.now();return localStorage.setItem("image_refresh_data",JSON.stringify({version:b,timestamp:b})),b}),[pt,tt]=E.useState(null),[Fe,Ve]=E.useState(null),[Z,Ye]=E.useState(null),Ut=E.useRef(null),Kt=E.useRef(null),[vu,wu]=E.useState(null),[Cu,Eu]=E.useState([]),[Ls,bp]=E.useState(!0),[Ne,rr]=E.useState(null),[Ms,co]=E.useState([]),[Su,Np]=E.useState([]),[Us,jp]=E.useState([]),[Tu,_p]=E.useState(null),[zs,dl]=E.useState({}),Fs=E.useRef({x:0,y:0}),Ip=E.useRef(null),Tr=E.useRef(null),[Dp,ku]=E.useState(void 0),jt=E.useRef(!1),{playCommandCard:fl,handleCommandConfirm:Rp,activateAbility:Op,handleBoardCardClick:bu,handleEmptyCellClick:Nu,handleHandCardClick:Bs,handleAnnouncedCardDoubleClick:$s}=cg({gameState:t,localPlayerId:n,abilityMode:Ne,setAbilityMode:rr,cursorStack:Z,setCursorStack:Ye,setActionQueue:co,commandContext:zs,setCommandContext:dl,setCommandModalCard:Sr,setViewingDiscard:R,setNoTargetOverlay:_p,setPlayMode:Ve,interactionLock:jt,moveItem:fe,drawCard:g,updatePlayerScore:z,markAbilityUsed:_e,applyGlobalEffect:et,swapCards:it,transferStatus:Mt,transferAllCounters:lo,resurrectDiscardedCard:_n,spawnToken:so,scoreLine:er,nextPhase:xe,modifyBoardCardPower:W,addBoardCardStatus:be,removeBoardCardStatus:Te,removeBoardCardStatusByOwner:Ie});E.useMemo(()=>t.players.filter(b=>!b.isDummy&&!b.isDisconnected).length,[t.players]);const pl=n===null&&t.gameId!==null,Pp=E.useMemo(()=>t.players.filter(b=>!b.isDummy).length,[t.players]),ju=n===1,qe=E.useMemo(()=>t.players.find(b=>b.id===n),[t.players,n]),Ap=t.gameId&&(qe||pl),or=E.useMemo(()=>{const b=new Map;return t.players.forEach(M=>b.set(M.id,M.color)),b},[t.players]),fo=!!Ne||!!Z;E.useEffect(()=>{var b;if(t.isScoringStep&&Ls&&!Ne){const M=t.activeTurnPlayerId;if(M!==void 0&&(M===n||(b=t.players.find(de=>de.id===M))!=null&&b.isDummy)){let de=null;t.board.some((he,G)=>he.some((Se,je)=>{var ge;return Se.card&&((ge=Se.card.statuses)!=null&&ge.some(X=>X.type==="LastPlayed"&&X.addedByPlayerId===M))?(de={row:G,col:je},!0):!1})),rr(de?{type:"ENTER_MODE",mode:"SCORE_LAST_PLAYED_LINE",sourceCoords:de,payload:{}}:{type:"ENTER_MODE",mode:"SELECT_LINE_END",payload:{actionType:"SCORE_LINE"}})}}},[t.isScoringStep,Ls,t.activeTurnPlayerId,n,t.board,Ne]),E.useEffect(()=>{const b=()=>{const M=localStorage.getItem("ui_list_mode");Ce(M===null?!0:M==="true")};return b(),window.addEventListener("storage",b),()=>window.removeEventListener("storage",b)},[]),E.useLayoutEffect(()=>{if(!ve){ku(void 0);return}const b=()=>{if(Tr.current){const he=window.innerWidth,G=Tr.current.getBoundingClientRect();if(G.width===0)return;const ge=(he-G.width)/2-10;ku(Math.max(0,ge))}},M=new ResizeObserver(b);Tr.current&&M.observe(Tr.current),window.addEventListener("resize",b),b();const de=setTimeout(b,100);return()=>{M.disconnect(),window.removeEventListener("resize",b),clearTimeout(de)}},[ve,n,t.activeGridSize]),E.useLayoutEffect(()=>{Z&&Ut.current&&Kt.current&&(Ut.current.style.left=`${Kt.current.x-2}px`,Ut.current.style.top=`${Kt.current.y-2}px`)},[Z]),E.useEffect(()=>{const b=M=>{Fs.current={x:M.clientX,y:M.clientY},Ut.current&&(Z||Ne)&&(Ut.current.style.left=`${M.clientX-2}px`,Ut.current.style.top=`${M.clientY-2}px`)};return window.addEventListener("mousemove",b),(Z||Ne)&&Ut.current&&(Ut.current.style.left=`${Fs.current.x-2}px`,Ut.current.style.top=`${Fs.current.y-2}px`),()=>{window.removeEventListener("mousemove",b)}},[Z,Ne]),E.useEffect(()=>{var b,M,de;if(Ms.length>0&&!Ne&&!Z){const he=Ms[0];co(Se=>Se.slice(1));const G=(Se,je)=>{let ge=0;return Se==="Aim"?t.board.forEach(X=>X.forEach(pe=>{var ye,Le;(Le=(ye=pe.card)==null?void 0:ye.statuses)!=null&&Le.some(Ue=>Ue.type==="Aim"&&Ue.addedByPlayerId===je)&&ge++})):Se==="Exploit"&&t.board.forEach(X=>X.forEach(pe=>{var ye,Le;(Le=(ye=pe.card)==null?void 0:ye.statuses)!=null&&Le.some(Ue=>Ue.type==="Exploit"&&Ue.addedByPlayerId===je)&&ge++})),ge};if(he.type==="GLOBAL_AUTO_APPLY"){if((b=he.payload)!=null&&b.cleanupCommand&&he.sourceCard){const Se=he.sourceCard;fe({card:Se,source:"announced",playerId:Se.ownerId},{target:"discard",playerId:Se.ownerId})}else if((M=he.payload)!=null&&M.dynamicResource){const{type:Se,factor:je,ownerId:ge}=he.payload.dynamicResource,X=G(je,ge);if(Se==="draw"&&X>0)for(let pe=0;pe<X;pe++)g(ge)}else if((de=he.payload)!=null&&de.resourceChange){const{draw:Se,score:je}=he.payload.resourceChange,ge=t.activeTurnPlayerId;if(ge!==void 0){if(Se){const X=typeof Se=="number"?Se:1;for(let pe=0;pe<X;pe++)g(ge)}je&&z(ge,je)}}}else if(he.type==="CREATE_STACK"){let Se=he.count||1;he.dynamicCount&&(Se=G(he.dynamicCount.factor,he.dynamicCount.ownerId)),Se>0&&he.tokenType&&Ye({type:he.tokenType,count:Se,isDragging:!1,sourceCoords:he.sourceCoords,excludeOwnerId:he.excludeOwnerId,onlyOpponents:he.onlyOpponents,onlyFaceDown:he.onlyFaceDown,isDeployAbility:he.isDeployAbility,requiredTargetStatus:he.requiredTargetStatus,mustBeAdjacentToSource:he.mustBeAdjacentToSource,mustBeInLineWithSource:he.mustBeInLineWithSource,placeAllAtOnce:he.placeAllAtOnce})}else rr(he)}},[Ms,Ne,Z,n,g,z,t.activeTurnPlayerId,t.board,fe]),E.useEffect(()=>{const b=M=>{if(!Z)return;const de=document.elementFromPoint(M.clientX,M.clientY),he=de==null?void 0:de.closest("[data-hand-card]");if(he){const Se=he.getAttribute("data-hand-card");if(Se){const[je,ge]=Se.split(","),X=parseInt(je,10),pe=parseInt(ge,10),ye=t.players.find(Ue=>Ue.id===X),Le=ye==null?void 0:ye.hand[pe];if(ye&&Le){if(!Gl({card:Le,ownerId:X,location:"hand"},Z,n,t.players))return;if(Z.type==="Revealed"&&X!==n&&!ye.isDummy){n!==null&&(L({source:"hand",ownerId:X,cardIndex:pe},n),Z.sourceCoords&&_e(Z.sourceCoords,Z.isDeployAbility),Z.count>1?Ye(ut=>ut?{...ut,count:ut.count-1}:null):Ye(null),jt.current=!0,setTimeout(()=>{jt.current=!1},300));return}C({card:{id:"stack",deck:"counter",name:"",imageUrl:"",fallbackImage:"",power:0,ability:"",types:[]},source:"counter_panel",statusType:Z.type,count:1},{target:"hand",playerId:X,cardIndex:pe,boardCoords:void 0}),Z.sourceCoords&&_e(Z.sourceCoords,Z.isDeployAbility),Z.count>1?Ye(ut=>ut?{...ut,count:ut.count-1}:null):Ye(null),jt.current=!0,setTimeout(()=>{jt.current=!1},300);return}}}const G=de==null?void 0:de.closest("[data-board-coords]");if(G){const Se=G.getAttribute("data-board-coords");if(Se){const[je,ge]=Se.split(","),X=parseInt(je,10),pe=parseInt(ge,10),ye=t.board[X][pe].card;if(ye&&ye.ownerId!==void 0){if(!Gl({card:ye,ownerId:ye.ownerId,location:"board",boardCoords:{row:X,col:pe}},Z,n,t.players))return;const Ue=t.players.find(ut=>ut.id===ye.ownerId);if(Z.type==="Revealed"&&ye.ownerId!==n&&!(Ue!=null&&Ue.isDummy)){n!==null&&(L({source:"board",ownerId:ye.ownerId,boardCoords:{row:X,col:pe}},n),Z.sourceCoords&&_e(Z.sourceCoords,Z.isDeployAbility),Z.count>1?Ye(ut=>ut?{...ut,count:ut.count-1}:null):Ye(null),jt.current=!0,setTimeout(()=>{jt.current=!1},300));return}}if(ye){const Le=Z.placeAllAtOnce?Z.count:1;C({card:{id:"stack",deck:"counter",name:"",imageUrl:"",fallbackImage:"",power:0,ability:"",types:[]},source:"counter_panel",statusType:Z.type,count:Le},{target:"board",boardCoords:{row:X,col:pe}}),Z.sourceCoords&&_e(Z.sourceCoords,Z.isDeployAbility),Z.count>Le?Ye(Ue=>Ue?{...Ue,count:Ue.count-Le}:null):Ye(null),jt.current=!0,setTimeout(()=>{jt.current=!1},300)}}}else{const Se=de==null?void 0:de.closest(".counter-modal-content");Z.isDragging?Ye(Se?je=>je?{...je,isDragging:!1}:null:null):Se||Ye(null)}};return window.addEventListener("mouseup",b),()=>{window.removeEventListener("mouseup",b)}},[Z,C,t,n,K,L,_e]),E.useEffect(()=>{const b=M=>{jt.current&&(M.stopPropagation(),M.preventDefault())};return window.addEventListener("click",b,!0),()=>window.removeEventListener("click",b,!0)},[]),E.useEffect(()=>{const b=de=>{["INPUT","TEXTAREA","SELECT"].includes(de.target.tagName)||(de.code==="Space"&&(de.preventDefault(),t.isGameStarted&&xe()),de.key==="Escape"&&(Ne&&Ne.sourceCoords&&Ne.sourceCoords.row>=0&&_e(Ne.sourceCoords,Ne.isDeployAbility),Z&&Z.sourceCoords&&_e(Z.sourceCoords,Z.isDeployAbility),Ye(null),Ve(null),rr(null),R(null),Sr(null),co([]),dl({})))},M=de=>{(Z||Fe||Ne)&&(de.preventDefault(),Ne&&Ne.sourceCoords&&Ne.sourceCoords.row>=0&&_e(Ne.sourceCoords,Ne.isDeployAbility),Z&&Z.sourceCoords&&_e(Z.sourceCoords,Z.isDeployAbility),Ye(null),Ve(null),rr(null),R(null),co([]),dl({}))};return window.addEventListener("keydown",b),window.addEventListener("contextmenu",M),()=>{window.removeEventListener("keydown",b),window.removeEventListener("contextmenu",M)}},[Z,Fe,Ne,_e,t.isGameStarted,xe]),E.useEffect(()=>{var G,Se;let b=Ne;Z&&!Ne&&(b={type:"CREATE_STACK",tokenType:Z.type,count:Z.count,onlyFaceDown:Z.onlyFaceDown,onlyOpponents:Z.onlyOpponents,targetOwnerId:Z.targetOwnerId,excludeOwnerId:Z.excludeOwnerId,requiredTargetStatus:Z.requiredTargetStatus,mustBeAdjacentToSource:Z.mustBeAdjacentToSource,mustBeInLineWithSource:Z.mustBeInLineWithSource,sourceCoords:Z.sourceCoords});const M=((G=b==null?void 0:b.sourceCard)==null?void 0:G.ownerId)??(b!=null&&b.sourceCoords?(Se=t.board[b.sourceCoords.row][b.sourceCoords.col].card)==null?void 0:Se.ownerId:null)??(n||t.activeTurnPlayerId),de=wi(b,t,M,zs),he=[];if(Ne&&Ne.type==="ENTER_MODE"&&Ne.mode==="SELECT_TARGET")Ne.payload.filter&&t.players.forEach(je=>{je.hand.forEach((ge,X)=>{Ne.payload.filter(ge)&&he.push({playerId:je.id,cardIndex:X})})});else if(Z){const je=ll[Z.type];je&&je.allowedTargets&&je.allowedTargets.includes("hand")&&t.players.forEach(ge=>{ge.hand.forEach((X,pe)=>{Gl({card:X,ownerId:ge.id,location:"hand"},Z,n,t.players)&&he.push({playerId:ge.id,cardIndex:pe})})})}if(Ne&&(Ne.mode==="SCORE_LAST_PLAYED_LINE"||Ne.mode==="SELECT_LINE_END")){const je=t.board.length;if(Ne.sourceCoords){for(let ge=0;ge<je;ge++)de.push({row:ge,col:Ne.sourceCoords.col});for(let ge=0;ge<je;ge++)de.push({row:Ne.sourceCoords.row,col:ge})}else for(let ge=0;ge<je;ge++)for(let X=0;X<je;X++)de.push({row:ge,col:X})}Np(de),jp(he)},[Ne,Z,t.board,t.players,n,zs]),E.useEffect(()=>{if(F){wu(F);const b=setTimeout(()=>wu(null),1e3);return()=>clearTimeout(b)}},[F]),E.useEffect(()=>{if(se&&se.length>0){const b=se.map(de=>({...de,id:`float_${Date.now()}_${Math.random()}`}));Eu(de=>[...de,...b]);const M=setTimeout(()=>{Eu(de=>de.filter(he=>!b.find(G=>G.id===he.id)))},1500);return()=>clearTimeout(M)}},[se]);const fn=()=>{tr(!1),nr(!1),R(null),re(null),ce(null),uo(!1),Sr(null)},Lp=()=>{ju&&(t.gameMode===Cn.FreeForAll?a():w(!0))},Mp=b=>{c(b),w(!1),a()},_u=b=>{l(b),wr(!1)},Up=()=>{o(),r(1)},zp=()=>{ie(),wr(!0)},Iu=b=>{localStorage.setItem("custom_ws_url",b.trim());const M=localStorage.getItem("ui_list_mode");Ce(M===null?!0:M==="true"),io(!1),me()},Fp=()=>{const b=Date.now();Xe(b),localStorage.setItem("image_refresh_data",JSON.stringify({version:b,timestamp:b})),Q()},In=b=>{n!==null&&Y({...b,playerId:n})},po=()=>tt(null),Dn=(b,M,de)=>{b.preventDefault(),!(Ne||Z||Fe)&&(b.stopPropagation(),n!==null&&tt({x:b.clientX,y:b.clientY,type:M,data:de}))},Du=(b,M)=>{var je;if(Ne||Z||jt.current)return;const de=b.ownerId===n;if(de&&b.isFaceDown){_(M);return}const he=b.ownerId?t.players.find(ge=>ge.id===b.ownerId):void 0,G=(je=b.statuses)==null?void 0:je.some(ge=>ge.type==="Revealed"&&ge.addedByPlayerId===n);!b.isFaceDown||b.revealedTo==="all"||Array.isArray(b.revealedTo)&&b.revealedTo.includes(n)||G||de?ce({card:b,player:he}):n!==null&&L({source:"board",ownerId:b.ownerId,boardCoords:M},n)},Ru=b=>{Ne||Z||jt.current||In({type:"cell",row:b.row,col:b.col})},Gs=(b,M,de)=>{var he;if(!(Ne||Z)&&!jt.current){if(b.id===n||b.isDummy){if(M.deck===Re.Command){fn(),fl(M,{card:M,source:"hand",playerId:b.id,cardIndex:de});return}fn();const G={card:M,source:"hand",playerId:b.id,cardIndex:de};Ve({card:M,sourceItem:G,faceDown:!1})}else if(n!==null){const G=M.revealedTo==="all",Se=Array.isArray(M.revealedTo)&&M.revealedTo.includes(n),je=(he=M.statuses)==null?void 0:he.some(X=>X.type==="Revealed"&&X.addedByPlayerId===n);G||Se||je||!!b.isDummy||!!b.isDisconnected?ce({card:M,player:b}):L({source:"hand",ownerId:b.id,cardIndex:de},n)}}},Bp=b=>{R(null),re(b)},$p=b=>{re(null),R({player:b})},Et=E.useMemo(()=>D?t.players.find(b=>b.id===D.player.id)||D.player:null,[D,t.players]),Jt=E.useMemo(()=>q?t.players.find(b=>b.id===q.id)||q:null,[q,t.players]),Gp=E.useMemo(()=>{var Se,je,ge;if(!pt||n===null)return null;const{type:b,data:M,x:de,y:he}=pt;let G=[];if(b==="emptyBoardCell")G.push({label:"Highlight Cell",onClick:()=>In({type:"cell",row:M.boardCoords.row,col:M.boardCoords.col})}),G.push({label:"Highlight Column",onClick:()=>In({type:"col",col:M.boardCoords.col})}),G.push({label:"Highlight Row",onClick:()=>In({type:"row",row:M.boardCoords.row})});else if(b==="boardItem"||b==="announcedCard"){const X=b==="boardItem";let pe=X?t.board[M.boardCoords.row][M.boardCoords.col].card:M.card,ye=X?null:M.player;if(!X&&ye){const Ge=t.players.find(Yt=>Yt.id===ye.id);Ge&&(ye=Ge,pe=Ge.announcedCard||pe)}if(!pe)return tt(null),null;const Le=pe.ownerId?t.players.find(Ge=>Ge.id===pe.ownerId):void 0,Ue=pe.ownerId===n,ut=!!(Le!=null&&Le.isDummy),pn=Ue||ut,Ws=(Se=pe.statuses)==null?void 0:Se.some(Ge=>Ge.type==="Revealed"&&Ge.addedByPlayerId===n),kr=!pe.isFaceDown||pe.revealedTo==="all"||Array.isArray(pe.revealedTo)&&pe.revealedTo.includes(n)||Ws;(kr||Ue&&pe.isFaceDown)&&G.push({label:e("view"),isBold:!0,onClick:()=>ce({card:pe,player:Le})}),!X&&pn&&pe.deck===Re.Command&&G.push({label:e("play"),isBold:!0,onClick:()=>{fl(pe,{card:pe,source:"announced",playerId:ye.id})}}),X&&pn&&(pe.isFaceDown?G.push({label:e("flipUp"),isBold:!0,onClick:()=>_(M.boardCoords)}):G.push({label:e("flipDown"),onClick:()=>O(M.boardCoords)}));const br=X?{card:pe,source:"board",boardCoords:M.boardCoords}:{card:pe,source:"announced",playerId:ye.id},mn=pe.ownerId,hn=(pe==null?void 0:pe.deck)===Re.Tokens||(pe==null?void 0:pe.deck)==="counter";if(X&&(pn&&pe.isFaceDown&&G.push({label:e("revealToAll"),onClick:()=>V(M.boardCoords,"all")}),!Ue&&!kr&&G.push({label:e("requestReveal"),onClick:()=>L({source:"board",ownerId:pe.ownerId,boardCoords:M.boardCoords},n)})),G.length>0&&G.push({isDivider:!0}),pn&&kr&&(G.push({label:e("toHand"),disabled:hn,onClick:()=>fe(br,{target:"hand",playerId:mn})}),mn)){const Ge=hn?"Remove":e("toDiscard");G.push({label:Ge,onClick:()=>fe(br,{target:"discard",playerId:mn})}),G.push({label:"To Deck Top",disabled:hn,onClick:()=>fe(br,{target:"deck",playerId:mn,deckPosition:"top"})}),G.push({label:"To Deck Bottom",disabled:hn,onClick:()=>fe(br,{target:"deck",playerId:mn,deckPosition:"bottom"})})}if(X&&(G.push({isDivider:!0}),G.push({label:"Highlight Cell",onClick:()=>In({type:"cell",row:M.boardCoords.row,col:M.boardCoords.col})}),G.push({label:"Highlight Column",onClick:()=>In({type:"col",col:M.boardCoords.col})}),G.push({label:"Highlight Row",onClick:()=>In({type:"row",row:M.boardCoords.row})})),kr){const Ge=["Aim","Exploit","Stun","Shield","Support","Threat","Revealed"],Yt=[];Ge.forEach(qt=>{var Nr;(((Nr=pe.statuses)==null?void 0:Nr.filter(Kp=>Kp.type===qt).length)||0)>0&&Yt.push({type:"statusControl",label:qt,onAdd:()=>X?be(M.boardCoords,qt,n):le(ye.id,qt,n),onRemove:()=>X?Te(M.boardCoords,qt):A(ye.id,qt),removeDisabled:!1})}),Yt.length>0&&(G.length>0&&!("isDivider"in G[G.length-1])&&G.push({isDivider:!0}),G.push(...Yt)),G.length>0&&!("isDivider"in G[G.length-1])&&G.push({isDivider:!0}),G.push({type:"statusControl",label:"Power",onAdd:()=>X?W(M.boardCoords,1):U(ye.id,1),onRemove:()=>X?W(M.boardCoords,-1):U(ye.id,-1),removeDisabled:!1})}}else if(b==="token_panel_item"){const{card:X}=M,pe={card:X,source:"token_panel"};G.push({label:e("view"),isBold:!0,onClick:()=>ce({card:X})}),G.push({isDivider:!0}),G.push({label:e("play"),isBold:!0,onClick:()=>{fn(),Ve({card:X,sourceItem:pe,faceDown:!1})}}),G.push({label:e("playFaceDown"),onClick:()=>{fn(),Ve({card:X,sourceItem:pe,faceDown:!0})}})}else if(["handCard","discardCard","deckCard"].includes(b)){let{card:X,boardCoords:pe,player:ye,cardIndex:Le}=M;const Ue=t.players.find(ln=>ln.id===ye.id);Ue&&(ye=Ue,b==="handCard"?X=Ue.hand[Le]||X:b==="discardCard"?X=Ue.discard[Le]||X:b==="deckCard"&&(X=Ue.deck[Le]||X));const ut=ye.id===n||!!ye.isDummy,pn=t.players.find(ln=>ln.id===n),Ws=(pn==null?void 0:pn.teamId)!==void 0&&ye.teamId===pn.teamId,kr=X.revealedTo==="all"||Array.isArray(X.revealedTo)&&X.revealedTo.includes(n),br=(je=X.statuses)==null?void 0:je.some(ln=>ln.type==="Revealed"&&ln.addedByPlayerId===n),mn=b!=="handCard"?!0:ye.id===n||Ws||!!ye.isDummy||!!ye.isDisconnected||kr||br;let hn;b==="handCard"?hn="hand":b==="discardCard"?hn="discard":hn="deck";const Ge={card:X,source:hn,playerId:ye==null?void 0:ye.id,cardIndex:Le,boardCoords:pe},Yt=X.ownerId,qt=(X==null?void 0:X.deck)===Re.Tokens||(X==null?void 0:X.deck)==="counter";if(mn){const ln=X.ownerId?t.players.find(Nr=>Nr.id===X.ownerId):void 0;G.push({label:e("view"),isBold:!0,onClick:()=>ce({card:X,player:ln})})}ut?(X.deck===Re.Command?G.push({label:e("play"),isBold:!0,onClick:()=>{fn(),fl(X,Ge)}}):b==="handCard"?(G.push({label:e("play"),isBold:!0,onClick:()=>{fn(),Ve({card:X,sourceItem:Ge,faceDown:!1})}}),G.push({label:e("playFaceDown"),onClick:()=>{fn(),Ve({card:X,sourceItem:Ge,faceDown:!0})}})):mn&&["discardCard","deckCard"].includes(b)&&(G.push({label:e("play"),isBold:!0,onClick:()=>{fn(),Ve({card:X,sourceItem:Ge,faceDown:!1})}}),G.push({label:e("playFaceDown"),onClick:()=>{fn(),Ve({card:X,sourceItem:Ge,faceDown:!0})}})),G.length>0&&G.push({isDivider:!0}),b==="handCard"&&G.push({label:e("revealToAll"),onClick:()=>K(ye.id,Le,"all")}),G.length>0&&!("isDivider"in G[G.length-1])&&G.push({isDivider:!0}),b==="discardCard"?G.push({label:e("toHand"),disabled:qt,onClick:()=>fe(Ge,{target:"hand",playerId:Yt})}):b==="handCard"&&G.push({label:e("toDiscard"),onClick:()=>fe(Ge,{target:"discard",playerId:Yt})}),["handCard","discardCard"].includes(b)&&Yt&&(G.push({label:"To Deck Top",disabled:qt,onClick:()=>fe(Ge,{target:"deck",playerId:Yt,deckPosition:"top"})}),G.push({label:"To Deck Bottom",disabled:qt,onClick:()=>fe(Ge,{target:"deck",playerId:Yt,deckPosition:"bottom"})})),b==="deckCard"&&(G.push({label:e("toHand"),disabled:qt,onClick:()=>fe(Ge,{target:"hand",playerId:ye.id})}),G.push({label:e("toDiscard"),onClick:()=>fe(Ge,{target:"discard",playerId:ye.id})})),b==="handCard"&&(((ge=X.statuses)==null?void 0:ge.filter(Nr=>Nr.type==="Revealed").length)||0)>0&&(G.length>0&&!("isDivider"in G[G.length-1])&&G.push({isDivider:!0}),G.push({type:"statusControl",label:"Revealed",onAdd:()=>ne(ye.id,Le,"Revealed",n),onRemove:()=>te(ye.id,Le,"Revealed"),removeDisabled:!1}))):b==="handCard"&&!mn&&G.push({label:e("requestReveal"),onClick:()=>L({source:"hand",ownerId:ye.id,cardIndex:Le},n)})}else if(b==="deckPile"){const{player:X}=M;(X.id===n||!!X.isDummy)&&(G.push({label:"Draw Card",onClick:()=>g(X.id)}),G.push({label:"Draw Starting Hand (6)",onClick:()=>{for(let ye=0;ye<6;ye++)g(X.id)}}),G.push({label:"Shuffle",onClick:()=>ke(X.id)})),G.push({label:e("view"),onClick:()=>Bp(X)})}else if(b==="discardPile"){const{player:X}=M;G.push({label:e("view"),onClick:()=>$p(X)})}return G=G.filter((X,pe)=>"isDivider"in X?!(pe===0||pe===G.length-1||"isDivider"in G[pe-1]):!0),s.jsx(ng,{x:de,y:he,items:G,onClose:po})},[t,n,fe,In,be,Te,W,le,A,U,ne,te,g,ke,_,O,K,V,L,we,Op,e,Et,Jt,fl]);E.useEffect(()=>{window.addEventListener("click",po);const b=M=>{M.target.closest("[data-interactive]")||po()};return window.addEventListener("contextmenu",b),()=>{window.removeEventListener("click",po),window.removeEventListener("contextmenu",b)}},[]),E.useEffect(()=>{N&&po()},[N]);const Wp=b=>{if(Cr)tr(!1),h(null);else{nr(!1),v(null);const M=b.currentTarget.getBoundingClientRect();h({top:M.top,left:M.left}),tr(!0)}},Vp=b=>{if(ul)nr(!1),v(null);else{tr(!1),h(null);const M=b.currentTarget.getBoundingClientRect();v({top:M.top,left:M.left}),nr(!0)}},Hp=(b,M)=>{Kt.current={x:M.clientX,y:M.clientY},Ye(de=>de&&de.type===b?{type:b,count:de.count+1,isDragging:!0,sourceCoords:de.sourceCoords}:{type:b,count:1,isDragging:!0})};return Ap?s.jsxs("div",{className:`relative w-screen h-screen overflow-hidden ${Z?"cursor-none":""}`,children:[s.jsx(Wy,{gameId:t.gameId,isGameStarted:t.isGameStarted,onStartGame:Lp,onResetGame:ee,activeGridSize:t.activeGridSize,onGridSizeChange:p,dummyPlayerCount:t.dummyPlayerCount,onDummyPlayerCountChange:T,realPlayerCount:Pp,connectionStatus:j,onExitGame:$,onOpenTokensModal:Wp,onOpenCountersModal:Vp,gameMode:t.gameMode,onGameModeChange:x,isPrivate:t.isPrivate,onPrivacyChange:f,isHost:ju,onSyncGame:Fp,currentPhase:t.currentPhase,onNextPhase:xe,onPrevPhase:Pe,onSetPhase:Me,isAutoAbilitiesEnabled:Ls,onToggleAutoAbilities:bp,isScoringStep:t.isScoringStep,currentRound:t.currentRound,turnNumber:t.turnNumber}),t.isRoundEndModalOpen&&s.jsx(lg,{gameState:t,onConfirm:Ps,localPlayerId:n,onExit:$}),Er&&s.jsx(rg,{isOpen:!!Er,card:Er,playerColorMap:new Map(t.players.map(b=>[b.id,b.color])),onConfirm:b=>Rp(b,Er),onCancel:()=>{Sr(null),co([]),dl({})}}),Gp,ve?s.jsxs("div",{className:"relative h-full w-full pt-14 overflow-hidden bg-gray-900",children:[qe&&s.jsx("div",{ref:Ip,className:"absolute left-0 top-14 bottom-[2px] z-30 bg-panel-bg shadow-xl flex flex-col border-r border-gray-700 w-fit min-w-0 pl-[2px] py-[2px] pr-0 transition-all duration-100 overflow-hidden",style:{width:Dp},children:s.jsx(Ca,{player:qe,isLocalPlayer:!0,localPlayerId:n,isSpectator:pl,isGameStarted:t.isGameStarted,position:qe.id,onNameChange:b=>S(qe.id,b),onColorChange:b=>I(qe.id,b),onScoreChange:b=>z(qe.id,b),onDeckChange:b=>d(qe.id,b),onLoadCustomDeck:b=>m(qe.id,b),onDrawCard:()=>g(qe.id),handleDrop:C,draggedItem:N,setDraggedItem:P,openContextMenu:Dn,onHandCardDoubleClick:Gs,playerColorMap:or,allPlayers:t.players,localPlayerTeamId:qe==null?void 0:qe.teamId,activeTurnPlayerId:t.activeTurnPlayerId,onToggleActiveTurn:ae,imageRefreshVersion:Ee,layoutMode:"list-local",onCardClick:Bs,validHandTargets:Us,onAnnouncedCardDoubleClick:$s,currentPhase:t.currentPhase,disableActiveHighlights:fo,roundWinners:t.roundWinners,startingPlayerId:t.startingPlayerId},qe.id)}),s.jsx("div",{className:"absolute top-14 bottom-0 z-10 flex items-center justify-center pointer-events-none w-full left-0",children:s.jsx("div",{ref:Tr,className:"pointer-events-auto h-full aspect-square flex items-center justify-center py-[2px]",children:s.jsx(Gc,{board:t.board,isGameStarted:t.isGameStarted,activeGridSize:t.activeGridSize,handleDrop:C,draggedItem:N,setDraggedItem:P,openContextMenu:Dn,playMode:Fe,setPlayMode:Ve,highlight:vu,playerColorMap:or,localPlayerId:n,onCardDoubleClick:Du,onEmptyCellDoubleClick:Ru,imageRefreshVersion:Ee,cursorStack:Z,setCursorStack:Ye,currentPhase:t.currentPhase,activeTurnPlayerId:t.activeTurnPlayerId,onCardClick:bu,onEmptyCellClick:Nu,validTargets:Su,noTargetOverlay:Tu,disableActiveHighlights:fo,activeFloatingTexts:Cu})})}),s.jsx("div",{className:"absolute right-0 top-14 bottom-0 z-30 w-[34.2rem] bg-panel-bg shadow-xl flex flex-col pt-[3px] pb-[3px] border-l border-gray-700 gap-[3px]",children:t.players.filter(b=>b.id!==n).map(b=>s.jsx("div",{className:"w-full flex-1 min-h-0",children:s.jsx(Ca,{player:b,isLocalPlayer:!1,localPlayerId:n,isSpectator:pl,isGameStarted:t.isGameStarted,position:b.id,onNameChange:M=>S(b.id,M),onColorChange:M=>I(b.id,M),onScoreChange:M=>z(b.id,M),onDeckChange:M=>d(b.id,M),onLoadCustomDeck:M=>m(b.id,M),onDrawCard:()=>g(b.id),handleDrop:C,draggedItem:N,setDraggedItem:P,openContextMenu:Dn,onHandCardDoubleClick:Gs,playerColorMap:or,allPlayers:t.players,localPlayerTeamId:qe==null?void 0:qe.teamId,activeTurnPlayerId:t.activeTurnPlayerId,onToggleActiveTurn:ae,imageRefreshVersion:Ee,layoutMode:"list-remote",onCardClick:Bs,validHandTargets:Us,onAnnouncedCardDoubleClick:$s,currentPhase:t.currentPhase,disableActiveHighlights:fo,roundWinners:t.roundWinners,startingPlayerId:t.startingPlayerId})},b.id))})]}):s.jsxs(s.Fragment,{children:[t.players.map(b=>s.jsx(Ca,{player:b,isLocalPlayer:b.id===n,localPlayerId:n,isSpectator:pl,isGameStarted:t.isGameStarted,position:b.id,onNameChange:M=>S(b.id,M),onColorChange:M=>I(b.id,M),onScoreChange:M=>z(b.id,M),onDeckChange:M=>d(b.id,M),onLoadCustomDeck:M=>m(b.id,M),onDrawCard:()=>g(b.id),handleDrop:C,draggedItem:N,setDraggedItem:P,openContextMenu:Dn,onHandCardDoubleClick:Gs,playerColorMap:or,allPlayers:t.players,localPlayerTeamId:qe==null?void 0:qe.teamId,activeTurnPlayerId:t.activeTurnPlayerId,onToggleActiveTurn:ae,imageRefreshVersion:Ee,layoutMode:"standard",onCardClick:Bs,validHandTargets:Us,onAnnouncedCardDoubleClick:$s,currentPhase:t.currentPhase,disableActiveHighlights:fo,roundWinners:t.roundWinners,startingPlayerId:t.startingPlayerId},b.id)),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-0",children:s.jsx("div",{ref:Tr,className:"pointer-events-auto h-[80%] aspect-square flex items-center justify-center",children:s.jsx(Gc,{board:t.board,isGameStarted:t.isGameStarted,activeGridSize:t.activeGridSize,handleDrop:C,draggedItem:N,setDraggedItem:P,openContextMenu:Dn,playMode:Fe,setPlayMode:Ve,highlight:vu,playerColorMap:or,localPlayerId:n,onCardDoubleClick:Du,onEmptyCellDoubleClick:Ru,imageRefreshVersion:Ee,cursorStack:Z,setCursorStack:Ye,currentPhase:t.currentPhase,activeTurnPlayerId:t.activeTurnPlayerId,onCardClick:bu,onEmptyCellClick:Nu,validTargets:Su,noTargetOverlay:Tu,disableActiveHighlights:fo,activeFloatingTexts:Cu})})})]}),s.jsx(hp,{isOpen:sl,onClose:()=>wr(!1),onJoin:_u,games:B}),s.jsx(Wc,{isOpen:!!D,onClose:()=>R(null),title:D!=null&&D.pickConfig?D.pickConfig.action==="recover"?"Recover Device":"Resurrect Unit":"Discard Pile",player:Et,cards:(Et==null?void 0:Et.discard)||[],setDraggedItem:P,canInteract:!!(D!=null&&D.pickConfig)||!!Et&&(Et.id===n||!!Et.isDummy),onCardContextMenu:(b,M)=>{!(D!=null&&D.pickConfig)&&Et&&Dn(b,"discardCard",{card:Et.discard[M],player:Et,cardIndex:M})},onCardClick:b=>{var M,de,he;if(D!=null&&D.pickConfig&&Et){const G=D.pickConfig,Se=Et.discard[b];let je=!1;G.filterType==="Device"&&(je=((M=Se.types)==null?void 0:M.includes("Device"))||!1),G.filterType==="Optimates"&&(je=(((de=Se.types)==null?void 0:de.includes("Optimates"))||Se.faction==="Optimates")&&((he=Se.types)==null?void 0:he.includes("Unit"))||!1),je&&(G.action==="recover"?jn(Et.id,b):G.action==="resurrect"&&Ne&&Ne.sourceCoords&&rr(ge=>ge?{...ge,payload:{...ge.payload,selectedCardIndex:b}}:null),R(null))}},playerColorMap:or,localPlayerId:n,imageRefreshVersion:Ee}),s.jsx(Wc,{isOpen:!!q,onClose:()=>re(null),title:"Deck",player:Jt,cards:(Jt==null?void 0:Jt.deck)||[],setDraggedItem:P,canInteract:!!Jt&&(Jt.id===n||!!Jt.isDummy),isDeckView:!0,onCardContextMenu:(b,M)=>Jt&&Dn(b,"deckCard",{card:Jt.deck[M],player:Jt,cardIndex:M}),playerColorMap:or,localPlayerId:n,imageRefreshVersion:Ee}),s.jsx(Vy,{isOpen:Cr,onClose:()=>{tr(!1),h(null)},setDraggedItem:P,openContextMenu:Dn,canInteract:!!n,anchorEl:As,imageRefreshVersion:Ee,draggedItem:N}),s.jsx(Ky,{isOpen:ul,onClose:()=>{nr(!1),v(null)},setDraggedItem:P,canInteract:!!n,anchorEl:y,imageRefreshVersion:Ee,onCounterMouseDown:Hp,cursorStack:Z}),k&&t.gameMode!==Cn.FreeForAll&&s.jsx(Jy,{players:t.players,gameMode:t.gameMode,onCancel:()=>w(!1),onConfirm:Mp}),t.isReadyCheckActive&&qe&&s.jsx(Yy,{players:t.players,localPlayer:qe,onReady:u,onCancel:i}),t.revealRequests.filter(b=>b.toPlayerId===n).map((b,M)=>{const de=t.players.find(he=>he.id===b.fromPlayerId);return de?s.jsx(qy,{fromPlayer:de,cardCount:b.cardIdentifiers.length,onAccept:()=>oe(de.id,!0),onDecline:()=>oe(de.id,!1)},M):null}),H&&s.jsx(gp,{card:H.card,ownerPlayer:H.player,onClose:()=>ce(null),statusDescriptions:ms,allPlayers:t.players,imageRefreshVersion:Ee}),s.jsx(xp,{isOpen:al,onClose:()=>ao(!1),setViewingCard:ce}),s.jsx(vp,{isOpen:il,onClose:()=>io(!1),onSave:Iu}),s.jsx(Tp,{isOpen:cl,onClose:()=>uo(!1)}),s.jsx("div",{ref:Ut,className:`fixed pointer-events-none z-[9999] flex items-center justify-center transition-transform duration-75 ${Z||Ne?"block":"hidden"}`,style:{transform:"translate(5px, 5px)"},children:Z&&s.jsxs("div",{className:"relative w-12 h-12 flex items-center justify-center",style:{backgroundImage:"url(https://res.cloudinary.com/dxxh6meej/image/upload/v1763653192/background_counter_socvss.png)",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"},children:[Zo[Z.type]?s.jsx("img",{src:Zo[Z.type],alt:Z.type,className:"w-8 h-8 object-contain drop-shadow-lg"}):s.jsx("span",{className:"text-white font-bold text-lg drop-shadow-[0_0_2px_black]",children:Z.type.charAt(0)}),s.jsx("div",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center border border-white z-10",children:Z.count})]})})]}):s.jsx(og,{handleCreateGame:Up,setSettingsModalOpen:io,handleOpenJoinModal:zp,setDeckBuilderOpen:ao,setRulesModalOpen:uo,isJoinModalOpen:sl,setJoinModalOpen:wr,handleJoinGame:_u,gamesList:B,isDeckBuilderOpen:al,setViewingCard:ce,isSettingsModalOpen:il,handleSaveSettings:Iu,isRulesModalOpen:cl,viewingCard:H,gameState:t,imageRefreshVersion:Ee,t:e})}class fg extends Fn.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,n){console.error("Uncaught error:",t,n)}render(){return this.state.hasError?s.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-900 text-white p-4 text-center",children:[s.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Something went wrong"}),s.jsx("p",{className:"mb-6 text-gray-400",children:"The application encountered an unexpected error."}),s.jsx("button",{onClick:()=>window.location.reload(),className:"bg-indigo-600 px-6 py-3 rounded-lg hover:bg-indigo-700 transition font-bold shadow-lg",children:"Reload Game"})]}):this.props.children}}const kp=document.getElementById("root");if(!kp)throw new Error("Could not find root element to mount to");const pg=Ta.createRoot(kp);pg.render(s.jsx(fg,{children:s.jsx(Fy,{children:s.jsx(dg,{})})}));
